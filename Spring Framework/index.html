<html>
<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Spring Framework | Linner&#39;s Blog</title>

<!-- ä»£ç é«˜äº®ï¼š -->
<!-- <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> -->
<!-- <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script> -->

<link rel="shortcut icon" href="https://linna-cy.github.io/old-blog/favicon.ico?v=1684376365462">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://linna-cy.github.io/old-blog/styles/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">

<link rel="stylesheet" href="https://linna-cy.github.io/old-blog/media/icons/iconfont.css">

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.12.0/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.12.0/languages//dart.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script>
<!-- DEMO JS -->
<!-- <script src="media/scripts/index.js"></script> -->



    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
    
    <script>
      // è®¡ç®—ä»£ç è¡Œæ•°
      let pxToNumber = function(px) {
        // let num = Number(px.replace("px", ""));
        let num = parseFloat(px);

        return num;
      };
      let getRow = function(elem) {
          let style = window.getComputedStyle(elem, null);
          // let lineHeight = style.lineHeight === "normal" ? style.fontSize : style.lineHeight;
          let lineHeight = style.lineHeight;

          let height = style.height;
          let padding = style.padding;
          // let isiOS = /(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent);
          let row = (pxToNumber(height)-pxToNumber(padding)) / pxToNumber(lineHeight);
          // if (isiOS) {
          //   row = pxToNumber(height) / pxToNumber(lineHeight);
          //   alert('ios!');
          // }
          // else {
          //   row = (pxToNumber(height)-pxToNumber(padding)) / pxToNumber(lineHeight);
          // }
          return parseInt(row);
      };
      
      // è·å–è¡Œå·æ–‡å­—
      let getRowNumString = function (row) {
          let num_str = new String('');
          for (let i = 1; i <= row; i++) {
              let num = new String(i.toString() + '\n');
              num_str = num_str + num;
          }
          return num_str;
      }

      // æŒ‡å®šä»£ç å—å¼€å¯ä»£ç è¡Œå·
      let setCodeNum = function(codeElem) {
          let pre = codeElem.parentElement;
          let span = document.createElement('span');
          span.innerText = getRowNumString(getRow(codeElem));
          let codeElemStyle = window.getComputedStyle(codeElem, null);
          span.style.display = 'inline-block';
          span.style.backgroundColor = "rgba(255,255,255,0)";
          span.style.color = 'rgba(255,255,255,0.4)';
          span.style.margin = 0;
          span.style.padding = 0;
          // span.style.borderRight = '1px #fff solid';
          span.style.paddingRight = 4;
          span.style.userSelect = 'none';
          span.style.textAlign = 'center';
          span.className = 'code-num';

          span.style.font = codeElemStyle.font;
          // span.style.height = codeElemStyle.height;
          span.style.paddingLeft = codeElemStyle.paddingRight;
          span.style.borderTopLeftRadius = codeElemStyle.borderTopRightRadius;
          span.style.borderBottomLeftRadius = codeElemStyle.borderBottomRightRadius;
          span.style.paddingTop = codeElemStyle.paddingTop;

          pre.style.display = 'flex';
          pre.style.overflowX = 'hidden';

          codeElem.style.borderTopLeftRadius = 0;
          codeElem.style.borderBottomLeftRadius = 0;
          codeElem.style.marginLeft = 0;
          codeElem.style.paddingLeft = span.style.paddingRight;
          codeElem.style.overflowX = 'auto';
          codeElem.style.display = 'inline-block';
          pre.insertBefore(span, codeElem);
      }

      // è®¾ç½®ä»£ç å—å¼€å¯ä»£ç è¡Œå·
      let setCodeAllNum = function() {
          let codeElems = document.querySelectorAll('pre > code');
          for (let i = 0; i < codeElems.length; i++) {
              codeElems[i].parentElement.className = 'code-pre';
              setCodeNum(codeElems[i]);
          }
      }
    </script>
</head>
<body>
<div class="main gt-bg-theme-color-first post-main">
    <!-- <div class="top">
    <span id="go-top" class="iconfont icon-shangxiazuoyouTriangle17"></span>
</div>
<script>
    let goTop = document.getElementById("go-top");
    let goTopDisplay = function () {
        let height = document.documentElement.scrollTop 
                    || document.body.scrollTop
        if (height >= (document.body.clientHeight || document.documentElement.clientHeight) * 0.8) {
            goTop.style.display = "block"
        } else {
            goTop.style.display = "none"
        }
        goTop.focus();
    }
    window.onscroll = goTopDisplay;
    window.onload = goTopDisplay;
    window.onresize = goTopDisplay;
    goTop.onclick = function () {
        window.scrollTo({
            top: 0,
            behavior: "smooth"
        })
    }
</script> -->
    <nav class="navbar navbar-expand-lg" id="navbar">
    <a class="navbar-brand" href="/">
        <!-- <img class="user-avatar" src="/images/avatar.png" alt="å¤´åƒ"> -->
        <img class="site-icon" src="https://linna-cy.github.io/old-blog/images/favicon.png" alt="icon">
        <div class="site-name gt-c-content-color-first">
            Linner&#39;s Blog
        </div>
    </a>

    <div id="to-top" style="flex: 1; height: 100%;"></div>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" id="changeNavbar">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
            <div class="nav-item">
                
                <a href="/" class="menu gt-a-link">
                    <span class="iconfont icon-zhuye"></span>
                    é¦–é¡µ
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/archives" class="menu gt-a-link">
                    <span class="iconfont icon-guidang"></span>
                    å½’æ¡£
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/tags" class="menu gt-a-link">
                    <span class="iconfont icon-biaoqian"></span>
                    æ ‡ç­¾
                </a>
                
            </div>
            
            <!-- <div class="nav-item" id="toc">
                <a class="menu gt-a-link">
                    <span class="iconfont icon-mulu"></span>
                    ç›®å½•
                </a>
            </div> -->
            <!-- <div class="nav-item" id="to-top">
                <a href="#top" class="menu gt-a-link">
                    <span class="iconfont icon-fanhuidingbu"></span>
                    è¿”å›é¡¶éƒ¨
                </a>
            </div> -->
        </div>
        <!-- æœç´¢æ¡† -->
        <!-- <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1684376365462"
                action="/search/">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="æœç´¢æ–‡ç« " />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 7px; left: 10px;"></i>
            </form>
        </div> -->
        <div class="search-box">
            <i class="fas fa-search gt-c-content-color-first"></i>
            <form id="gridea-search-form" data-update="1684376365462"
                action="/search/">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="æœç´¢æ–‡ç« " />
            </form>
        </div>
    </div>
</nav>
<script>
    /* ç§»åŠ¨ç«¯å¯¼èˆªæ å±•å¼€/æ”¶èµ·åˆ‡æ¢ */
    document.getElementById('changeNavbar').onclick = () => {
        var element = document.getElementById('navbarSupportedContent');
        if (element.style.display === 'none' || element.style.display === '') {
            element.style.display = 'flex';
        } else {
            element.style.display = 'none';
        }
    }

    // è‡ªåŠ¨æ˜¾ç¤ºç›®å½•é¡¹
    // let toc = document.getElementById('toc');
    // let isPost = document.getElementById('isPost');
    // if (isPost == null) {
    //     toc.style.display = 'none';
    // }
    // else {
    //     toc.style.display = 'block';
    // }

    // toc.onclick = () => {

    // }

    // ç‚¹å‡»å¯¼èˆªæ è½¬åˆ°é¡µé¢é¡¶éƒ¨
    let toTop = document.getElementById("to-top");
    toTop.onclick = function () {
        window.scrollTo({
            top: 0,
            behavior: "smooth"
        })
    }

    // let goTopDisplay = function () {
    //     let height = document.documentElement.scrollTop 
    //                 || document.body.scrollTop
    //     if (height >= (document.body.clientHeight || document.documentElement.clientHeight) * 0.8) {
    //         navbar.style.position = "fixed !important"
    //     } else {
    //         navbar.style.position = "static !important"
    //     }
    // }
    // window.onscroll = goTopDisplay;
    // window.onload = goTopDisplay;
    // window.onresize = goTopDisplay;
</script>


    <div id="background" class="background" style="background-image: url(https://gitcode.net/qq_22182345/myfiles/-/raw/master/img/4kcityscape.jpg);">
        <div class="post-header">
          <h2 class="post-title">
            Spring Framework
          </h2>
          <div class="post-info">
            <span class="meta-item pc-show">
              <!-- icon -->
              <span class="language" data-lan="publish">å‘å¸ƒäº</span>
              <span class="publish-time">2022-10-16</span>
              <span class="post-meta-divider pc-show">|</span>
            </span>
            
            <span class="meta-item">
              <!-- icon -->
              <span class="pc-show language" data-lan="category-in">æ ‡ç­¾:</span>
               
              <a href="https://linna-cy.github.io/old-blog/boslKuyhk/"> <span>#Spring </span></a>  
              <a href="https://linna-cy.github.io/old-blog/MrL8MvLdJ_/"> <span>#Java </span></a>  
              <a href="https://linna-cy.github.io/old-blog/vvCs3Js_LL/"> <span>#JavaWeb </span></a>  
              <a href="https://linna-cy.github.io/old-blog/18uPZhlPeC/">
                <span>#Maven </span>
              </a>
               
            </span>
            <span class="post-meta-divider">|</span>
            
            <span class="meta-item">
              <!-- icon -->
              <span
                >59<span class="language" data-lan="minute"
                  >åˆ†é’Ÿ</span
                ></span
              >
            </span>
            <span class="meta-item">
              <span class="post-meta-divider">|</span>
              <!-- icon -->
              <span
                >12863<span class="pc-show language" data-lan="words"
                  >å­—æ•°</span
                ></span
              >
            </span>
          </div>
        </div>
    </div>

    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <div class="post-content">
                    <!-- <div id="toc-div">
                        <h1>ç›®å½•</h1>
                        <ul class="markdownIt-TOC">
<li><a href="#spring-framewor-%E7%AE%80%E4%BB%8B">Spring Framewor ç®€ä»‹</a>
<ul>
<li><a href="#spring-framewor-%E6%9E%B6%E6%9E%84">Spring Framewor æ¶æ„</a></li>
<li><a href="#spring-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5">Spring æ ¸å¿ƒæ¦‚å¿µ</a></li>
</ul>
</li>
<li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8iocdi">é…ç½®æ–‡ä»¶æ–¹æ³•ä½¿ç”¨IOC/DI</a>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8-ioc-%E5%AE%B9%E5%99%A8%E5%88%9B%E5%BB%BA-beanbean-%E6%A0%87%E7%AD%BE">ä½¿ç”¨ IOC å®¹å™¨åˆ›å»º Beanï¼ˆbean æ ‡ç­¾ï¼‰</a>
<ul>
<li><a href="#bean-%E7%9A%84%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE">Bean çš„åŸºç¡€é…ç½®</a></li>
<li><a href="#%E5%88%AB%E5%90%8Dname-%E5%B1%9E%E6%80%A7">åˆ«åï¼ˆname å±æ€§ï¼‰</a></li>
<li><a href="#%E8%8E%B7%E5%8F%96-bean-%E7%9A%84%E6%96%B9%E5%BC%8Fgetbean-%E6%96%B9%E6%B3%95">è·å– Bean çš„æ–¹å¼ï¼ˆgetBean() æ–¹æ³•ï¼‰</a></li>
<li><a href="#%E4%BD%9C%E7%94%A8%E8%8C%83%E5%9B%B4scope-%E5%B1%9E%E6%80%A7">ä½œç”¨èŒƒå›´ï¼ˆscope å±æ€§ï¼‰</a></li>
<li><a href="#bean-%E7%9A%84%E5%AE%9E%E4%BE%8B%E5%8C%96">Bean çš„å®ä¾‹åŒ–</a>
<ul>
<li><a href="#%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E5%AE%9E%E4%BE%8B%E5%8C%96-bean%E9%BB%98%E8%AE%A4">æ„é€ æ–¹æ³•å®ä¾‹åŒ– Beanï¼ˆé»˜è®¤ï¼‰</a></li>
<li><a href="#%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E5%AE%9E%E4%BE%8B%E5%8C%96-beanfactory-method-%E5%B1%9E%E6%80%A7">é™æ€å·¥å‚å®ä¾‹åŒ– Beanï¼ˆfactory-method å±æ€§ï¼‰</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B%E5%B7%A5%E5%8E%82%E5%AE%9E%E4%BE%8B%E5%8C%96-bean">å®ä¾‹å·¥å‚å®ä¾‹åŒ– Bean</a>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8-bean-%E7%9A%84-factory-bean-%E5%B1%9E%E6%80%A7">ä½¿ç”¨ Bean çš„ factory-bean å±æ€§</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-factorybean-%E6%8E%A5%E5%8F%A3">ä½¿ç”¨ FactoryBean æ¥å£</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#bean-%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">Bean çš„ç”Ÿå‘½å‘¨æœŸ</a>
<ul>
<li><a href="#init-method-%E5%92%8C-destroy-method-%E5%B1%9E%E6%80%A7">init-method å’Œ destroy-method å±æ€§</a></li>
<li><a href="#%E6%B3%A8%E5%86%8C%E9%92%A9%E5%AD%90%E5%85%B3%E9%97%AD%E5%AE%B9%E5%99%A8">æ³¨å†Œé’©å­å…³é—­å®¹å™¨</a></li>
<li><a href="#initializingbean-%E5%92%8C-disposablebean-%E6%8E%A5%E5%8F%A3">InitializingBean å’Œ DisposableBean æ¥å£</a></li>
</ul>
</li>
<li><a href="#%E4%BD%BF%E7%94%A8-bean-%E6%A0%87%E7%AD%BE%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">ä½¿ç”¨ Bean æ ‡ç­¾çš„æ³¨æ„äº‹é¡¹</a></li>
</ul>
</li>
<li><a href="#di-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5">DI ä¾èµ–æ³¨å…¥</a>
<ul>
<li><a href="#setter-%E6%B3%A8%E5%85%A5property-%E6%A0%87%E7%AD%BE">Setter æ³¨å…¥ï¼ˆproperty æ ‡ç­¾ï¼‰</a>
<ul>
<li><a href="#%E6%B3%A8%E5%85%A5%E5%BC%95%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹</a></li>
<li><a href="#%E6%B3%A8%E5%85%A5%E7%AE%80%E5%8D%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">æ³¨å…¥ç®€å•æ•°æ®ç±»å‹</a></li>
<li><a href="#%E9%9B%86%E5%90%88%E6%B3%A8%E5%85%A5">é›†åˆæ³¨å…¥</a></li>
</ul>
</li>
<li><a href="#%E6%9E%84%E9%80%A0%E5%99%A8%E6%B3%A8%E5%85%A5constructor-arg-%E6%A0%87%E7%AD%BE">æ„é€ å™¨æ³¨å…¥ï¼ˆconstructor-arg æ ‡ç­¾ï¼‰</a>
<ul>
<li><a href="#%E6%B3%A8%E5%85%A5%E5%BC%95%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-2">æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹</a></li>
<li><a href="#%E6%B3%A8%E5%85%A5%E7%AE%80%E5%8D%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-2">æ³¨å…¥ç®€å•æ•°æ®ç±»å‹</a></li>
<li><a href="#%E9%9B%86%E5%90%88%E6%B3%A8%E5%85%A5-2">é›†åˆæ³¨å…¥</a></li>
</ul>
</li>
<li><a href="#%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8Dbean-%E6%A0%87%E7%AD%BE%E7%9A%84-autowire-%E5%B1%9E%E6%80%A7">è‡ªåŠ¨è£…é…ï¼ˆbean æ ‡ç­¾çš„ autowire å±æ€§ï¼‰</a>
<ul>
<li><a href="#%E6%8C%89%E7%B1%BB%E5%9E%8B%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D">æŒ‰ç±»å‹è‡ªåŠ¨è£…é…</a></li>
<li><a href="#%E6%8C%89%E5%90%8D%E7%A7%B0%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D">æŒ‰åç§°è‡ªåŠ¨è£…é…</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E7%AC%AC%E4%B8%89%E6%96%B9-beanproperties-%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD">é…ç½®æ–‡ä»¶ç®¡ç†ç¬¬ä¸‰æ–¹ Beanï¼ˆproperties æ–‡ä»¶åŠ è½½ï¼‰</a>
<ul>
<li><a href="#%E6%95%B0%E6%8D%AE%E6%BA%90%E5%AF%B9%E8%B1%A1%E7%AE%A1%E7%90%86dao%E5%B1%82">æ•°æ®æºå¯¹è±¡ç®¡ç†ï¼ˆDAOå±‚ï¼‰</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91">æ³¨è§£å¼€å‘</a>
<ul>
<li><a href="#spring-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8C%85%E6%89%AB%E6%8F%8F">Spring é…ç½®æ–‡ä»¶åŒ…æ‰«æ</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA-bean-%E5%AF%B9%E8%B1%A1component">åˆ›å»º Bean å¯¹è±¡ï¼ˆ@Componentï¼‰</a></li>
<li><a href="#%E7%BA%AF%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%E9%85%8D%E7%BD%AE%E7%B1%BB-%E5%8C%85%E6%89%AB%E6%8F%8F">çº¯æ³¨è§£å¼€å‘ï¼ˆé…ç½®ç±»ã€åŒ…æ‰«æï¼‰</a></li>
<li><a href="#%E4%BD%9C%E7%94%A8%E8%8C%83%E5%9B%B4scope">ä½œç”¨èŒƒå›´ï¼ˆ@Scopeï¼‰</a></li>
<li><a href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8E%A7%E5%88%B6postconstruct-%E5%92%8C-predestroy">ç”Ÿå‘½å‘¨æœŸæ§åˆ¶ï¼ˆ@PostConstruct å’Œ @PreDestroyï¼‰</a></li>
<li><a href="#%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5">ä¾èµ–æ³¨å…¥</a>
<ul>
<li><a href="#%E6%8C%89%E7%85%A7%E7%B1%BB%E5%9E%8B%E6%B3%A8%E5%85%A5">æŒ‰ç…§ç±»å‹æ³¨å…¥</a></li>
<li><a href="#%E6%8C%89%E7%85%A7%E5%90%8D%E7%A7%B0%E6%B3%A8%E5%85%A5">æŒ‰ç…§åç§°æ³¨å…¥</a></li>
<li><a href="#%E6%B3%A8%E5%85%A5%E7%AE%80%E5%8D%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-3">æ³¨å…¥ç®€å•æ•°æ®ç±»å‹</a>
<ul>
<li><a href="#%E6%B3%A8%E8%A7%A3%E8%AF%BB%E5%8F%96-properties-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">æ³¨è§£è¯»å– properties é…ç½®æ–‡ä»¶</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%B3%A8%E8%A7%A3%E7%AE%A1%E7%90%86%E7%AC%AC%E4%B8%89%E6%96%B9-bean">æ³¨è§£ç®¡ç†ç¬¬ä¸‰æ–¹ Bean</a>
<ul>
<li><a href="#%E6%95%B4%E5%90%88-mybatis">æ•´åˆ Mybatis</a></li>
<li><a href="#%E6%95%B4%E5%90%88-junit">æ•´åˆ Junit</a></li>
</ul>
</li>
<li><a href="#aop">AOP</a>
<ul>
<li><a href="#aop-%E4%BB%8B%E7%BB%8D">AOP ä»‹ç»</a></li>
<li><a href="#%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91-aop">æ³¨è§£å¼€å‘ AOP</a></li>
<li><a href="#aop-%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F">AOP åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</a>
<ul>
<li><a href="#%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E9%80%9A%E9%85%8D%E7%AC%A6">åˆ‡å…¥ç‚¹è¡¨è¾¾å¼é€šé…ç¬¦</a></li>
<li><a href="#%E9%80%9A%E7%9F%A5%E7%B1%BB%E5%9E%8B">é€šçŸ¥ç±»å‹</a>
<ul>
<li><a href="#%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%E5%92%8C%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5%E7%9A%84%E4%BD%BF%E7%94%A8">å‰ç½®é€šçŸ¥å’Œåç½®é€šçŸ¥çš„ä½¿ç”¨</a></li>
<li><a href="#%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%E7%9A%84%E4%BD%BF%E7%94%A8">ç¯ç»•é€šçŸ¥çš„ä½¿ç”¨</a></li>
<li><a href="#%E8%BF%94%E5%9B%9E%E5%90%8E%E9%80%9A%E7%9F%A5%E7%9A%84%E4%BD%BF%E7%94%A8">è¿”å›åé€šçŸ¥çš„ä½¿ç”¨</a></li>
<li><a href="#%E5%BC%82%E5%B8%B8%E5%90%8E%E9%80%9A%E7%9F%A5">å¼‚å¸¸åé€šçŸ¥</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

                        <hr>
                    </div> -->
                    
                        <h1>ç›®å½•</h1>
                        <ul class="markdownIt-TOC">
<li><a href="#spring-framewor-%E7%AE%80%E4%BB%8B">Spring Framewor ç®€ä»‹</a>
<ul>
<li><a href="#spring-framewor-%E6%9E%B6%E6%9E%84">Spring Framewor æ¶æ„</a></li>
<li><a href="#spring-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5">Spring æ ¸å¿ƒæ¦‚å¿µ</a></li>
</ul>
</li>
<li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8iocdi">é…ç½®æ–‡ä»¶æ–¹æ³•ä½¿ç”¨IOC/DI</a>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8-ioc-%E5%AE%B9%E5%99%A8%E5%88%9B%E5%BB%BA-beanbean-%E6%A0%87%E7%AD%BE">ä½¿ç”¨ IOC å®¹å™¨åˆ›å»º Beanï¼ˆbean æ ‡ç­¾ï¼‰</a>
<ul>
<li><a href="#bean-%E7%9A%84%E5%9F%BA%E7%A1%80%E9%85%8D%E7%BD%AE">Bean çš„åŸºç¡€é…ç½®</a></li>
<li><a href="#%E5%88%AB%E5%90%8Dname-%E5%B1%9E%E6%80%A7">åˆ«åï¼ˆname å±æ€§ï¼‰</a></li>
<li><a href="#%E8%8E%B7%E5%8F%96-bean-%E7%9A%84%E6%96%B9%E5%BC%8Fgetbean-%E6%96%B9%E6%B3%95">è·å– Bean çš„æ–¹å¼ï¼ˆgetBean() æ–¹æ³•ï¼‰</a></li>
<li><a href="#%E4%BD%9C%E7%94%A8%E8%8C%83%E5%9B%B4scope-%E5%B1%9E%E6%80%A7">ä½œç”¨èŒƒå›´ï¼ˆscope å±æ€§ï¼‰</a></li>
<li><a href="#bean-%E7%9A%84%E5%AE%9E%E4%BE%8B%E5%8C%96">Bean çš„å®ä¾‹åŒ–</a>
<ul>
<li><a href="#%E6%9E%84%E9%80%A0%E6%96%B9%E6%B3%95%E5%AE%9E%E4%BE%8B%E5%8C%96-bean%E9%BB%98%E8%AE%A4">æ„é€ æ–¹æ³•å®ä¾‹åŒ– Beanï¼ˆé»˜è®¤ï¼‰</a></li>
<li><a href="#%E9%9D%99%E6%80%81%E5%B7%A5%E5%8E%82%E5%AE%9E%E4%BE%8B%E5%8C%96-beanfactory-method-%E5%B1%9E%E6%80%A7">é™æ€å·¥å‚å®ä¾‹åŒ– Beanï¼ˆfactory-method å±æ€§ï¼‰</a></li>
<li><a href="#%E5%AE%9E%E4%BE%8B%E5%B7%A5%E5%8E%82%E5%AE%9E%E4%BE%8B%E5%8C%96-bean">å®ä¾‹å·¥å‚å®ä¾‹åŒ– Bean</a>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8-bean-%E7%9A%84-factory-bean-%E5%B1%9E%E6%80%A7">ä½¿ç”¨ Bean çš„ factory-bean å±æ€§</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8-factorybean-%E6%8E%A5%E5%8F%A3">ä½¿ç”¨ FactoryBean æ¥å£</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#bean-%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F">Bean çš„ç”Ÿå‘½å‘¨æœŸ</a>
<ul>
<li><a href="#init-method-%E5%92%8C-destroy-method-%E5%B1%9E%E6%80%A7">init-method å’Œ destroy-method å±æ€§</a></li>
<li><a href="#%E6%B3%A8%E5%86%8C%E9%92%A9%E5%AD%90%E5%85%B3%E9%97%AD%E5%AE%B9%E5%99%A8">æ³¨å†Œé’©å­å…³é—­å®¹å™¨</a></li>
<li><a href="#initializingbean-%E5%92%8C-disposablebean-%E6%8E%A5%E5%8F%A3">InitializingBean å’Œ DisposableBean æ¥å£</a></li>
</ul>
</li>
<li><a href="#%E4%BD%BF%E7%94%A8-bean-%E6%A0%87%E7%AD%BE%E7%9A%84%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9">ä½¿ç”¨ Bean æ ‡ç­¾çš„æ³¨æ„äº‹é¡¹</a></li>
</ul>
</li>
<li><a href="#di-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5">DI ä¾èµ–æ³¨å…¥</a>
<ul>
<li><a href="#setter-%E6%B3%A8%E5%85%A5property-%E6%A0%87%E7%AD%BE">Setter æ³¨å…¥ï¼ˆproperty æ ‡ç­¾ï¼‰</a>
<ul>
<li><a href="#%E6%B3%A8%E5%85%A5%E5%BC%95%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹</a></li>
<li><a href="#%E6%B3%A8%E5%85%A5%E7%AE%80%E5%8D%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">æ³¨å…¥ç®€å•æ•°æ®ç±»å‹</a></li>
<li><a href="#%E9%9B%86%E5%90%88%E6%B3%A8%E5%85%A5">é›†åˆæ³¨å…¥</a></li>
</ul>
</li>
<li><a href="#%E6%9E%84%E9%80%A0%E5%99%A8%E6%B3%A8%E5%85%A5constructor-arg-%E6%A0%87%E7%AD%BE">æ„é€ å™¨æ³¨å…¥ï¼ˆconstructor-arg æ ‡ç­¾ï¼‰</a>
<ul>
<li><a href="#%E6%B3%A8%E5%85%A5%E5%BC%95%E7%94%A8%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-2">æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹</a></li>
<li><a href="#%E6%B3%A8%E5%85%A5%E7%AE%80%E5%8D%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-2">æ³¨å…¥ç®€å•æ•°æ®ç±»å‹</a></li>
<li><a href="#%E9%9B%86%E5%90%88%E6%B3%A8%E5%85%A5-2">é›†åˆæ³¨å…¥</a></li>
</ul>
</li>
<li><a href="#%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8Dbean-%E6%A0%87%E7%AD%BE%E7%9A%84-autowire-%E5%B1%9E%E6%80%A7">è‡ªåŠ¨è£…é…ï¼ˆbean æ ‡ç­¾çš„ autowire å±æ€§ï¼‰</a>
<ul>
<li><a href="#%E6%8C%89%E7%B1%BB%E5%9E%8B%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D">æŒ‰ç±»å‹è‡ªåŠ¨è£…é…</a></li>
<li><a href="#%E6%8C%89%E5%90%8D%E7%A7%B0%E8%87%AA%E5%8A%A8%E8%A3%85%E9%85%8D">æŒ‰åç§°è‡ªåŠ¨è£…é…</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86%E7%AC%AC%E4%B8%89%E6%96%B9-beanproperties-%E6%96%87%E4%BB%B6%E5%8A%A0%E8%BD%BD">é…ç½®æ–‡ä»¶ç®¡ç†ç¬¬ä¸‰æ–¹ Beanï¼ˆproperties æ–‡ä»¶åŠ è½½ï¼‰</a>
<ul>
<li><a href="#%E6%95%B0%E6%8D%AE%E6%BA%90%E5%AF%B9%E8%B1%A1%E7%AE%A1%E7%90%86dao%E5%B1%82">æ•°æ®æºå¯¹è±¡ç®¡ç†ï¼ˆDAOå±‚ï¼‰</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91">æ³¨è§£å¼€å‘</a>
<ul>
<li><a href="#spring-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%8C%85%E6%89%AB%E6%8F%8F">Spring é…ç½®æ–‡ä»¶åŒ…æ‰«æ</a></li>
<li><a href="#%E5%88%9B%E5%BB%BA-bean-%E5%AF%B9%E8%B1%A1component">åˆ›å»º Bean å¯¹è±¡ï¼ˆ@Componentï¼‰</a></li>
<li><a href="#%E7%BA%AF%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91%E9%85%8D%E7%BD%AE%E7%B1%BB-%E5%8C%85%E6%89%AB%E6%8F%8F">çº¯æ³¨è§£å¼€å‘ï¼ˆé…ç½®ç±»ã€åŒ…æ‰«æï¼‰</a></li>
<li><a href="#%E4%BD%9C%E7%94%A8%E8%8C%83%E5%9B%B4scope">ä½œç”¨èŒƒå›´ï¼ˆ@Scopeï¼‰</a></li>
<li><a href="#%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E6%8E%A7%E5%88%B6postconstruct-%E5%92%8C-predestroy">ç”Ÿå‘½å‘¨æœŸæ§åˆ¶ï¼ˆ@PostConstruct å’Œ @PreDestroyï¼‰</a></li>
<li><a href="#%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5">ä¾èµ–æ³¨å…¥</a>
<ul>
<li><a href="#%E6%8C%89%E7%85%A7%E7%B1%BB%E5%9E%8B%E6%B3%A8%E5%85%A5">æŒ‰ç…§ç±»å‹æ³¨å…¥</a></li>
<li><a href="#%E6%8C%89%E7%85%A7%E5%90%8D%E7%A7%B0%E6%B3%A8%E5%85%A5">æŒ‰ç…§åç§°æ³¨å…¥</a></li>
<li><a href="#%E6%B3%A8%E5%85%A5%E7%AE%80%E5%8D%95%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B-3">æ³¨å…¥ç®€å•æ•°æ®ç±»å‹</a>
<ul>
<li><a href="#%E6%B3%A8%E8%A7%A3%E8%AF%BB%E5%8F%96-properties-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6">æ³¨è§£è¯»å– properties é…ç½®æ–‡ä»¶</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%B3%A8%E8%A7%A3%E7%AE%A1%E7%90%86%E7%AC%AC%E4%B8%89%E6%96%B9-bean">æ³¨è§£ç®¡ç†ç¬¬ä¸‰æ–¹ Bean</a>
<ul>
<li><a href="#%E6%95%B4%E5%90%88-mybatis">æ•´åˆ Mybatis</a></li>
<li><a href="#%E6%95%B4%E5%90%88-junit">æ•´åˆ Junit</a></li>
</ul>
</li>
<li><a href="#aop">AOP</a>
<ul>
<li><a href="#aop-%E4%BB%8B%E7%BB%8D">AOP ä»‹ç»</a></li>
<li><a href="#%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91-aop">æ³¨è§£å¼€å‘ AOP</a></li>
<li><a href="#aop-%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F">AOP åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</a>
<ul>
<li><a href="#%E5%88%87%E5%85%A5%E7%82%B9%E8%A1%A8%E8%BE%BE%E5%BC%8F%E9%80%9A%E9%85%8D%E7%AC%A6">åˆ‡å…¥ç‚¹è¡¨è¾¾å¼é€šé…ç¬¦</a></li>
<li><a href="#%E9%80%9A%E7%9F%A5%E7%B1%BB%E5%9E%8B">é€šçŸ¥ç±»å‹</a>
<ul>
<li><a href="#%E5%89%8D%E7%BD%AE%E9%80%9A%E7%9F%A5%E5%92%8C%E5%90%8E%E7%BD%AE%E9%80%9A%E7%9F%A5%E7%9A%84%E4%BD%BF%E7%94%A8">å‰ç½®é€šçŸ¥å’Œåç½®é€šçŸ¥çš„ä½¿ç”¨</a></li>
<li><a href="#%E7%8E%AF%E7%BB%95%E9%80%9A%E7%9F%A5%E7%9A%84%E4%BD%BF%E7%94%A8">ç¯ç»•é€šçŸ¥çš„ä½¿ç”¨</a></li>
<li><a href="#%E8%BF%94%E5%9B%9E%E5%90%8E%E9%80%9A%E7%9F%A5%E7%9A%84%E4%BD%BF%E7%94%A8">è¿”å›åé€šçŸ¥çš„ä½¿ç”¨</a></li>
<li><a href="#%E5%BC%82%E5%B8%B8%E5%90%8E%E9%80%9A%E7%9F%A5">å¼‚å¸¸åé€šçŸ¥</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

                        <hr>
                    
                    <h1 id="spring-framewor-ç®€ä»‹">Spring Framewor ç®€ä»‹</h1>
<blockquote>
<p>Spring5.0å·²ç»å…¨é¢æ”¯æŒJDK8ï¼Œå»ºè®®JDKä½¿ç”¨1.8ç‰ˆæœ¬ã€‚</p>
</blockquote>
<p>Spring Frameworkæ˜¯Springå®¶æ—ä¸­å…¶ä»–æ¡†æ¶çš„åº•å±‚åŸºç¡€ã€‚</p>
<h2 id="spring-framewor-æ¶æ„">Spring Framewor æ¶æ„</h2>
<p>Spring Frameworkçš„å‘å±•ç»å†äº†å¾ˆå¤šç‰ˆæœ¬çš„å˜æ›´ï¼Œæ¯ä¸ªç‰ˆæœ¬éƒ½æœ‰ç›¸åº”çš„è°ƒæ•´ã€‚</p>
<p>Spring Framework æ¶æ„ï¼š</p>
<ol>
<li>æ ¸å¿ƒå±‚<br>
Core Containerï¼šæ ¸å¿ƒå®¹å™¨ï¼Œè¿™ä¸ªæ¨¡å—æ˜¯Springæœ€æ ¸å¿ƒçš„æ¨¡å—ï¼Œå…¶ä»–çš„éƒ½éœ€è¦ä¾èµ–è¯¥æ¨¡å—ã€‚</li>
<li>AOPå±‚
<ul>
<li>AOPï¼šé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼Œå®ƒä¾èµ–æ ¸å¿ƒå±‚å®¹å™¨ï¼Œç›®çš„æ˜¯åœ¨<u>ä¸æ”¹å˜åŸæœ‰ä»£ç </u>çš„å‰æä¸‹å¯¹å…¶è¿›è¡Œ<u>åŠŸèƒ½å¢å¼º</u>ã€‚</li>
<li>Aspectsï¼šAOPæ˜¯ç¼–ç¨‹æ€æƒ³ï¼ŒAspectsæ˜¯å¯¹AOPæ€æƒ³çš„å…·ä½“å®ç°ã€‚</li>
</ul>
</li>
<li>æ•°æ®å±‚
<ul>
<li>Data Accessï¼šæ•°æ®è®¿é—®ï¼ŒSpringå…¨å®¶æ¡¶ä¸­æœ‰å¯¹æ•°æ®è®¿é—®çš„å…·ä½“å®ç°æŠ€æœ¯ã€‚</li>
<li>Data Integrationï¼šæ•°æ®é›†æˆï¼ŒSpringæ”¯æŒæ•´åˆå…¶ä»–çš„æ•°æ®å±‚è§£å†³æ–¹æ¡ˆï¼Œæ¯”å¦‚Mybatisã€‚</li>
<li>Transactionsï¼šäº‹åŠ¡ï¼ŒSpringä¸­äº‹åŠ¡ç®¡ç†æ˜¯Spring AOPçš„ä¸€ä¸ªå…·ä½“å®ç°ã€‚</li>
</ul>
</li>
<li>Webå±‚</li>
<li>Testå±‚<br>
Springä¸»è¦æ•´åˆäº†Junitæ¥å®Œæˆå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•ã€‚</li>
</ol>
<blockquote>
<p>ä»Spring Framework 5æ²¡æœ‰æ¶æ„å›¾ï¼Œè€Œæœ€æ–°çš„æ¶æ„å›¾æ˜¯4ç‰ˆæœ¬ï¼Œæ‰€ä»¥å¯ä»¥è®¤ä¸ºSpring Frameworkä»4ç‰ˆæœ¬å¼€å§‹æ¶æ„å°±å·²ç»è¶‹äºç¨³å®šï¼Œæ²¡æœ‰ä»€ä¹ˆå˜åŠ¨ã€‚</p>
</blockquote>
<h2 id="spring-æ ¸å¿ƒæ¦‚å¿µ">Spring æ ¸å¿ƒæ¦‚å¿µ</h2>
<p>åœ¨Springæ ¸å¿ƒæ¦‚å¿µä¸»è¦åŒ…å«ï¼š</p>
<ul>
<li><code>IOC</code>
<ul>
<li>IOCï¼ŒInversion of Controlï¼Œå³æ§åˆ¶åè½¬ã€‚</li>
<li>æ§åˆ¶åè½¬ï¼šä¸»åŠ¨<code>new</code>äº§ç”Ÿå¯¹è±¡è½¬æ¢ä¸ºç”±<u>å¤–éƒ¨</u>æä¾›å¯¹è±¡ï¼Œæ­¤è¿‡ç¨‹ä¸­å¯¹è±¡åˆ›å»ºæ§åˆ¶æƒç”±ç¨‹åºè½¬ç§»åˆ°å¤–éƒ¨çš„ä¸€ç§æ€æƒ³ã€‚</li>
</ul>
<blockquote>
<p>ä¾‹å¦‚ï¼Œä¸šåŠ¡ï¼ˆServiceï¼‰å±‚è¦ä½¿ç”¨åˆ°æ•°æ®ï¼ˆDAOï¼‰å±‚çš„ç±»å¯¹è±¡ã€‚æ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨IOCæ€æƒ³ï¼Œç”±å¤–éƒ¨ç¨‹åºç»™ä¸šåŠ¡å±‚åˆ›å»ºæ•°æ®å±‚å¯¹è±¡ã€‚<br>
è¿™æ ·å¯ä»¥é™ä½ä¸šåŠ¡å±‚å’Œæ•°æ®å±‚ä¹‹é—´çš„è€¦åˆæ€§ã€‚<br>
å¦‚æœæ•°æ®å±‚çš„å®ç°æ›´æ”¹çš„è¯ï¼Œå°±æ— éœ€åœ¨ä¸šåŠ¡å±‚ä¸­ä¿®æ”¹å®ç°ç±»ã€‚</p>
</blockquote>
<ul>
<li><code>IOCå®¹å™¨</code>
<ul>
<li>Springæä¾›äº†ä¸€ä¸ªå®¹å™¨ï¼Œç§°ä¸º<u>IOCå®¹å™¨</u>ï¼Œç”¨æ¥å……å½“IOCæ€æƒ³ä¸­çš„&quot;å¤–éƒ¨&quot;ã€‚</li>
<li>IOCå®¹å™¨è´Ÿè´£å¯¹è±¡çš„åˆ›å»ºã€åˆå§‹åŒ–ç­‰ä¸€ç³»åˆ—å·¥ä½œã€‚</li>
</ul>
</li>
<li><code>Bean</code>
<ul>
<li>åœ¨IOCå®¹å™¨ä¸­ï¼Œè¢«åˆ›å»ºæˆ–è¢«ç®¡ç†çš„å¯¹è±¡ç»Ÿç§°ä¸º<code>Bean</code>ã€‚</li>
<li>IOCå®¹å™¨ä¸­å­˜æ”¾çš„å°±æ˜¯ä¸€ä¸ªä¸ªçš„Beanå¯¹è±¡ã€‚</li>
</ul>
</li>
</ul>
</li>
<li><code>DI</code>
<ul>
<li>ä¾èµ–æ³¨å…¥ï¼šåœ¨å®¹å™¨ä¸­å»ºç«‹Beanä¸Beanä¹‹é—´çš„ä¾èµ–å…³ç³»çš„æ•´ä¸ªè¿‡ç¨‹ã€‚</li>
</ul>
<blockquote>
<p>ä¾‹å¦‚ï¼Œä¸šåŠ¡å±‚å’Œæ•°æ®å±‚åœ¨IOCå®¹å™¨ä¸­åˆ›å»ºBeanåï¼Œå¹¶ä¸èƒ½ç›´æ¥å·¥ä½œï¼Œå› ä¸ºä¸šåŠ¡å±‚éœ€è¦ä¾èµ–æ•°æ®å±‚æ‰èƒ½æ­£ç¡®å·¥ä½œã€‚æ‰€ä»¥æ­¤æ—¶å°±éœ€è¦ä½¿ç”¨ä¾èµ–æ³¨å…¥ï¼Œåœ¨ä¸šåŠ¡å±‚å’Œæ•°æ®å±‚ä¹‹é—´å»ºç«‹ä¾èµ–å…³ç³»ã€‚</p>
</blockquote>
</li>
</ul>
<p>IOCå’ŒDIçš„æœ€ç»ˆç›®æ ‡å°±æ˜¯å……åˆ†è§£è€¦ã€‚åœ¨Spring Frameworä¸­çš„å®ç°ä¾é ï¼š</p>
<ul>
<li>ä½¿ç”¨IOCå®¹å™¨ç®¡ç†Beanï¼ˆIOCï¼‰ã€‚</li>
<li>åœ¨IOCå®¹å™¨å†…å°†æœ‰ä¾èµ–å…³ç³»çš„Beanè¿›è¡Œå…³ç³»ç»‘å®šï¼ˆDIï¼‰ã€‚</li>
</ul>
<p>æœ€ç»ˆï¼Œä½¿ç”¨å¯¹è±¡æ—¶ä¸ä»…å¯ä»¥ç›´æ¥ä»IOCå®¹å™¨ä¸­è·å–ï¼Œå¹¶ä¸”è·å–åˆ°çš„beanå·²ç»ç»‘å®šäº†æ‰€æœ‰çš„ä¾èµ–å…³ç³»ã€‚</p>
<hr>
<h1 id="é…ç½®æ–‡ä»¶æ–¹æ³•ä½¿ç”¨iocdi">é…ç½®æ–‡ä»¶æ–¹æ³•ä½¿ç”¨IOC/DI</h1>
<h2 id="ä½¿ç”¨-ioc-å®¹å™¨åˆ›å»º-beanbean-æ ‡ç­¾">ä½¿ç”¨ IOC å®¹å™¨åˆ›å»º Beanï¼ˆbean æ ‡ç­¾ï¼‰</h2>
<p>åŸºç¡€é…ç½®ï¼š</p>
<ol>
<li>
<p>åˆ›å»ºMavené¡¹ç›®ï¼Œé¡¹ç›®åŸºç¡€ç»“æ„å¦‚ä¸‹ï¼š</p>
<ul>
<li>ğŸ“<code>project-file-name</code>
<ul>
<li>ğŸ“<code>src</code>
<ul>
<li>ğŸ“<code>main</code>
<ul>
<li>ğŸ“<code>java</code>
<ul>
<li>ğŸ“<code>com.linner</code>
<ul>
<li>ğŸ“<code>dao</code></li>
<li>ğŸ“<code>domain</code></li>
<li>ğŸ“<code>service</code></li>
</ul>
</li>
</ul>
</li>
<li>ğŸ“<code>resourcs</code></li>
</ul>
</li>
<li>ğŸ“<code>test</code>
<ul>
<li>ğŸ“<code>java</code>
<ul>
<li>ğŸ“<code>com.linner</code>
<ul>
<li>ğŸ“<code>service</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>ğŸ“„<code>pom.xml</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p>æ·»åŠ Spring Frameworkçš„ä¾èµ–jaråŒ…ï¼š</p>
<pre><code class="language-xml">&lt;dependencies&gt;
    &lt;!--...--&gt;
    &lt;!--springframework--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
        &lt;version&gt;5.2.10.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;!--junit--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;junit&lt;/groupId&gt;
        &lt;artifactId&gt;junit&lt;/artifactId&gt;
        &lt;version&gt;4.12&lt;/version&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;!--...--&gt;
&lt;/dependencies&gt;
</code></pre>
</li>
<li>
<p>æ·»åŠ ä¸šåŠ¡å±‚ã€æ•°æ®å±‚ç±»ï¼š</p>
<ul>
<li>
<p><code>User.java</code>:</p>
<pre><code class="language-java">package com.linner.domain;

public class User {
    Integer id;
    String username;
    String password;

    public Integer getId() {
        return id;
    }

    public void setId(Integer id) {
        this.id = id;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    @Override
    public String toString() {
        return &quot;User{&quot; +
                &quot;id=&quot; + id +
                &quot;, username='&quot; + username + '\'' +
                &quot;, password='&quot; + password + '\'' +
                '}';
    }
}
</code></pre>
</li>
<li>
<p>DAO(ä»…æµ‹è¯•ï¼Œæ— éœ€æŸ¥è¯¢æ•°æ®åº“):<br>
æ¥å£ï¼š</p>
<pre><code class="language-java">package com.linner.dao;

import com.linner.domain.User;

import java.util.List;

public interface UserDao {

    List&lt;User&gt; findAll();

    User findById(int id);

    void delete(int id);

    void save(User user);

    void update(User user);
}
</code></pre>
<p>å®ç°ç±»ï¼š</p>
<pre><code class="language-java">package com.linner.dao.impl;

import com.linner.dao.UserDao;
import com.linner.domain.User;

import java.util.List;

public class UserDaoImpl implements UserDao {
    @Override
    public List&lt;User&gt; findAll() {
        System.out.println(&quot;UserDao findAll...&quot;);
        return null;
    }

    @Override
    public User findById(int id) {
        System.out.println(&quot;UserDao findById:&quot; + id);
        return null;
    }

    @Override
    public void delete(int id) {
        System.out.println(&quot;UserDao delete:&quot; + id);
    }

    @Override
    public void save(User user) {
        System.out.println(&quot;UserDao save:&quot; + user);
    }

    @Override
    public void update(User user) {
        System.out.println(&quot;UserDao update:&quot; + user);
    }
}
</code></pre>
</li>
<li>
<p>Service:<br>
æ¥å£ï¼š</p>
<pre><code class="language-java">package com.linner.service;

import com.linner.domain.User;

import java.util.List;

public interface UserService {

    List&lt;User&gt; findAll();

    User findById(int id);

    void delete(int id);

    void save(User user);

    void update(User user);
}

</code></pre>
<p>å®ç°ç±»ï¼š</p>
<pre><code class="language-java">package com.linner.service.impl;

import com.linner.dao.UserDao;
import com.linner.dao.impl.UserDaoImpl;
import com.linner.domain.User;
import com.linner.service.UserService;

import java.util.List;

public class UserServiceImpl implements UserService {
    private UserDao userDao = new UserDaoImpl();

    @Override
    public List&lt;User&gt; findAll() {
        System.out.println(&quot;UserService findAll...&quot;);
        userDao.findAll();
        return null;
    }

    @Override
    public User findById(int id) {
        System.out.println(&quot;UserService findById:&quot; + id);
        userDao.findById(id);
        return null;
    }

    @Override
    public void delete(int id) {
        System.out.println(&quot;UserService delete:&quot; + id);
        userDao.delete(id);
    }

    @Override
    public void save(User user) {
        System.out.println(&quot;UserService save:&quot; + user);
        userDao.save(user);
    }

    @Override
    public void update(User user) {
        System.out.println(&quot;UserService update:&quot; + user);
        userDao.update(user);
    }
}
</code></pre>
</li>
</ul>
</li>
</ol>
<ul>
<li>
<p>æµ‹è¯•æ–¹æ³•ï¼š</p>
<pre><code class="language-java">package com.linner.service;

import com.linner.domain.User;
import com.linner.service.UserService;
import com.linner.service.impl.UserServiceImpl;
import org.junit.Test;

import java.util.List;

public class UserServiceTest {
    private UserService userService = new UserServiceImpl();

    @Test
    public void testFindAll() {
        userService.findAll();
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testFindById() {
        int id = 12;
        userService.findById(id);
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testDelete() {
        int id = 12;
        userService.delete(id);
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testSave() {
        User user = new User();
        user.setId(12);
        user.setUsername(&quot;abc&quot;);
        user.setPassword(&quot;abc123&quot;);
        userService.save(user);
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testUpdate() {
        User user = new User();
        user.setId(12);
        user.setUsername(&quot;abc&quot;);
        user.setPassword(&quot;abc123&quot;);
        userService.update(user);
        System.out.println(&quot;------------&quot;);
    }
}
</code></pre>
</li>
</ul>
<p>åˆ›å»ºBean</p>
<ul>
<li>
<p>åœ¨ğŸ“<code>resourcs</code>ç›®å½•ä¸‹åˆ›å»ºStringé…ç½®æ–‡ä»¶<code>applicationContext.xml</code>ï¼Œå¹¶ä½¿ç”¨<code>&lt;bean&gt;</code>æ ‡ç­¾é…ç½®Beanï¼š</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd&quot;&gt;

    &lt;!--æ·»åŠ UserService--&gt;
    &lt;bean id=&quot;userService&quot; class=&quot;com.linner.service.impl.UserServiceImpl&quot;/&gt;
&lt;/beans&gt;
</code></pre>
</li>
<li>
<p>æ¥ç€åœ¨ç¨‹åºä¸­ä½¿ç”¨Springæä¾›çš„æ–¹æ³•è·å–IOCå®¹å™¨ã€‚ç„¶åä»IOCå®¹å™¨ä¸­è·å–å¯¹è±¡å¹¶è°ƒç”¨å…¶æ–¹æ³•ï¼Œä¿®æ”¹Testç±»è¿›è¡Œæµ‹è¯•ï¼š</p>
<pre><code class="language-java">public class UserServiceTest {

    // private UserService userService = new UserServiceImpl();

    // ä½¿ç”¨IOCæ— éœ€è‡ªå·±åˆ›å»ºå¯¹è±¡ï¼ˆå¯¹è±¡ç”±IOCå®¹å™¨åˆ†é…
    private static UserService userService;
    // è¿™é‡Œä½¿ç”¨é™æ€ä»£ç å—è·å–å®¹å™¨å’ŒBean
    static {
        // è·å–IOCå®¹å™¨
        ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
        userService = (UserService) ctx.getBean(&quot;userService&quot;);
    }

    // ...
}
</code></pre>
<p>IOCæ ¸å¿ƒå®¹å™¨åˆ›å»ºæ–¹å¼æœ‰ï¼š</p>
<ul>
<li>
<p><code>ClassPathXmlApplicationContext</code>ï¼šç±»è·¯å¾„ä¸‹çš„XMLé…ç½®æ–‡ä»¶ã€‚</p>
<pre><code class="language-java">ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
</code></pre>
<p><code>ClassPathXmlApplicationContext</code>çš„å‚æ•°ä¸ºXMLé…ç½®æ–‡ä»¶åœ¨ç±»è·¯å¾„ä¸‹çš„ç›¸å¯¹è·¯å¾„ã€‚</p>
</li>
<li>
<p><code>FileSystemXmlApplicationContext</code>ï¼š</p>
<pre><code class="language-java">ApplicationContext ctx = new FileSystemXmlApplicationContext(&quot;/home/linner/IdeaProjects/my-springfw-demo/src/main/resources/applicationContext.xml&quot;);
</code></pre>
<p><code>FileSystemXmlApplicationContext</code>çš„å‚æ•°ä¸ºXMLé…ç½®æ–‡ä»¶åœ¨æ–‡ä»¶ç³»ç»Ÿä¸‹çš„ç»å¯¹è·¯å¾„ã€‚</p>
</li>
</ul>
</li>
</ul>
<p><code>UserServiceTest</code>æ‰§è¡ŒæˆåŠŸè¯´æ˜é…ç½®æˆåŠŸã€‚</p>
<h3 id="bean-çš„åŸºç¡€é…ç½®">Bean çš„åŸºç¡€é…ç½®</h3>
<p><code>&lt;bean&gt;</code>æ ‡ç­¾æ˜¯ä½œä¸ºSpringé…ç½®Beanä½¿ç”¨ã€‚å…¶åŸºæœ¬å½¢å¼ä¸ºï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;&quot; class=&quot;&quot;/&gt;
</code></pre>
<ul>
<li><code>id</code>ï¼šBeanæ ‡ç­¾çš„å”¯ä¸€æ ‡è¯†ã€‚åœ¨åŒä¸€ä¸ªä¸Šä¸‹æ–‡ä¸­(é…ç½®æ–‡ä»¶)ä¸èƒ½é‡å¤ã€‚</li>
<li><code>class</code>ï¼šBeançš„ç±»å‹ã€‚åŒ…å«åŒ…åå’Œç±»åã€‚</li>
</ul>
<h3 id="åˆ«åname-å±æ€§">åˆ«åï¼ˆname å±æ€§ï¼‰</h3>
<p><code>&lt;bean&gt;</code>çš„<code>name</code>å±æ€§å¯ä»¥ä¸º<code>&lt;bean&gt;</code>æŒ‡å®šåˆ«åï¼Œåˆ«åå¯ä»¥æœ‰å¤šä¸ªï¼Œä½¿ç”¨<code>,</code>ï¼Œ<code>;</code>ï¼Œç©ºæ ¼è¿›è¡Œåˆ†éš”ã€‚å¦‚ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userService&quot; name=&quot;service userEbi&quot; class=&quot;com.linner.service.impl.UserServiceImpl&quot;/&gt;
</code></pre>
<blockquote>
<p>è¯´æ˜ï¼šEBIå…¨ç§°Enterprise Business Interfaceï¼Œè¯‘ä¸ºä¼ä¸šä¸šåŠ¡æ¥å£ã€‚</p>
</blockquote>
<h3 id="è·å–-bean-çš„æ–¹å¼getbean-æ–¹æ³•">è·å– Bean çš„æ–¹å¼ï¼ˆgetBean() æ–¹æ³•ï¼‰</h3>
<p>ä½¿ç”¨<code>getBean()</code>è·å–Beançš„æ–¹å¼æœ‰ä¸‰ç§ï¼š</p>
<ul>
<li>
<p>æŒ‰ç…§åç§°è·å–ï¼š<br>
æ˜¯æŒ‡åœ¨<code>getBean()</code>æ–¹æ³•ä¸­ä¼ é€’<code>String</code>ç±»å‹çš„å‚æ•°ï¼Œå‚æ•°çš„å€¼ä¸ºBeançš„åç§°ã€‚</p>
<pre><code class="language-java">Object getBean(String s)
</code></pre>
</li>
<li>
<p>æŒ‰ç…§ç±»å‹è·å–ï¼š<br>
éœ€è¦ä¿è¯è¯¥ç±»å‹åœ¨IOCå®¹å™¨ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªBeanï¼ˆä¸èƒ½åŒ…å«å¤šä¸ªåŒç±»å‹çš„Beanï¼‰ã€‚<br>
åœ¨å‚æ•°ä¸­ä¼ é€’è¯¥ç±»å‹çš„<code>class</code>ã€‚</p>
<pre><code class="language-java">&lt;T&gt; T getBean(Class&lt;T&gt; aClass)
</code></pre>
</li>
<li>
<p>æŒ‰ç…§åç§°å’Œç±»å‹è·å–ï¼š<br>
åœ¨å‚æ•°ä¸­ä¼ å…¥Beançš„åç§°å’Œç±»å‹ã€‚</p>
<pre><code class="language-java"> &lt;T&gt; T getBean(String s, Class&lt;T&gt; aClass)
</code></pre>
</li>
</ul>
<h3 id="ä½œç”¨èŒƒå›´scope-å±æ€§">ä½œç”¨èŒƒå›´ï¼ˆscope å±æ€§ï¼‰</h3>
<p><code>&lt;bean&gt;</code>çš„<code>scope</code>å±æ€§å¯ä»¥ä¸º<code>&lt;bean&gt;</code>è®¾ç½®ä½œç”¨èŒƒå›´ï¼Œå¯é€‰å€¼ä¸ºï¼š</p>
<ul>
<li>
<p><code>singloton</code>ï¼šé»˜è®¤ï¼Œè¡¨ç¤ºåˆ›å»ºçš„å¯¹è±¡ä¸ºå•ä¾‹ï¼ˆåœ¨æ•´ä¸ªIOCå®¹å™¨ä¸­æ‰€æœ‰è·å–åˆ°çš„è¯¥å¯¹è±¡éƒ½ä¸ºåŒä¸€ä¸ªå¯¹è±¡ï¼‰ã€‚å¦‚ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userService&quot; class=&quot;com.linner.service.impl.UserServiceImpl&quot; scope=&quot;singloton&quot;/&gt;
</code></pre>
<p>æˆ–ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userService&quot; class=&quot;com.linner.service.impl.UserServiceImpl&quot; /&gt;
</code></pre>
<blockquote>
<p>å®é™…ä¸Šï¼Œå•ä¾‹å¯¹è±¡åœ¨å®¹å™¨è¢«è·å–çš„æ—¶å€™å°±å·²ç»è¢«åˆ›å»ºäº†ã€‚</p>
</blockquote>
</li>
<li>
<p><code>prototype</code>ï¼šè¡¨ç¤ºåˆ›å»ºçš„å¯¹è±¡ä¸ºéå•ä¾‹ï¼ˆæ¯æ¬¡åœ¨IOCå®¹å™¨ä¸­è·å–åˆ°çš„å¯¹è±¡éƒ½æ˜¯ä¸åŒçš„å¯¹è±¡ï¼‰ã€‚å¦‚ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userService&quot; name=&quot;service userEbi&quot; class=&quot;com.linner.service.impl.UserServiceImpl&quot; scope=&quot;prototype&quot;/&gt;
</code></pre>
</li>
</ul>
<p>Exampleï¼š</p>
<ul>
<li>
<p>å°†<code>UserService</code>è®¾ä¸ºå•ä¾‹ï¼š<br>
Stringé…ç½®æ–‡ä»¶<code>applicationContext.xml</code>ä¸­<code>userService</code>çš„<code>&lt;bean&gt;</code>ï¼ˆç”±äºSpringé»˜è®¤åˆ›å»ºçš„æ˜¯å•ä¾‹ï¼Œæ‰€ä»¥è¿™é‡Œå¯ä»¥é€‰æ‹©ä¸æ·»åŠ <code>scope=&quot;singloton&quot;</code>ï¼‰ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userService&quot; class=&quot;com.linner.service.impl.UserServiceImpl&quot;&gt;
&lt;/bean&gt;
</code></pre>
<p>åˆ›å»ºæ–°çš„æµ‹è¯•ç±»<code>TestForUserServiceScope</code>ï¼š</p>
<pre><code class="language-java">package com.linner.service;

import com.linner.domain.User;
import org.junit.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class TestForUserServiceScope {
    private static ApplicationContext ctx;
    static {
        ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
    }

    @Test
    public void testFindAll() {
        UserService userService = (UserService) ctx.getBean(&quot;userService&quot;);
        System.out.println(userService);
        userService.findAll();
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testFindById() {
        UserService userService = (UserService) ctx.getBean(&quot;userService&quot;);
        System.out.println(userService);
        int id = 12;
        userService.findById(id);
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testDelete() {
        UserService userService = (UserService) ctx.getBean(&quot;userService&quot;);
        System.out.println(userService);
        int id = 12;
        userService.delete(id);
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testSave() {
        UserService userService = (UserService) ctx.getBean(&quot;userService&quot;);
        System.out.println(userService);
        User user = new User();
        user.setId(12);
        user.setUsername(&quot;abc&quot;);
        user.setPassword(&quot;abc123&quot;);
        userService.save(user);
        System.out.println(&quot;------------&quot;);
    }

    public void testUpdate() {
        UserService userService = (UserService) ctx.getBean(&quot;userService&quot;);
        System.out.println(userService);
        User user = new User();
        user.setId(12);
        user.setUsername(&quot;abc&quot;);
        user.setPassword(&quot;abc123&quot;);
        userService.update(user);
        System.out.println(&quot;------------&quot;);
    }
}
</code></pre>
<p>æ‰§è¡Œ<code>UserServiceTest1</code>åï¼Œåœ¨è¾“å‡ºä¸­å¯ä»¥å‘ç°ï¼šæ¯ä¸ªæµ‹è¯•æ–¹æ³•ä¸­ä½¿ç”¨<code>getBean()</code>è·å–åˆ°çš„<code>UserService</code>éƒ½æ˜¯åŒä¸ªå¯¹è±¡ã€‚</p>
</li>
<li>
<p>å°†<code>UserService</code>è®¾ä¸ºéå•ä¾‹ï¼š<br>
ä¿®æ”¹Stringé…ç½®æ–‡ä»¶<code>applicationContext.xml</code>ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userService&quot; class=&quot;com.linner.service.impl.UserServiceImpl&quot; scope=&quot;prototype&quot;&gt;
</code></pre>
<p>å†æ¬¡æ‰§è¡Œ<code>UserServiceTest1</code>ï¼Œå¯ä»¥å‘ç°ï¼šæ¯ä¸ªæµ‹è¯•æ–¹æ³•ä¸­ä½¿ç”¨<code>getBean()</code>è·å–åˆ°çš„<code>UserService</code>éƒ½æ˜¯ä¸åŒçš„å¯¹è±¡ã€‚</p>
</li>
</ul>
<h3 id="bean-çš„å®ä¾‹åŒ–">Bean çš„å®ä¾‹åŒ–</h3>
<p>å®ä¾‹åŒ–Beanåˆ†ä¸ºä¸‰ç§æ–¹å¼ï¼š</p>
<ul>
<li>æ„é€ æ–¹æ³•</li>
<li>é™æ€å·¥å‚</li>
<li>å®ä¾‹å·¥å‚</li>
</ul>
<h4 id="æ„é€ æ–¹æ³•å®ä¾‹åŒ–-beané»˜è®¤">æ„é€ æ–¹æ³•å®ä¾‹åŒ– Beanï¼ˆé»˜è®¤ï¼‰</h4>
<p><code>&lt;bean&gt;</code>é»˜è®¤æ˜¯ä½¿ç”¨æ— å‚çš„æ„é€ æ–¹æ³•å®ä¾‹åŒ–Beanã€‚å¹¶ä¸”ï¼ŒSpringåº•å±‚ç”¨çš„æ˜¯åå°„ï¼ˆå› ä¸ºå³ä½¿å°†æ„é€ æ–¹æ³•è®¾ç½®ä¸º<code>private</code>ä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼‰ã€‚</p>
<h4 id="é™æ€å·¥å‚å®ä¾‹åŒ–-beanfactory-method-å±æ€§">é™æ€å·¥å‚å®ä¾‹åŒ– Beanï¼ˆfactory-method å±æ€§ï¼‰</h4>
<p>é™æ€å·¥å‚å®ä¾‹åŒ–BeanæŒ‡çš„æ˜¯é€šè¿‡å·¥å‚ç±»æ¥åˆ›å»ºå¯¹è±¡ã€‚</p>
<p>ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•é™æ€å·¥å‚å®ä¾‹åŒ–å¯¹è±¡ï¼š</p>
<ul>
<li>
<p>åˆ›å»º<code>com.linner.factory</code>åŒ…ï¼Œå¹¶ç¼–å†™<code>UserDaoFactory</code>ï¼š</p>
<pre><code class="language-java">package com.linner.factory;

import com.linner.dao.UserDao;
import com.linner.dao.impl.UserDaoImpl;

public class UserDaoFactory {
    public static UserDao getUserDao() {
        return new UserDaoImpl();
    }
}
</code></pre>
</li>
<li>
<p>ç¼–å†™<code>TestFroInstanceUserDao</code>æµ‹è¯•ç±»ï¼š</p>
<pre><code class="language-java">package com.linner.dao;

import com.linner.domain.User;
import com.linner.factory.UserDaoFactory;
import org.junit.Test;

public class TestFroInstanceUserDao {
    private UserDao userDao = UserDaoFactory.getUserDao();

    @Test
    public void testFindAll() {
        userDao.findAll();
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testFindById() {
        int id = 12;
        userDao.findById(id);
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testDelete() {
        int id = 12;
        userDao.delete(id);
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testSave() {
        User user = new User();
        user.setId(12);
        user.setUsername(&quot;abc&quot;);
        user.setPassword(&quot;abc123&quot;);
        userDao.save(user);
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testUpdate() {
        User user = new User();
        user.setId(12);
        user.setUsername(&quot;abc&quot;);
        user.setPassword(&quot;abc123&quot;);
        userDao.update(user);
        System.out.println(&quot;------------&quot;);
    }
}
</code></pre>
</li>
</ul>
<p>åœ¨IOCå®¹å™¨ä¸­ä½¿ç”¨é™æ€å·¥å‚å®ä¾‹åŒ–ï¼š</p>
<ul>
<li>
<p>åœ¨Springé…ç½®æ–‡ä»¶ä¸­åŠ å…¥<code>UserDao</code>çš„é…ç½®ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userDao&quot; class=&quot;com.linner.factory.UserDaoFactory&quot; factory-method=&quot;getUserDao&quot;/&gt;
</code></pre>
<ul>
<li><code>class</code>ï¼šå·¥å‚ç±»çš„ç±»å…¨åã€‚è¿™é‡ŒæŒ‡å®šçš„æ˜¯åˆ›å»º<code>UserDao</code>çš„é™æ€å·¥å‚ç±»<code>UserDaoFactory</code>ã€‚</li>
<li><code>factory-method</code>ï¼š<code>class</code>æŒ‡å®šçš„å·¥å‚ç±»ä¸­åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•åã€‚è¿™é‡ŒæŒ‡å®šçš„æ˜¯å·¥å‚ç±»ä¸­ç”¨æ¥åˆ›å»º<code>UserDao</code>çš„æ–¹æ³•ã€‚</li>
</ul>
</li>
<li>
<p>ä¿®æ”¹<code>TestFroInstanceUserDao</code>ï¼š</p>
<pre><code class="language-java">import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class TestFroInstanceUserDao {
    private static UserDao userDao;
    static {
        ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
        userDao = (UserDao) ctx.getBean(&quot;userDao&quot;);
    }
    // ...
}
</code></pre>
</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼šä½¿ç”¨è¿™ç§æ–¹æ³•å®ä¾‹åŒ–ï¼Œä¸èƒ½å°†è¯¥Beanæ³¨å…¥åˆ°å…¶ä»–Beanä¸­ã€‚</p>
</blockquote>
<h4 id="å®ä¾‹å·¥å‚å®ä¾‹åŒ–-bean">å®ä¾‹å·¥å‚å®ä¾‹åŒ– Bean</h4>
<h5 id="ä½¿ç”¨-bean-çš„-factory-bean-å±æ€§">ä½¿ç”¨ Bean çš„ factory-bean å±æ€§</h5>
<p>å®ä¾‹åŒ–å·¥å‚å®ä¾‹åŒ–Beanæ˜¯æŒ‡ï¼Œä¸ºå·¥å‚ç±»æ·»åŠ ä¸€ä¸ªå•ä¾‹çš„Beanï¼ˆä¸ºåŒºåˆ†åˆ™ç§°ä¸ºå·¥å‚Beanï¼‰ï¼Œç„¶ååœ¨è¦å®ä¾‹åŒ–çš„Beanä¸­æŒ‡å®šä½¿ç”¨è¿™ä¸ªå·¥å‚Beanä½œä¸ºå®ä¾‹åŒ–å·¥å‚ã€‚</p>
<p>ä¿®æ”¹<code>UserDaoFactory</code>ï¼ˆä¸ä½¿ç”¨é™æ€å·¥å‚ï¼‰ï¼š</p>
<pre><code class="language-java">public class UserDaoFactory {
    public UserDao getUserDao() {
        return new UserDaoImpl();
    }
}
</code></pre>
<p>åœ¨Springçš„é…ç½®æ–‡ä»¶ä¸­æ·»åŠ <code>UserDaoFactory</code>çš„<code>&lt;bean&gt;</code>ï¼Œå¹¶ä¸”ä¿®æ”¹<code>UserDao</code>çš„<code>&lt;bean&gt;</code>ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userDaoFactory&quot; class=&quot;com.linner.factory.UserDaoFactory&quot;/&gt;
&lt;bean id=&quot;userDao&quot; factory-bean=&quot;userDaoFactory&quot; factory-method=&quot;getUserDao&quot;/&gt;
</code></pre>
<ul>
<li>æ·»åŠ äº†ä¸€ä¸ª<code>userDaoFactory</code>å·¥å‚Beanã€‚</li>
<li><code>factory-bean</code>ï¼šå·¥å‚çš„å®ä¾‹å¯¹è±¡ï¼Œå³å·¥å‚Beançš„<code>id</code>æˆ–<code>name</code>ã€‚</li>
<li><code>factory-method</code>ï¼šå·¥å‚å¯¹è±¡ä¸­å…·ä½“åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•åï¼Œå³<code>factory-bean</code>æŒ‡å®šå¯¹è±¡ä¸­åˆ›å»ºè¯¥å¯¹è±¡çš„æ–¹æ³•åã€‚</li>
</ul>
<p>æˆåŠŸæ‰§è¡Œ<code>TestFroInstanceUserDao</code>å³é…ç½®æˆåŠŸã€‚</p>
<h5 id="ä½¿ç”¨-factorybean-æ¥å£">ä½¿ç”¨ FactoryBean æ¥å£</h5>
<p>åˆ›å»ºä¸€ä¸ª<code>UserDaoFactoryBean</code>çš„ç±»ï¼Œå®ç°<code>FactoryBean</code>æ¥å£ï¼Œé‡å†™æ¥å£çš„æ–¹æ³•ï¼š</p>
<pre><code class="language-java">package com.linner.factory;

import com.linner.dao.UserDao;
import com.linner.dao.impl.UserDaoImpl;
import org.springframework.beans.factory.FactoryBean;

public class UserDaoFactoryBean implements FactoryBean {

    @Override
    public Object getObject() throws Exception {
        return new UserDaoImpl();
    }

    @Override
    public Class&lt;?&gt; getObjectType() {
        return UserDao.class;
    }

    @Override
    public boolean isSingleton() {
        return true;
    }
}
</code></pre>
<ul>
<li><code>getObject()</code>ï¼šåˆ›å»ºå®ä¾‹åŒ–å¯¹è±¡å¹¶è¿”å›ã€‚ä»£æ›¿åŸå§‹å®ä¾‹å·¥å‚ä¸­åˆ›å»ºå¯¹è±¡çš„æ–¹æ³•ã€‚</li>
<li><code>getObjectType()</code>ï¼šè¿”å›æ‰€åˆ›å»ºç±»çš„Classå¯¹è±¡ã€‚</li>
<li><code>isSingleton()</code>ï¼šè®¾ç½®å¯¹è±¡æ˜¯å¦ä¸ºå•ä¾‹ã€‚é»˜è®¤<code>true</code>ï¼Œå¯ä»¥ä¸é‡å†™ã€‚</li>
</ul>
<p>ä¿®æ”¹Springé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userDao&quot; class=&quot;com.linner.factory.UserDaoFactoryBean&quot;/&gt;
</code></pre>
<p>æˆåŠŸæ‰§è¡Œ<code>TestFroInstanceUserDao</code>å³é…ç½®æˆåŠŸã€‚</p>
<h3 id="bean-çš„ç”Ÿå‘½å‘¨æœŸ">Bean çš„ç”Ÿå‘½å‘¨æœŸ</h3>
<p>Beançš„ç”Ÿå‘½å‘¨æœŸæ˜¯æŒ‡Beanå¯¹è±¡ä»åˆ›å»ºåˆ°é”€æ¯çš„æ•´ä¸ªè¿‡ç¨‹ã€‚å¯¹Beançš„ç”Ÿå‘½å‘¨æœŸè¿›è¡Œæ§åˆ¶ï¼Œå¯ä»¥åœ¨Beanåˆ›å»ºåï¼ˆå¦‚åŠ è½½åˆå§‹åŒ–éœ€è¦ç”¨åˆ°èµ„æºï¼‰è¿˜æœ‰é”€æ¯å‰ï¼ˆå¦‚é‡Šæ”¾èµ„æºï¼‰æ‰§è¡Œä¸€äº›æ“ä½œã€‚</p>
<h4 id="init-method-å’Œ-destroy-method-å±æ€§">init-method å’Œ destroy-method å±æ€§</h4>
<p>Springæ§åˆ¶ç”Ÿå‘½å‘¨æœŸçš„ç¬¬ä¸€ä¸ªæ–¹æ³•ä¾¿æ˜¯ä½¿ç”¨Springé…ç½®æ–‡ä»¶ä¸­<code>&lt;bean&gt;</code>çš„ <code>init-method</code> å’Œ <code>destroy-method</code> å±æ€§ã€‚</p>
<p>åœ¨<code>UserDaoImpl</code>ä¸­åˆ›å»ºåˆå§‹åŒ–æ–¹æ³•å’Œé”€æ¯æ–¹æ³•ï¼ˆæ–¹æ³•åä»»æ„ï¼‰ï¼š</p>
<pre><code class="language-java">public class UserDaoImpl implements UserDao {

    /**
     * åˆå§‹åŒ–æ–¹æ³•
     */
    public void init() {
        System.out.println(&quot;UserDao init...&quot;);
    }

    /**
     * é”€æ¯æ–¹æ³•
     */
    public void destroy() {
        System.out.println(&quot;UserDao destroy...&quot;);
    }

    // ...
}
</code></pre>
<p>ä¿®æ”¹Springé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userDao&quot; class=&quot;com.linner.dao.impl.UserDaoImpl&quot; init-method=&quot;init&quot; destroy-method=&quot;destroy&quot;/&gt;
</code></pre>
<ul>
<li><code>init-method</code>ï¼š<code>class</code>æŒ‡å®šçš„ç±»ä¸­çš„åˆå§‹åŒ–æ–¹æ³•ï¼Œåœ¨åˆ›å»ºBeanå¯¹è±¡åæ‰§è¡Œã€‚</li>
<li><code>destroy-method</code>ï¼š<code>class</code>æŒ‡å®šçš„ç±»ä¸­çš„é”€æ¯æ–¹æ³•ï¼Œåœ¨é”€æ¯Beanå‰æ‰§è¡Œã€‚</li>
</ul>
<p>ç¼–å†™<code>TestForLifeCycle</code>æµ‹è¯•ç±»ï¼š</p>
<pre><code class="language-java">package com.linner;

import com.linner.dao.UserDao;
import org.junit.Test;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class TestForLifeCycle {
    @Test
    public void testForLifeCycle() {
        ClassPathXmlApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
        UserDao userDao = (UserDao) ctx.getBean(&quot;userDao&quot;);
        userDao.findAll();
        ctx.close();
    }
}
</code></pre>
<p>å¯¹æ¯”ä¹‹å‰çš„<code>ctx</code>å¯¹è±¡ï¼Œè¿™é‡Œ<code>ctx</code>å¯¹è±¡ä½¿ç”¨çš„ç±»å‹ä»<code>ApplicationContext</code>å˜æˆäº†<code>ClassPathXmlApplicationContext</code>ã€‚è¿™æ˜¯å› ä¸º<code>ApplicationContext</code>ä¸­å¹¶æ²¡æœ‰<code>close()</code>æ–¹æ³•ã€‚è€Œæƒ³è¦æ‰§è¡ŒBeanå¯¹è±¡ä¸­çš„<code>destroy()</code>ï¼Œå°±å¿…é¡»åœ¨ç¨‹åºé€€å‡ºå‰å…³é—­IOCå®¹å™¨ï¼ˆè°ƒç”¨<code>ctx.close()</code>ï¼‰ã€‚</p>
<h4 id="æ³¨å†Œé’©å­å…³é—­å®¹å™¨">æ³¨å†Œé’©å­å…³é—­å®¹å™¨</h4>
<p>åœ¨å®¹å™¨æœªå…³é—­ä¹‹å‰ï¼Œæå‰è®¾ç½®å¥½å›è°ƒå‡½æ•°ï¼Œè®©JVMåœ¨é€€å‡ºä¹‹å‰å›è°ƒæ­¤å‡½æ•°æ¥å…³é—­å®¹å™¨ã€‚</p>
<p>ä¿®æ”¹<code>TestForLifeCycle</code>ï¼š</p>
<pre><code class="language-java">public class TestForLifeCycle {
    @Test
    public void testForLifeCycle() {
        ClassPathXmlApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
        ctx.registerShutdownHook();
        UserDao userDao = (UserDao) ctx.getBean(&quot;userDao&quot;);
        userDao.findAll();
    }
}
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼š<code>ApplicationContext</code>ä¸­ä¹Ÿæ²¡æœ‰<code>registerShutdownHook()</code>ã€‚æ‰€ä»¥è¿™é‡Œä½¿ç”¨çš„æ˜¯<code>ClassPathXmlApplicationC</code>å¯¹è±¡ã€‚</p>
</blockquote>
<h4 id="initializingbean-å’Œ-disposablebean-æ¥å£">InitializingBean å’Œ DisposableBean æ¥å£</h4>
<p>Spring æä¾›äº†<code>InitializingBean</code>å’Œ<code>DisposableBean</code>æ¥å£ä»¥æ›´åŠ æ–¹ä¾¿åœ°æ§åˆ¶Beanç”Ÿå‘½å‘¨æœŸã€‚ä½¿ç”¨è¿™ä¸¤ä¸ªæ¥å£åˆ™æ— éœ€é€šè¿‡Spingé…ç½®æ–‡ä»¶ä¸­çš„<code>init-method</code>å’Œ<code>destroy-method</code> å±æ€§æ¥æ§åˆ¶ç”Ÿå‘½å‘¨æœŸã€‚</p>
<p>å®ç°<code>InitializingBean</code>æ¥å£çš„<code>afterPropertiesSet()</code>æ–¹æ³•å’Œ<code>DisposableBean</code>æ¥å£çš„<code>destroy()</code>æ–¹æ³•ï¼š</p>
<pre><code class="language-java">import org.springframework.beans.factory.DisposableBean;
import org.springframework.beans.factory.InitializingBean;

public class UserDaoImpl implements UserDao, InitializingBean, DisposableBean {

    /**
     * InitializingBeanæ¥å£çš„åˆå§‹åŒ–æ–¹æ³•
     */
    @Override
    public void afterPropertiesSet() throws Exception {
        System.out.println(&quot;UserDao init by afterPropertiesSet()...&quot;);
    }

    /**
     * DisposableBeanæ¥å£çš„é”€æ¯æ–¹æ³•
     */
    @Override
    public void destroy() {
        System.out.println(&quot;UserDao destroyed by destroy()...&quot;);
    }

    // ...
}
</code></pre>
<p>åœ¨Springé…ç½®æ–‡ä»¶ä¸­åˆ é™¤<code>init-method</code>å’Œ<code>destroy-method</code>å±æ€§ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userDao&quot; class=&quot;com.linner.dao.impl.UserDaoImpl&quot;/&gt;
</code></pre>
<h3 id="ä½¿ç”¨-bean-æ ‡ç­¾çš„æ³¨æ„äº‹é¡¹">ä½¿ç”¨ Bean æ ‡ç­¾çš„æ³¨æ„äº‹é¡¹</h3>
<ul>
<li><code>class</code>å±æ€§ä¸èƒ½ä½¿ç”¨æ¥å£ã€‚å› ä¸ºæ¥å£ä¸èƒ½åˆ›å»ºå¯¹è±¡ã€‚</li>
<li>è·å–Beanæ— è®ºæ˜¯é€šè¿‡<code>id</code>è¿˜æ˜¯<code>name</code>è·å–ï¼Œå¦‚æœæ— æ³•è·å–åˆ°ï¼Œå°†æŠ›å‡ºå¼‚å¸¸<code>NoSuchBeanDefinitionException</code>ã€‚</li>
<li>Beané»˜è®¤ä¸ºå•ä¾‹ï¼Œé¿å…äº†å¯¹è±¡çš„é¢‘ç¹åˆ›å»ºä¸é”€æ¯ï¼Œè¾¾åˆ°äº†å¯¹Beanå¯¹è±¡çš„å¤ç”¨ï¼Œæ€§èƒ½é«˜ã€‚</li>
<li>å¦‚æœå¯¹è±¡æ˜¯æœ‰çŠ¶æ€å¯¹è±¡ï¼ˆå³è¯¥å¯¹è±¡æœ‰æˆå‘˜å˜é‡å¯ä»¥ç”¨æ¥å­˜å‚¨æ•°æ®ï¼‰ã€‚å› ä¸ºæ‰€æœ‰è¯·æ±‚çº¿ç¨‹å…±ç”¨ä¸€ä¸ªBeanå¯¹è±¡ï¼Œæ‰€ä»¥ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</li>
<li>å¦‚æœå¯¹è±¡æ˜¯æ— çŠ¶æ€å¯¹è±¡ï¼ˆå³è¯¥å¯¹è±¡æ²¡æœ‰æˆå‘˜å˜é‡æ²¡æœ‰è¿›è¡Œæ•°æ®å­˜å‚¨ï¼‰ã€‚å› æ–¹æ³•ä¸­çš„å±€éƒ¨å˜é‡åœ¨æ–¹æ³•è°ƒç”¨å®Œæˆåä¼šè¢«é”€æ¯ï¼Œæ‰€ä»¥ä¸ä¼šå­˜åœ¨çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</li>
<li>é€‚åˆäº¤ç»™å®¹å™¨è¿›è¡Œç®¡ç†çš„Beanå¯¹è±¡ï¼š
<ul>
<li>è¡¨ç°å±‚å¯¹è±¡</li>
<li>ä¸šåŠ¡å±‚å¯¹è±¡</li>
<li>æ•°æ®å±‚å¯¹è±¡</li>
<li>å·¥å…·å¯¹è±¡</li>
</ul>
</li>
<li>ä¸é€‚åˆäº¤ç»™å®¹å™¨è¿›è¡Œç®¡ç†çš„Beanå¯¹è±¡ï¼š<br>
å°è£…å®ä¾‹çš„åŸŸå¯¹è±¡ã€‚ä¼šå¼•å‘çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚</li>
</ul>
<h2 id="di-ä¾èµ–æ³¨å…¥">DI ä¾èµ–æ³¨å…¥</h2>
<p>ä¸Šé¢çš„ç¨‹åºï¼Œåœ¨<code>UserServiceImpl</code>ä¸­ä¾ç„¶éœ€è¦æ‰‹åŠ¨åˆ›å»ºå¯¹è±¡ï¼š</p>
<pre><code class="language-java">public class UserServiceImpl implements UserService {
    private UserDao userDao = new UserDaoImpl();
    // ...
}
</code></pre>
<p>å½“å‰ä¸šåŠ¡å±‚å’Œæ•°æ®å±‚çš„è€¦åˆæ€§è¿˜æ˜¯å¾ˆé«˜ã€‚æ­¤æ—¶å°±éœ€è¦ä½¿ç”¨ä¾èµ–æ³¨å…¥æ¥é™ä½è€¦åˆæ€§ã€‚</p>
<p>Springä¾èµ–æ³¨å…¥æ”¯æŒ<u>ç®€å•æ•°æ®ç±»å‹</u>ã€<u>å¼•ç”¨æ•°æ®ç±»å‹</u>è¿˜æœ‰<u>é›†åˆæ³¨å…¥</u>ï¼Œå¹¶ä¸”æä¾›äº†ä¸¤ç§æ³¨å…¥æ–¹å¼ï¼š</p>
<ul>
<li>Setteræ³¨å…¥</li>
<li>æ„é€ å™¨æ³¨å…¥</li>
</ul>
<p>åŸºç¡€é…ç½®ï¼š</p>
<ol>
<li>åˆ›å»ºMavené¡¹ç›®ã€‚</li>
<li>æ·»åŠ Spring Frameworkå’ŒJunitçš„ä¾èµ–jaråŒ…ã€‚</li>
<li>æ·»åŠ ä¸šåŠ¡å±‚ã€æ•°æ®å±‚ç±»ï¼š
<ul>
<li><code>User.java</code>: åŒ<a href="#%E4%BD%BF%E7%94%A8-ioc-%E5%AE%B9%E5%99%A8%E5%88%9B%E5%BB%BA-beanbean-%E6%A0%87%E7%AD%BE">ä½¿ç”¨IOCå®¹å™¨åˆ›å»ºBean</a>ä¸­çš„<code>User.java</code>ã€‚</li>
<li>DAO(ä»…æµ‹è¯•ï¼Œæ— éœ€æŸ¥è¯¢æ•°æ®åº“): åŒ<a href="#%E4%BD%BF%E7%94%A8-ioc-%E5%AE%B9%E5%99%A8%E5%88%9B%E5%BB%BA-beanbean-%E6%A0%87%E7%AD%BE">ä½¿ç”¨IOCå®¹å™¨åˆ›å»ºBean</a>ä¸­çš„DAOï¼ˆ<code>UserDao</code>ï¼‰ã€‚</li>
<li>Service: åŒ<a href="#%E4%BD%BF%E7%94%A8-ioc-%E5%AE%B9%E5%99%A8%E5%88%9B%E5%BB%BA-beanbean-%E6%A0%87%E7%AD%BE">ä½¿ç”¨IOCå®¹å™¨åˆ›å»ºBean</a>ä¸­çš„Serviceï¼ˆ<code>UserService</code>ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<ul>
<li>
<p>æµ‹è¯•æ–¹æ³•ï¼š</p>
<pre><code class="language-java">package com.linner.service;

import com.linner.domain.User;
import com.linner.service.UserService;
import com.linner.service.impl.UserServiceImpl;
import org.junit.Test;

import java.util.List;

public class UserServiceTest {
    private static UserService userService;
    static {
        ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
        userService = (UserService) ctx.getBean(&quot;userService&quot;);
    }

    @Test
    public void testFindAll() {
        userService.findAll();
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testFindById() {
        int id = 12;
        userService.findById(id);
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testDelete() {
        int id = 12;
        userService.delete(id);
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testSave() {
        User user = new User();
        user.setId(12);
        user.setUsername(&quot;abc&quot;);
        user.setPassword(&quot;abc123&quot;);
        userService.save(user);
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testUpdate() {
        User user = new User();
        user.setId(12);
        user.setUsername(&quot;abc&quot;);
        user.setPassword(&quot;abc123&quot;);
        userService.update(user);
        System.out.println(&quot;------------&quot;);
    }
}
</code></pre>
</li>
</ul>
<h3 id="setter-æ³¨å…¥property-æ ‡ç­¾">Setter æ³¨å…¥ï¼ˆproperty æ ‡ç­¾ï¼‰</h3>
<p>Setteræ³¨å…¥æ˜¯æŒ‡ï¼Œåœ¨å®ç°ç±»ä¸­ä¸ºéœ€è¦æ³¨å…¥çš„å±æ€§è®¾ç½®Setteræ–¹æ³•ï¼Œè®©Springèƒ½å¤Ÿä½¿ç”¨Setteræ–¹æ³•è‡ªåŠ¨ç»™å±æ€§åˆ›å»ºå¯¹è±¡ã€‚</p>
<h4 id="æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹">æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹</h4>
<p>è¦åœ¨Beanä¸­æ³¨å…¥å¼•ç”¨ç±»å‹å±æ€§ï¼Œæ³¨å…¥çš„å±æ€§å…¶å®ç°ç±»å¿…é¡»å¾—æ˜¯IOCå®¹å™¨ä¸­çš„Beanã€‚</p>
<p>åœ¨<code>UserServiceImpl</code>ä¸­ï¼Œå–æ¶ˆæ‰‹åŠ¨åˆ›å»ºå¯¹è±¡ï¼Œå¹¶ä¸º<code>userDao</code>å±æ€§æä¾›<code>setter</code>æ–¹æ³•ï¼š</p>
<pre><code class="language-java">public class UserServiceImpl implements UserService {
    private UserDao userDao;

    public void setUserDao(UserDao userDao) {
        this.userDao = userDao;
    }
    // ...
}
</code></pre>
<p>ä¿®æ”¹Springé…ç½®æ–‡ä»¶<code>applicationContext.xml</code>ï¼š</p>
<pre><code class="language-xml">&lt;!--...--&gt;
&lt;bean id=&quot;userDao&quot; class=&quot;com.linner.dao.impl.UserDaoImpl&quot;/&gt;
&lt;bean id=&quot;userService&quot; class=&quot;com.linner.service.impl.UserServiceImpl&quot;&gt;
    &lt;property name=&quot;userDao&quot; ref=&quot;userDao&quot;/&gt;
&lt;/bean&gt;
&lt;!--...--&gt;
</code></pre>
<p>ä¸º<code>UserService</code>æ³¨å…¥<code>UserDao</code>è¦åœ¨<code>UserService</code>çš„<code>&lt;bean&gt;</code>æ ‡ç­¾ä¸­ä½¿ç”¨<code>&lt;property&gt;</code>æ ‡ç­¾ã€‚Â·</p>
<p><code>&lt;property&gt;</code>è¡¨ç¤ºé…ç½®å½“å‰<code>&lt;bean&gt;</code>çš„å±æ€§ï¼Œå…¶æ ‡ç­¾å±æ€§æœ‰ï¼š</p>
<ul>
<li><code>name</code>ï¼š<code>&lt;bean&gt;</code>æ‰€æŒ‡çš„å®ç°ç±»çš„å±æ€§åï¼Œè¡¨ç¤ºé…ç½®å“ªä¸€ä¸ªå…·ä½“çš„å±æ€§ã€‚</li>
<li><code>ref</code>ï¼šè¦é…ç½®çš„å±æ€§çš„Beançš„<code>id</code>æˆ–<code>name</code>ï¼Œè¡¨ç¤ºå‚ç…§å“ªä¸€ä¸ª<code>&lt;bean&gt;</code>ï¼ˆè¯¥æ³¨å…¥çš„Beanå¿…é¡»åœ¨å®¹å™¨ä¸­å­˜åœ¨ï¼‰ã€‚</li>
</ul>
<p>æˆåŠŸè¿è¡Œ<code>ServiceBeanTest</code>è¯´æ˜æ³¨å…¥æˆåŠŸã€‚</p>
<p>å¦‚æœè¦æ³¨å…¥å¤šä¸ªå±æ€§ï¼Œåˆ™åœ¨å®ä¾‹ç±»ä¸­åŠ å…¥å¤šä¸ªå±æ€§ï¼Œä¸ºå…¶è®¾ç½®Setterå¹¶åœ¨Beanä¸­é…ç½®å¤šä¸ª<code>&lt;property&gt;</code>å³å¯ã€‚</p>
<h4 id="æ³¨å…¥ç®€å•æ•°æ®ç±»å‹">æ³¨å…¥ç®€å•æ•°æ®ç±»å‹</h4>
<p>åœ¨Beanä¸­æ³¨å…¥ç®€å•ç±»å‹å±æ€§ï¼Œç®€å•æ•°æ®ç±»å‹å¹¶ä¸ç”¨åœ¨é…ç½®æ–‡ä»¶ä¸­ä¸ºç®€å•ç±»å‹æ·»åŠ Beanæ ‡ç­¾é…ç½®ã€‚</p>
<p>ä¸º<code>BookDao</code>æ·»åŠ ç®€å•ç±»å‹å±æ€§ï¼š</p>
<pre><code class="language-java">import org.springframework.beans.factory.InitializingBean;

public class UserDaoImpl implements UserDao, InitializingBean {

    private String databaseName;
    private int connectionNum;

    public void setConnectionNum(int connectionNum) {
        this.connectionNum = connectionNum;
    }

    public void setDatabaseName(String databaseName) {
        this.databaseName = databaseName;
    }

    @Override
    public void afterPropertiesSet() throws Exception {
        System.out.println(&quot;UserDao init: DatabaseName=&quot; + this.databaseName
                        + &quot;, ConnectionNum=&quot; + this.connectionNum);
    }
    // ...
}
</code></pre>
<p>åœ¨Springé…ç½®æ–‡ä»¶ä¸­ä¸º<code>UserDao</code>æ·»åŠ <code>&lt;property&gt;</code>æ ‡ç­¾ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userDao&quot; class=&quot;com.linner.dao.impl.UserDaoImpl&quot;&gt;
    &lt;property name=&quot;databaseName&quot; value=&quot;mysql&quot;/&gt;
    &lt;property name=&quot;connectionNum&quot; value=&quot;10&quot;/&gt;
&lt;/bean&gt;
</code></pre>
<ul>
<li><code>name</code>ï¼šå«ä¹‰ä¸å˜ï¼Œä¸å¼•ç”¨æ³¨å…¥ç±»å‹ç”¨æ³•ä¸­çš„å«ä¹‰ç›¸åŒã€‚</li>
<li><code>value</code>: è¦é…ç½®çš„å±æ€§çš„å€¼ï¼Œå¿…é¡»æ˜¯ç®€å•æ•°æ®ç±»å‹ã€‚å¯¹äºå‚æ•°ç±»å‹ï¼ŒSpringåœ¨æ³¨å…¥çš„æ—¶å€™ä¼šè‡ªåŠ¨è½¬æ¢ï¼Œä½†æ˜¯æœ‰å¯èƒ½ä¼šå‘ç”Ÿè½¬æ¢é”™è¯¯çš„æƒ…å†µã€‚</li>
</ul>
<p>æˆåŠŸè¿è¡Œ<code>ServiceBeanTest</code>è¯´æ˜æ³¨å…¥æˆåŠŸã€‚</p>
<h4 id="é›†åˆæ³¨å…¥">é›†åˆæ³¨å…¥</h4>
<p>ä¿®æ”¹<code>UserDao</code>ï¼Œä¸ºå…¶æ·»åŠ é›†åˆç±»å‹å‚æ•°å’Œå¯¹åº”Setteræ–¹æ³•ï¼š</p>
<pre><code class="language-java">import java.util.*;

public class UserDaoImpl implements UserDao, InitializingBean {

    private int[] array;
    private List&lt;String&gt; list;
    private Set&lt;String&gt; set;
    private Map&lt;String,String&gt; map;
    private Properties properties;

    // ...æ­¤å¤„çœç•¥setteræ–¹æ³•

    @Override
    public void afterPropertiesSet() throws Exception {
        System.out.println(&quot;UserDao init: &quot; +
                        &quot;array=&quot; + Arrays.toString(array) +
                        &quot;, list=&quot; + list +
                        &quot;, set=&quot; + set +
                        &quot;, map=&quot; + map +
                        &quot;, properties=&quot; + properties);
    }
    // ...
}
</code></pre>
<p>ä¿®æ”¹Springé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userDao&quot; class=&quot;com.linner.dao.impl.UserDaoImpl&quot;&gt;
    &lt;property name=&quot;array&quot;&gt;
        &lt;array&gt;
            &lt;value&gt;1&lt;/value&gt;
            &lt;value&gt;2&lt;/value&gt;
            &lt;value&gt;3&lt;/value&gt;
        &lt;/array&gt;
    &lt;/property&gt;
    &lt;property name=&quot;list&quot;&gt;
        &lt;list&gt;
            &lt;value&gt;a&lt;/value&gt;
            &lt;value&gt;b&lt;/value&gt;
            &lt;value&gt;c&lt;/value&gt;
        &lt;/list&gt;
    &lt;/property&gt;
    &lt;property name=&quot;set&quot;&gt;
        &lt;set&gt;
            &lt;value&gt;a&lt;/value&gt;
            &lt;value&gt;a&lt;/value&gt;
            &lt;value&gt;b&lt;/value&gt;
            &lt;value&gt;c&lt;/value&gt;
        &lt;/set&gt;
    &lt;/property&gt;
    &lt;property name=&quot;map&quot;&gt;
        &lt;map&gt;
            &lt;entry key=&quot;a&quot; value=&quot;1&quot;/&gt;
            &lt;entry key=&quot;b&quot; value=&quot;2&quot;/&gt;
            &lt;entry key=&quot;c&quot; value=&quot;3&quot;/&gt;
        &lt;/map&gt;
    &lt;/property&gt;
    &lt;property name=&quot;properties&quot;&gt;
        &lt;props&gt;
            &lt;prop key=&quot;a&quot;&gt;1&lt;/prop&gt;
            &lt;prop key=&quot;b&quot;&gt;2&lt;/prop&gt;
            &lt;prop key=&quot;c&quot;&gt;3&lt;/prop&gt;
        &lt;/props&gt;
    &lt;/property&gt;
&lt;/bean&gt;
</code></pre>
<ul>
<li>
<p><code>&lt;property&gt;</code>ï¼šSetteræ³¨å…¥ä¾ç„¶ä½¿ç”¨è¯¥æ ‡ç­¾ã€‚å…¶<code>name</code>å±æ€§å«ä¹‰ä¸å˜ã€‚<br>
é›†åˆç±»å‹çš„å€¼åœ¨å…¶æ ‡ç­¾ä¸‹å®šä¹‰ã€‚</p>
</li>
<li>
<p><code>&lt;array&gt;</code>ï¼šå®šä¹‰æ•°ç»„ç±»å‹çš„å€¼ã€‚</p>
<ul>
<li>æ•°ç»„å…ƒç´ ä¸­çš„å€¼ä½¿ç”¨<code>&lt;value&gt;</code>æ ‡ç­¾å®šä¹‰ã€‚</li>
<li><code>&lt;value&gt;</code>æ ‡ç­¾ä¸­çš„å€¼è¦ä¸æ•°ç»„çš„ç±»å‹ä¸€è‡´ã€‚<br>
ä¸€èˆ¬å½¢å¼å¦‚ä¸‹ï¼š</li>
</ul>
<pre><code class="language-xml">&lt;property name=&quot;...&quot;&gt;
    &lt;array&gt;
        &lt;value&gt;...&lt;/value&gt;
        &lt;value&gt;...&lt;/value&gt;
        &lt;value&gt;...&lt;/value&gt;
        &lt;!--...--&gt;
    &lt;/array&gt;
&lt;/property&gt;
</code></pre>
</li>
<li>
<p><code>&lt;list&gt;</code>ï¼šå®šä¹‰<code>List</code>ç±»å‹çš„å€¼ã€‚<br>
å…¶ç”¨æ³•ä¸<code>&lt;array&gt;</code>ç±»ä¼¼ã€‚</p>
<pre><code class="language-xml">&lt;property name=&quot;...&quot;&gt;
    &lt;list&gt;
        &lt;value&gt;...&lt;/value&gt;
        &lt;value&gt;...&lt;/value&gt;
        &lt;value&gt;...&lt;/value&gt;
        &lt;!--...--&gt;
    &lt;/list&gt;
&lt;/property&gt;
</code></pre>
</li>
<li>
<p><code>&lt;set&gt;</code>ï¼šå®šä¹‰<code>Set</code>ç±»å‹çš„å€¼ã€‚<br>
å…¶ç”¨æ³•ä¸<code>&lt;array&gt;</code>ç±»ä¼¼ã€‚</p>
<pre><code class="language-xml">&lt;property name=&quot;...&quot;&gt;
    &lt;set&gt;
        &lt;value&gt;...&lt;/value&gt;
        &lt;value&gt;...&lt;/value&gt;
        &lt;value&gt;...&lt;/value&gt;
        &lt;!--...--&gt;
    &lt;/set&gt;
&lt;/property&gt;
</code></pre>
</li>
<li>
<p><code>&lt;map&gt;</code>ï¼šå®šä¹‰<code>Map</code>ç±»å‹çš„å€¼ã€‚</p>
<ul>
<li>å…¶å…ƒç´ ä½¿ç”¨<code>&lt;entry&gt;</code>æ ‡ç­¾å®šä¹‰ã€‚å¹¶ä¸”å…ƒç´ çš„<code>key</code>ä½¿ç”¨<code>key</code>å±æ€§å®šä¹‰ï¼Œå…ƒç´ çš„<code>value</code>ä½¿ç”¨<code>value</code>å±æ€§å®šä¹‰ã€‚</li>
<li><code>key</code>å’Œ<code>value</code>å±æ€§çš„å€¼è¦å’Œ<code>Map</code>çš„ç±»å‹å¯¹åº”ã€‚</li>
</ul>
<pre><code class="language-xml">&lt;property name=&quot;...&quot;&gt;
    &lt;map&gt;
        &lt;entry key=&quot;...&quot; value=&quot;...&quot;/&gt;
        &lt;entry key=&quot;...&quot; value=&quot;...&quot;/&gt;
        &lt;entry key=&quot;...&quot; value=&quot;...&quot;/&gt;
        &lt;!--...--&gt;
    &lt;/map&gt;
&lt;/property&gt;
</code></pre>
</li>
<li>
<p><code>&lt;props&gt;</code>ï¼šå®šä¹‰<code>Properties</code>çš„å€¼ã€‚<br>
å…¶å…ƒç´ ä½¿ç”¨<code>&lt;prop&gt;</code>æ ‡ç­¾å®šä¹‰ã€‚<code>key</code>ä½¿ç”¨<code>key</code>å±æ€§å®šä¹‰ï¼Œ<code>value</code>åœ¨æ ‡ç­¾ä¸­å®šä¹‰ã€‚</p>
<pre><code class="language-xml">&lt;property name=&quot;...&quot;&gt;
    &lt;props&gt;
        &lt;prop key=&quot;...&quot;&gt;...&lt;/prop&gt;
        &lt;prop key=&quot;...&quot;&gt;...&lt;/prop&gt;
        &lt;prop key=&quot;...&quot;&gt;...&lt;/prop&gt;
        &lt;!--...--&gt;
    &lt;/props&gt;
&lt;/property&gt;
</code></pre>
</li>
</ul>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>Listçš„åº•å±‚ä¹Ÿæ˜¯é€šè¿‡æ•°ç»„å®ç°çš„ï¼Œæ‰€ä»¥<code>&lt;list&gt;</code>å’Œ<code>&lt;array&gt;</code>æ ‡ç­¾æ˜¯å¯ä»¥æ··ç”¨ã€‚</li>
<li>é›†åˆä¸­è¦æ·»åŠ å¼•ç”¨ç±»å‹ï¼Œåªéœ€è¦æŠŠ<code>&lt;value&gt;</code>æ ‡ç­¾æ”¹æˆ<code>&lt;ref&gt;</code>æ ‡ç­¾ã€‚</li>
</ul>
</blockquote>
<h3 id="æ„é€ å™¨æ³¨å…¥constructor-arg-æ ‡ç­¾">æ„é€ å™¨æ³¨å…¥ï¼ˆconstructor-arg æ ‡ç­¾ï¼‰</h3>
<p>æ„é€ å™¨æ³¨å…¥æ˜¯æŒ‡Springé€šè¿‡Beançš„å®ä¾‹ç±»ä¸­ï¼Œå¸¦å‚çš„æ„é€ æ–¹æ³•å°†å…¶ä»–Beanè¿›è¡Œæ³¨å…¥ã€‚</p>
<h4 id="æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹-2">æ³¨å…¥å¼•ç”¨æ•°æ®ç±»å‹</h4>
<p>åœ¨<code>UserServices</code>ä¸­åˆ é™¤Setteræ–¹æ³•ï¼ˆæ­¤å¤„åˆ é™¤Setteræ–¹æ³•æ˜¯ä¸ºäº†è¯æ˜ä½¿ç”¨çš„æ˜¯æ„é€ å™¨æ³¨å…¥è€ŒéSetteræ³¨å…¥ï¼‰å¹¶æ·»åŠ å¸¦å‚çš„æ„é€ æ–¹æ³•ï¼š</p>
<pre><code class="language-java">public class UserServiceImpl implements UserService {

    private UserDao userDao;

    public UserServiceImpl(UserDao userDao) {
        this.userDao = userDao;
    }
    // ...
}
</code></pre>
<p>ä¿®æ”¹Springé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userService&quot; class=&quot;com.linner.service.impl.UserServiceImpl&quot;&gt;
    &lt;constructor-arg name=&quot;userDao&quot; ref=&quot;userDao&quot;/&gt;
&lt;/bean&gt;
</code></pre>
<p><code>&lt;constructor-arg&gt;</code>ä¸­<code>name</code>å’Œ<code>ref</code>å±æ€§çš„å«ä¹‰ä¸<code>&lt;property&gt;</code>çš„å«ä¹‰ç±»ä¼¼ã€‚åªä¸è¿‡<code>name</code>å±æ€§æŒ‡çš„æ˜¯Beanå®ä¾‹ç±»å‹ä¸­æ„é€ æ–¹æ³•çš„å‚æ•°åï¼ˆåç§°å¿…é¡»è¦ä¸€è‡´ï¼‰ã€‚</p>
<p>æˆåŠŸè¿è¡Œ<code>ServiceBeanTest</code>è¯´æ˜æ³¨å…¥æˆåŠŸã€‚</p>
<p>å¦‚æœè¦æ³¨å…¥å¤šä¸ªç±»å‹æ•°æ®ï¼Œåˆ™åœ¨æ„é€ æ–¹æ³•ä¸­åŠ å…¥å¤šä¸ªå‚æ•°å¹¶åœ¨Beanä¸­é…ç½®å¤šä¸ª<code>&lt;constructor-arg&gt;</code>å³å¯ã€‚</p>
<h4 id="æ³¨å…¥ç®€å•æ•°æ®ç±»å‹-2">æ³¨å…¥ç®€å•æ•°æ®ç±»å‹</h4>
<p>åœ¨<code>UserDao</code>ä¸­åˆ é™¤Setteræ–¹æ³•ï¼Œå¹¶ä¸ºå…¶æ·»åŠ å¸¦å‚çš„æ„é€ æ–¹æ³•ï¼š</p>
<pre><code class="language-java">public class UserDaoImpl implements UserDao, InitializingBean {

    private String databaseName;
    private int connectionNum;

    public UserDaoImpl(String databaseName, int connectionNum) {
        this.databaseName = databaseName;
        this.connectionNum = connectionNum;
    }
    // ...
}
</code></pre>
<p>ä¿®æ”¹Springé…ç½®æ–‡ä»¶ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userDao&quot; class=&quot;com.linner.dao.impl.UserDaoImpl&quot;&gt;
    &lt;constructor-arg name=&quot;databaseName&quot; value=&quot;mysql&quot;/&gt;
    &lt;constructor-arg name=&quot;connectionNum&quot; value=&quot;10&quot;/&gt;
&lt;/bean&gt;
</code></pre>
<p>æˆåŠŸè¿è¡Œ<code>ServiceBeanTest</code>è¯´æ˜æ³¨å…¥æˆåŠŸã€‚</p>
<h4 id="é›†åˆæ³¨å…¥-2">é›†åˆæ³¨å…¥</h4>
<p>æ„é€ å™¨æ³¨å…¥é›†åˆæ•°æ®ç±»å‹çš„æ–¹å¼ä¸Setteræ³¨å…¥é›†åˆæ•°æ®ç±»å‹çš„æ–¹å¼ç±»ä¼¼ã€‚</p>
<p>åªä¸æ„é€ å™¨æ³¨å…¥è¦å®šä¹‰ç›¸åº”çš„å¸¦å‚æ–¹æ³•ï¼Œå¹¶ä¸”å°†<code>&lt;property&gt;</code>æ ‡ç­¾æ”¹ä¸º<code>&lt;constructor-arg&gt;</code>ã€‚</p>
<h3 id="è‡ªåŠ¨è£…é…bean-æ ‡ç­¾çš„-autowire-å±æ€§">è‡ªåŠ¨è£…é…ï¼ˆbean æ ‡ç­¾çš„ autowire å±æ€§ï¼‰</h3>
<p>è‡ªåŠ¨è£…é…åªé€‚ç”¨äºå¼•ç”¨ç±»å‹ä¾èµ–æ³¨å…¥ï¼Œä¸èƒ½å¯¹ç®€å•ç±»å‹è¿›è¡Œæ“ä½œã€‚</p>
<p>è‡ªåŠ¨è£…é…çš„æ–¹å¼æœ‰ï¼š</p>
<ul>
<li>æŒ‰ç±»å‹ï¼ˆå¸¸ç”¨ï¼‰</li>
<li>æŒ‰åç§°</li>
<li>æŒ‰æ„é€ æ–¹æ³•ï¼ˆçš„å‚æ•°ï¼‰</li>
</ul>
<h4 id="æŒ‰ç±»å‹è‡ªåŠ¨è£…é…">æŒ‰ç±»å‹è‡ªåŠ¨è£…é…</h4>
<p>ä¸º<code>UserService</code>ä¸­çš„å±æ€§ï¼ˆå¦‚<code>userDao</code>ï¼‰æä¾›Setteræ–¹æ³•ã€‚æ¥ç€åœ¨Springä¸­ä¸º<code>UserService</code>åˆ é™¤å…¶<code>&lt;bean&gt;</code>æ ‡ç­¾ä¸‹çš„æ‰€æœ‰<code>&lt;proerty&gt;</code>æˆ–<code>&lt;constructor-arg&gt;</code>ã€‚ç„¶åç»™<code>&lt;bean&gt;</code>æ·»åŠ <code>autowire=&quot;byType&quot;</code>ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userService&quot; class=&quot;com.linner.service.impl.UserServiceImpl&quot; autowire=&quot;byType&quot;/&gt;
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>ç±»ä¸­å¯¹åº”å±æ€§çš„Setteræ–¹æ³•ä¸èƒ½çœç•¥ã€‚</li>
<li>è¢«æ³¨å…¥çš„å¯¹è±¡å¿…é¡»è¦è¢«Springçš„IOCå®¹å™¨ç®¡ç†ã€‚</li>
<li>æŒ‰ç…§ç±»å‹è‡ªåŠ¨è£…é…å¦‚æœSpringåœ¨IOCä¸­æ‰¾åˆ°å¤šä¸ªç±»å‹ç›¸åŒçš„Beanåˆ™ä¼šæŠ¥<code>NoUniqueBeanDefinitionException</code>é”™è¯¯ã€‚</li>
</ul>
</blockquote>
<h4 id="æŒ‰åç§°è‡ªåŠ¨è£…é…">æŒ‰åç§°è‡ªåŠ¨è£…é…</h4>
<p>ä¸€ä¸ªç±»å‹åœ¨IOCä¸­æœ‰å¤šä¸ªå¯¹è±¡ï¼Œè¿˜æƒ³è¦æ³¨å…¥æˆåŠŸï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æŒ‰ç…§åç§°æ³¨å…¥ã€‚</p>
<p>ä¿®æ”¹Springé…ç½®æ–‡ä»¶ï¼ˆæ·»åŠ <code>autowire=&quot;byName&quot;</code>ï¼‰ï¼š</p>
<pre><code class="language-xml">&lt;bean id=&quot;userService&quot; class=&quot;com.linner.service.impl.UserServiceImpl&quot; autowire=&quot;byName&quot;/&gt;
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>æŒ‰åç§°è‡ªåŠ¨è£…é…æ˜¯æ ¹æ®Setteræ–¹æ³•çš„åç§°åœ¨IOCå®¹å™¨ä¸­å¯»æ‰¾åç§°å¯¹åº”çš„Beanï¼ˆBeançš„<code>id</code>æˆ–<code>name</code>ï¼‰ã€‚å¦‚<code>setUserDao()</code>åˆ™éœ€è¦å¯»æ‰¾åç§°ä¸º<code>userDao</code>çš„Beanã€‚</li>
<li>å¦‚æœæŒ‰ç…§åç§°æ‰¾ä¸åˆ°å¯¹åº”çš„Beanï¼Œåˆ™æ³¨å…¥<code>null</code>ï¼ˆä¸ä¼šæŠ¥é”™ï¼ï¼‰ã€‚</li>
<li>æŒ‰åç§°è‡ªåŠ¨è£…é…ä¸­ï¼Œå®ä¾‹ç±»æˆå‘˜å˜é‡åä¸é…ç½®è€¦åˆï¼Œä¸æ¨èä½¿ç”¨ã€‚</li>
</ul>
</blockquote>
<h2 id="é…ç½®æ–‡ä»¶ç®¡ç†ç¬¬ä¸‰æ–¹-beanproperties-æ–‡ä»¶åŠ è½½">é…ç½®æ–‡ä»¶ç®¡ç†ç¬¬ä¸‰æ–¹ Beanï¼ˆproperties æ–‡ä»¶åŠ è½½ï¼‰</h2>
<h3 id="æ•°æ®æºå¯¹è±¡ç®¡ç†daoå±‚">æ•°æ®æºå¯¹è±¡ç®¡ç†ï¼ˆDAOå±‚ï¼‰</h3>
<p>ä»¥Druidä¸ºä¾‹ï¼š</p>
<ul>
<li>
<p><code>pom.xml</code>ä¾èµ–ï¼š</p>
<pre><code class="language-xml">&lt;dependencies&gt;
    &lt;!--Spring Framework--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.springframework&lt;/groupId&gt;
        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
        &lt;version&gt;5.2.10.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;!--MySQL JDBC--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;mysql&lt;/groupId&gt;
        &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
        &lt;version&gt;8.0.29&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;!--Druid--&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
        &lt;artifactId&gt;druid&lt;/artifactId&gt;
        &lt;version&gt;1.2.11&lt;/version&gt;
    &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
</li>
<li>
<p>JDBCé…ç½®ï¼ˆ<code>jdbc.properties</code>ï¼‰ï¼š</p>
<pre><code class="language-properties">jdbc.driver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:33061/spring_db
jdbc.username=root
jdbc.password=n546,Lin0
</code></pre>
</li>
<li>
<p>Springé…ç½®ï¼ˆ<code>applicationContext.xml</code>ï¼‰ï¼š</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;!--éœ€è¦å¼€å¯contextå‘½åç©ºé—´--&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;

    &lt;!--åŠ è½½jdbcé…ç½®æ–‡ä»¶--&gt;
    &lt;context:property-placeholder location=&quot;classpath*:jdbc.properties&quot;/&gt;

    &lt;!--Druid Bean--&gt;
    &lt;bean class=&quot;com.alibaba.druid.pool.DruidDataSource&quot;&gt;
        &lt;property name=&quot;driverClassName&quot; value=&quot;${jdbc.driver}&quot;/&gt;
        &lt;property name=&quot;url&quot; value=&quot;${jdbc.url}&quot;/&gt;
        &lt;property name=&quot;username&quot; value=&quot;${jdbc.username}&quot;/&gt;
        &lt;property name=&quot;password&quot; value=&quot;${jdbc.password}&quot;/&gt;
    &lt;/bean&gt;

&lt;/beans&gt;
</code></pre>
</li>
<li>
<p>ç¼–å†™<code>App.java</code>ï¼š</p>
<pre><code class="language-java">package com.linner;

import com.alibaba.druid.pool.DruidDataSource;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class App {
    public static void main(String[] args) {
        ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
        DruidDataSource dataSource = ctx.getBean(DruidDataSource.class);
        System.out.println(dataSource);
    }
}
</code></pre>
<p>å¦‚æœç»ˆç«¯æˆåŠŸè¾“å‡º<code>dataSource</code>ï¼Œè¯´æ˜é…ç½®æˆåŠŸã€‚</p>
</li>
</ul>
<hr>
<h1 id="æ³¨è§£å¼€å‘">æ³¨è§£å¼€å‘</h1>
<p>Springå¯¹æ³¨è§£æ”¯æŒçš„ç‰ˆæœ¬å†ç¨‹:</p>
<ul>
<li>2.0ç‰ˆå¼€å§‹æ”¯æŒæ³¨è§£</li>
<li>2.5ç‰ˆæ³¨è§£åŠŸèƒ½è¶‹äºå®Œå–„</li>
<li>3.0ç‰ˆæ”¯æŒçº¯æ³¨è§£å¼€å‘</li>
</ul>
<p>åŸºç¡€é…ç½®ï¼š</p>
<ol>
<li>åˆ›å»ºMavené¡¹ç›®ã€‚</li>
<li>æ·»åŠ Spring Frameworkå’ŒJunitçš„ä¾èµ–jaråŒ…ã€‚</li>
<li>æ·»åŠ ä¸šåŠ¡å±‚ã€æ•°æ®å±‚ç±»ï¼š
<ul>
<li><code>User.java</code>: åŒ<a href="#%E4%BD%BF%E7%94%A8-ioc-%E5%AE%B9%E5%99%A8%E5%88%9B%E5%BB%BA-beanbean-%E6%A0%87%E7%AD%BE">ä½¿ç”¨IOCå®¹å™¨åˆ›å»ºBean</a>ä¸­çš„<code>User.java</code>ã€‚</li>
<li>DAO(ä»…æµ‹è¯•ï¼Œæ— éœ€æŸ¥è¯¢æ•°æ®åº“): åŒ<a href="#setter-%E6%B3%A8%E5%85%A5property-%E6%A0%87%E7%AD%BE">Setter æ³¨å…¥</a>ä¸­çš„DAOï¼ˆ<code>UserDao</code>ï¼‰ã€‚</li>
<li>Service: åŒ<a href="#setter-%E6%B3%A8%E5%85%A5property-%E6%A0%87%E7%AD%BE">Setter æ³¨å…¥</a>ä¸­çš„Serviceï¼ˆ<code>UserService</code>ï¼‰ã€‚</li>
</ul>
</li>
</ol>
<h2 id="spring-é…ç½®æ–‡ä»¶åŒ…æ‰«æ">Spring é…ç½®æ–‡ä»¶åŒ…æ‰«æ</h2>
<p>ä¸ºäº†èƒ½å¤Ÿè·å–åˆ°ä½¿ç”¨æ³¨è§£å®šä¹‰çš„Beanï¼Œéœ€è¦åœ¨Springé…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨åŒ…æ‰«ææ¥è¯†åˆ«å‡ºæŒ‡å®šåŒ…ä¸‹çš„æ‰€æœ‰Beanã€‚</p>
<p>åˆ›å»ºSpringé…ç½®æ–‡ä»¶ã€‚åœ¨Springé…ç½®æ–‡ä»¶ä¸­åŠ å…¥åŒ…æ‰«æï¼š</p>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
       xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
       xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
       xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;

    &lt;context:component-scan base-package=&quot;com.linner&quot;/&gt;
&lt;/beans&gt;
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼š<br>
ä½¿ç”¨<code>&lt;context:component-scan&gt;</code>åŒ…æ‰«æï¼Œéœ€è¦åœ¨<code>&lt;beans&gt;</code>æ ‡ç­¾ä¸­åŠ å…¥å±æ€§ï¼š</p>
<pre><code>xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
</code></pre>
<p>æ¥ç€åœ¨<code>&lt;context:component-scan&gt;</code>çš„<code>xsi:schemaLocation</code>å±æ€§ä¸­åŠ å…¥å€¼ï¼š</p>
<pre><code>http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
</code></pre>
</blockquote>
<p><code>&lt;context:component-scan&gt;</code>ï¼š</p>
<ul>
<li><code>component</code>ï¼šç»„ä»¶ï¼ŒSpringå°†ç®¡ç†çš„Beanè§†ä½œè‡ªå·±çš„ä¸€ä¸ªç»„ä»¶ã€‚</li>
<li><code>scan</code>ï¼šæ‰«æã€‚</li>
<li><code>base-package</code>ï¼šè¯¥å±æ€§æŒ‡å®šSpringæ¡†æ¶æ‰«æçš„åŒ…è·¯å¾„ï¼Œå®ƒä¼šæ‰«ææŒ‡å®šåŒ…åŠå…¶å­åŒ…ä¸­çš„æ‰€æœ‰ç±»ä¸Šçš„æ³¨è§£ã€‚
<ul>
<li>åŒ…è·¯å¾„è¶Šç²¾ç¡®ï¼Œå¦‚ï¼š<code>com.linner.dao.impl</code>ï¼Œæ‰«æçš„èŒƒå›´è¶Šå°é€Ÿåº¦è¶Šå¿«ã€‚</li>
<li>åŒ…è·¯å¾„è¶Šå¹¿æ³›ï¼Œå¦‚ï¼š<code>com.linner</code>ï¼Œæ‰«æçš„èŒƒå›´è¶Šå¤§é€Ÿåº¦è¶Šæ…¢ã€‚</li>
</ul>
<blockquote>
<p>ä¸€èˆ¬æ‰«æåˆ°é¡¹ç›®çš„ç»„ç»‡åç§°å³Mavençš„<code>&lt;groupId&gt;</code>ä¸‹ï¼ˆå¦‚ï¼š<code>com.linner</code>ï¼‰å³å¯ã€‚<br>
åŒ…æ‰«æä¸ä»…èƒ½æ‰«æå½“å‰åŒ…ï¼Œè¿˜èƒ½æ‰«æå½“å‰åŒ…ä¸‹çš„å­åŒ…ã€‚</p>
</blockquote>
</li>
</ul>
<h2 id="åˆ›å»º-bean-å¯¹è±¡component">åˆ›å»º Bean å¯¹è±¡ï¼ˆ@Componentï¼‰</h2>
<p>åœ¨<code>UserDao</code>ä¸­æ·»åŠ <code>@Component</code>æ³¨è§£ï¼š</p>
<pre><code class="language-java">import org.springframework.stereotype.Component;

@Component(&quot;userDao&quot;)
public class UserDaoImpl implements UserDao {
    // ...
}
</code></pre>
<p>ç¼–å†™æ–°çš„æµ‹è¯•ç±»<code>UserDaoTest</code>ï¼š</p>
<pre><code class="language-java">package com.linner.dao;

import com.linner.domain.User;
import org.junit.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class UserDaoTest {
    private static UserDao userDao;
    static {
        ApplicationContext ctx = new ClassPathXmlApplicationContext(&quot;applicationContext.xml&quot;);
        userDao = (UserDao) ctx.getBean(&quot;userDao&quot;);
    }

    @Test
    public void testFindAll() {
        userDao.findAll();
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testFindById() {
        int id = 12;
        userDao.findById(id);
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testDelete() {
        int id = 12;
        userDao.delete(id);
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testSave() {
        User user = new User();
        user.setId(12);
        user.setUsername(&quot;abc&quot;);
        user.setPassword(&quot;abc123&quot;);
        userDao.save(user);
        System.out.println(&quot;------------&quot;);
    }

    @Test
    public void testUpdate() {
        User user = new User();
        user.setId(12);
        user.setUsername(&quot;abc&quot;);
        user.setPassword(&quot;abc123&quot;);
        userDao.update(user);
        System.out.println(&quot;------------&quot;);
    }
}
</code></pre>
<ul>
<li>
<p><code>@Component</code>å¯ä»¥ä¼ é€’ä¸€ä¸ª<code>String</code>ç±»å‹çš„å€¼ã€‚ç”¨äºåˆ¶å®šBeançš„åç§°ã€‚</p>
</li>
<li>
<p><code>@Component</code>å¯ä»¥ç›´æ¥ä½¿ç”¨è€Œä¸æŒ‡å®šåç§°ã€‚å³ï¼Œä½¿ç”¨æŒ‰ç±»å‹è·å–Beanã€‚ä½†å¿…é¡»ä¿è¯è¯¥ç±»å‹åœ¨IOCä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªBeanã€‚å¦‚ï¼š</p>
<pre><code class="language-java">@Component(&quot;userDao&quot;)
public class UserDaoImpl implements UserDao {
    // ...
}
</code></pre>
<pre><code class="language-java">UserDao userDao = ctx.getBean(UserDao.class);
</code></pre>
</li>
<li>
<p><code>@Component</code>æ³¨è§£å¦‚æœä¸èµ·åç§°ï¼Œä¼šæœ‰ä¸€ä¸ªé»˜è®¤å€¼ï¼Œå°±æ˜¯å°†<u>å½“å‰ç±»åé¦–å­—æ¯è½¬ä¸ºå°å†™åçš„å€¼</u>ã€‚æ‰€ä»¥ä¹Ÿå¯ä»¥æŒ‰ç…§åç§°è·å–ã€‚</p>
</li>
<li>
<p><code>@Component</code>è¿˜æœ‰å…¶ä»–ä¸‰ä¸ªè¡ç”Ÿæ³¨è§£ã€‚</p>
<ul>
<li><code>@Controller</code>ï¼šè¡¨ç°å±‚</li>
<li><code>@Service</code>ï¼šä¸šåŠ¡å±‚</li>
<li><code>@Repository</code>ï¼šæ•°æ®å±‚<br>
å®ƒä»¬çš„ä½œç”¨å’Œ<code>@Component</code>æ˜¯ä¸€æ ·çš„ï¼Œä»…ä½œä¸ºå¯¹è¡¨ç°å±‚ã€ä¸šåŠ¡å±‚å’Œæ•°æ®å±‚çš„ç±»è¿›è¡ŒåŒºåˆ†ã€‚å¦‚ï¼š</li>
</ul>
<pre><code class="language-java">import org.springframework.stereotype.Repository;

@Repository(&quot;userDao&quot;)
public class UserDaoImpl implements UserDao {
    // ...
}
</code></pre>
<pre><code class="language-java">import org.springframework.stereotype.Repository;

@Repository
public class UserDaoImpl implements UserDao {
    // ...
}
</code></pre>
</li>
</ul>
<h2 id="çº¯æ³¨è§£å¼€å‘é…ç½®ç±»-åŒ…æ‰«æ">çº¯æ³¨è§£å¼€å‘ï¼ˆé…ç½®ç±»ã€åŒ…æ‰«æï¼‰</h2>
<p>Spring3.0å¼€å¯äº†çº¯æ³¨è§£å¼€å‘æ¨¡å¼ï¼Œä½¿ç”¨Javaç±»æ›¿ä»£é…ç½®æ–‡ä»¶ã€‚</p>
<p>åˆ é™¤Springé…ç½®æ–‡ä»¶å¹¶åˆ›å»ºé…ç½®ç±»ï¼š</p>
<pre><code class="language-java">package com.linner.config;

import org.springframework.context.annotation.ComponentScan;
import org.springframework.context.annotation.Configuration;

@Configuration
@ComponentScan(&quot;com.linner&quot;)
public class SpringConfig {
}
</code></pre>
<ul>
<li>
<p><code>@Configuration</code>ï¼šè®¾å®šè¯¥ç±»ä¸ºSpringé…ç½®ç±»ã€‚</p>
</li>
<li>
<p><code>@ComponentScan</code>ï¼šåŒ…æ‰«æï¼Œç”¨æ¥æ›¿æ¢é…ç½®æ–‡ä»¶ä¸­çš„<code>&lt;context:component-scan&gt;</code>ã€‚åœ¨ä¸€ä¸ªé…ç½®ç±»ä¸­ä»…èƒ½ä½¿ç”¨ä¸€æ¬¡ã€‚å¤šä¸ªæ‰«æè·¯å¾„ä½¿ç”¨æ•°æ®æ ¼å¼ï¼Œå¦‚ï¼š</p>
<pre><code class="language-java">@ComponentScan({&quot;com.linner.dao&quot;, &quot;com.linner.service&quot;})
</code></pre>
<blockquote>
<p>åŒ…æ‰«æä¸ä»…èƒ½æ‰«æå½“å‰åŒ…ï¼Œè¿˜èƒ½æ‰«æå½“å‰åŒ…ä¸‹çš„å­åŒ…</p>
</blockquote>
</li>
</ul>
<p>ä¿®æ”¹<code>UserDaoTest</code>ï¼š</p>
<pre><code class="language-java">import com.linner.config.SpringConfig;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

public class UserDaoTest {
    private static UserDao userDao;
    static {
        ApplicationContext ctx = new AnnotationConfigApplicationContext(SpringConfig.class);
        userDao = (UserDao) ctx.getBean(&quot;userDao&quot;);
    }
    // ...
}
</code></pre>
<p>ä½¿ç”¨Springé…ç½®ç±»ï¼Œè·å–IOCå®¹å™¨åº”è¯¥ä½¿ç”¨<code>AnnotationConfigApplicationContext</code>å¯¹è±¡ï¼š</p>
<pre><code class="language-java">public AnnotationConfigApplicationContext(Class&lt;?&gt;... componentClasses)
</code></pre>
<h2 id="ä½œç”¨èŒƒå›´scope">ä½œç”¨èŒƒå›´ï¼ˆ@Scopeï¼‰</h2>
<p>æ³¨è§£å¼€å‘æ§åˆ¶Beançš„ä½œç”¨èŒƒå›´ä½¿ç”¨<code>@Scope</code>ã€‚å®ƒçš„å€¼æœ‰ä¸¤ä¸ªï¼š</p>
<ul>
<li>
<p><code>&quot;singleton&quot;</code>ï¼šé»˜è®¤å€¼ï¼Œå°†å½“å‰ç±»è®¾ç½®ä¸ºå•ä¾‹ã€‚</p>
</li>
<li>
<p><code>&quot;prototype&quot;</code>ï¼šå°†å½“å‰ç±»è®¾ç½®ä¸ºå¤šä¾‹ã€‚å¦‚ï¼š</p>
<pre><code class="language-java">import org.springframework.context.annotation.Scope;

@Repository
@Scope(&quot;prototype&quot;)
public class UserDaoImpl implements UserDao {
    // ...
}
</code></pre>
</li>
</ul>
<h2 id="ç”Ÿå‘½å‘¨æœŸæ§åˆ¶postconstruct-å’Œ-predestroy">ç”Ÿå‘½å‘¨æœŸæ§åˆ¶ï¼ˆ@PostConstruct å’Œ @PreDestroyï¼‰</h2>
<p>æ³¨è§£æ§åˆ¶Beanç”Ÿå‘½å‘¨æœŸä½¿ç”¨ï¼š</p>
<ul>
<li><code>@PostConstruct</code>ï¼šåˆå§‹åŒ–ã€‚</li>
<li><code>@PreDestroy</code>ï¼šé”€æ¯ã€‚</li>
</ul>
<p>ç»™<code>UserDao</code>åŠ å…¥åˆå§‹åŒ–å’Œé”€æ¯æ–¹æ³•ï¼ˆæ–¹æ³•åä»»æ„ï¼‰ï¼š</p>
<pre><code class="language-java">import javax.annotation.PostConstruct;
import javax.annotation.PreDestroy;

@Repository
public class UserDaoImpl implements UserDao {

    /**
     * åˆå§‹åŒ–æ–¹æ³•
     */
    @PostConstruct
    public void init() {
        System.out.println(this + &quot;init...&quot;);
    }

    /**
     * é”€æ¯æ–¹æ³•
     */
    @PreDestroy
    public void destroy() {
        System.out.println(this + &quot;destroy...&quot;);
    }
    // ...
}
</code></pre>
<blockquote>
<p>ä¸ä½¿ç”¨æ³¨è§£å¼€å‘çš„æƒ…å†µä¸€æ ·ï¼Œè¦æƒ³æ‰§è¡Œ<code>destroy()</code>éœ€è¦åœ¨ç¨‹åºæ‰§è¡Œçš„æ—¶å€™å…³é—­å®¹å™¨ï¼š</p>
<pre><code class="language-java">ctx.close();
</code></pre>
<p>æˆ–ï¼š</p>
<pre><code class="language-java">ctx.registerShutdownHook();
</code></pre>
<p>æ³¨æ„:<code>@PostConstruct</code>å’Œ@<code>PreDestroy</code>æ³¨è§£å¦‚æœæ‰¾ä¸åˆ°ï¼Œéœ€è¦å¯¼å…¥ä¸‹é¢çš„jaråŒ…==</p>
<pre><code class="language-xml">&lt;dependency&gt;
&lt;groupId&gt;javax.annotation&lt;/groupId&gt;
&lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;
&lt;version&gt;1.3.2&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>åŸå› æ˜¯ï¼Œä»JDK9ä»¥åjdkä¸­çš„<code>javax.annotation</code>åŒ…è¢«ç§»é™¤äº†ï¼Œè¿™ä¸¤ä¸ªæ³¨è§£åˆšå¥½å°±åœ¨è¿™ä¸ªåŒ…ä¸­ã€‚</p>
</blockquote>
<h2 id="ä¾èµ–æ³¨å…¥">ä¾èµ–æ³¨å…¥</h2>
<p>ç»™<code>UserService</code>é…ç½®Beanï¼š</p>
<pre><code class="language-java">import org.springframework.stereotype.Service;

@Service
public class UserServiceImpl implements UserService {
    // ...
}
</code></pre>
<h3 id="æŒ‰ç…§ç±»å‹æ³¨å…¥">æŒ‰ç…§ç±»å‹æ³¨å…¥</h3>
<p>æ³¨è§£å¼€å‘æŒ‰ç…§ç±»å‹æ³¨å…¥ä½¿ç”¨<code>@Autowired</code>æ³¨è§£ã€‚</p>
<p>ç»™<code>UserService</code>æ³¨å…¥<code>UserDao</code>ï¼š</p>
<pre><code class="language-java">import org.springframework.beans.factory.annotation.Autowired;

@Service
public class UserServiceImpl implements UserService {

    @Autowired
    private UserDao userDao;
    
    // ...
}
</code></pre>
<blockquote>
<p><code>@Autowired</code>å¯ä»¥åœ¨å®ä¾‹ç±»çš„æˆå‘˜å˜é‡ä¸Šä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨Setteræ–¹æ³•ä¸Šä½¿ç”¨ï¼Œå¦‚ï¼š</p>
<pre><code class="language-java">@Service
public class UserServiceImpl implements UserService {

    private UserDao userDao;

    @Autowired
    public void setUserDao(UserDao userDao) {
        this.userDao = userDao;
    }
    // ...
}
</code></pre>
<p>åœ¨å®ä¾‹ç±»çš„æˆå‘˜å˜é‡ä¸Šä½¿ç”¨<code>@Autowired</code>ï¼Œå³ä½¿å°†Setteræ–¹æ³•æ³¨é‡Šæ‰ä¾ç„¶å¯ä»¥æ³¨å…¥æˆåŠŸã€‚å› ä¸ºè‡ªåŠ¨è£…é…åŸºäºåå°„è®¾è®¡åˆ›å»ºå¯¹è±¡å¹¶é€šè¿‡æš´åŠ›åå°„ä¸ºå±æ€§è¿›è¡Œè®¾å€¼ï¼ˆå³ä½¿æ˜¯ç§æœ‰å±æ€§ä¹Ÿèƒ½è®¾å€¼ï¼‰ã€‚<br>
ä½¿ç”¨<code>@Autowired</code>éœ€è¦ä¿è¯è¯¥ç±»å‹åœ¨IOCå®¹å™¨ä¸­æœ‰ä¸”ä»…æœ‰ä¸€ä¸ªåŒç±»å‹çš„Beanã€‚<br>
å¦‚æœIOCå®¹å™¨ä¸­æœ‰å¯¹ä¸ªåŒç±»å‹çš„Beanã€‚é‚£ä¹ˆ<code>@Autowired</code>å°±ä¼šæŒ‰ç…§å˜é‡åå’ŒBeançš„åç§°è¿›è¡ŒåŒ¹é…ã€‚å¦‚ï¼š</p>
<pre><code class="language-java">@Repository(&quot;userDao&quot;)
public class UserDaoImpl implements UserDao { /*...*/ }
</code></pre>
<pre><code class="language-java">@Service
public class UserServiceImpl implements UserService {
    @Autowired
    private UserDao userDao;
    // ...
}
</code></pre>
<p>ä¹Ÿèƒ½æ³¨å…¥æˆåŠŸã€‚<br>
å¦‚æœæœ‰å¤šä¸ªåŒç±»å‹Beanï¼Œå¹¶ä¸”<code>@Autowired</code>åç§°åŒ¹é…ä¸ä¸Šï¼Œé‚£ä¹ˆä¼šæŠ¥<code>NoUniqueBeanDefinitionException</code>é”™è¯¯ã€‚</p>
</blockquote>
<p>ä½¿ç”¨<a href="#%E4%BD%BF%E7%94%A8-ioc-%E5%AE%B9%E5%99%A8%E5%88%9B%E5%BB%BA-beanbean-%E6%A0%87%E7%AD%BE">ä½¿ç”¨IOCå®¹å™¨åˆ›å»ºBean</a>ä¸­çš„<code>UserServiceTest</code>ï¼ŒæˆåŠŸæ‰§è¡Œè¯´æ˜é…ç½®æˆåŠŸã€‚</p>
<h3 id="æŒ‰ç…§åç§°æ³¨å…¥">æŒ‰ç…§åç§°æ³¨å…¥</h3>
<p>æ³¨è§£å¼€å‘åç§°æ³¨å…¥ä½¿ç”¨<code>@Qualifier</code>æ³¨è§£æ¥å®Œæˆã€‚</p>
<pre><code class="language-java">import org.springframework.beans.factory.annotation.Qualifier;

@Service
public class UserServiceImpl implements UserService {

    @Autowired
    @Qualifier(&quot;userDao&quot;)
    private UserDao userDao;
    
    // ...
}
</code></pre>
<p>åœ¨<code>@Qualifier</code>ä¸­æŒ‡å®šBeançš„åç§°ã€‚å¹¶ä¸”ï¼Œ<code>@Qualifier</code>å¿…é¡»å’Œ<code>@Autowired</code>ä¸€èµ·ä½¿ç”¨æ‰èƒ½èµ·åˆ°æŒ‰ç…§åç§°æ³¨å…¥çš„æ•ˆæœã€‚</p>
<blockquote>
<p>ç»è¿‡æµ‹è¯•å•ç‹¬ä½¿ç”¨<code>@Qualifier</code>ï¼ˆä¸åŠ <code>@Autowired</code>ï¼‰çš„æ•ˆæœå’ŒæŒ‰ç…§ç±»å‹æ³¨å…¥çš„æ•ˆæœä¸€æ ·ï¼ˆå¯èƒ½ä¼šæœ‰å…¶ä»–ç»†å¾®çš„åŒºåˆ«ï¼‰ã€‚</p>
</blockquote>
<h3 id="æ³¨å…¥ç®€å•æ•°æ®ç±»å‹-3">æ³¨å…¥ç®€å•æ•°æ®ç±»å‹</h3>
<p>æ³¨è§£å¼€å‘æ³¨å…¥ç®€å•ç±»å‹æ•°æ®ä½¿ç”¨<code>@Value</code>æ³¨è§£ã€‚</p>
<pre><code class="language-java">import org.springframework.beans.factory.annotation.Value;

@Repository
public class UserDaoImpl implements UserDao {

    @Value(&quot;mysql&quot;)
    private String databaseName;
    @Value(&quot;10&quot;)
    private int connectionNum;

    // ...
}
</code></pre>
<p><code>@Value</code>ä¸­çš„å€¼ä½¿ç”¨<code>String</code>ç±»å‹ã€‚å¦‚æœè¦æ³¨å…¥çš„æ˜¯å…¶ä»–ç±»å‹æ•°æ®ï¼Œéœ€è¦æŒ‰ç…§å…¶ç±»å‹æ•°æ®çš„æ ¼å¼ç¼–å†™ã€‚</p>
<h4 id="æ³¨è§£è¯»å–-properties-é…ç½®æ–‡ä»¶">æ³¨è§£è¯»å– properties é…ç½®æ–‡ä»¶</h4>
<p>ä½¿ç”¨<code>@Value</code>çš„æ„ä¹‰ä¹‹ä¸€åœ¨äºï¼šè¯»å–propertiesé…ç½®æ–‡ä»¶çš„ä¿¡æ¯ã€‚</p>
<p>åœ¨<code>resource</code>ç›®å½•ä¸‹æ–°å»º<code>jdbc.properties</code>ï¼š</p>
<pre><code class="language-properties">databaseName=mysql
connectionNum=10
</code></pre>
<p>åœ¨é…ç½®ç±»ä¸Šæ·»åŠ <code>@PropertySource</code>æ³¨è§£ï¼š</p>
<pre><code class="language-java">import org.springframework.context.annotation.PropertySource;

@Configuration
@ComponentScan(&quot;com.linner&quot;)
@PropertySource(&quot;jdbc.properties&quot;)
public class SpringConfig {
}
</code></pre>
<p>ä¿®æ”¹<code>UserDao</code>ï¼š</p>
<pre><code class="language-java">@Repository
public class UserDaoImpl implements UserDao {

    @Value(&quot;${databaseName}&quot;)
    private String databaseName;
    @Value(&quot;${connectionNum}&quot;)
    private int connectionNum;
    
    // ...
}
</code></pre>
<ul>
<li>
<p>è¯»å–å¤šä¸ªé…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨æ•°ç»„å½¢å¼ç»™<code>@PropertySource</code>ä¼ é€’å­—ç¬¦ä¸²æ•°ç»„ã€‚å¦‚ï¼š</p>
<pre><code class="language-java">@PropertySource({&quot;jdbc.properties&quot;, &quot;xxx.properties&quot;})
</code></pre>
</li>
<li>
<p><code>@PropertySource</code>æ³¨è§£å±æ€§ä¸­ä¸æ”¯æŒä½¿ç”¨é€šé…ç¬¦<code>*</code>ï¼Œè¿è¡Œä¼šæŠ¥é”™ã€‚</p>
</li>
<li>
<p><code>@PropertySource</code>æ³¨è§£å±æ€§ä¸­å¯ä»¥åŠ å…¥<code>classpath:</code>ï¼Œä»£è¡¨ä»å½“å‰é¡¹ç›®çš„æ ¹è·¯å¾„æ‰¾æ–‡ä»¶ï¼š</p>
<pre><code class="language-java">@PropertySource({&quot;classpath:jdbc.properties&quot;})
</code></pre>
</li>
</ul>
<h2 id="æ³¨è§£ç®¡ç†ç¬¬ä¸‰æ–¹-bean">æ³¨è§£ç®¡ç†ç¬¬ä¸‰æ–¹ Bean</h2>
<p>åŸºç¡€é…ç½®ï¼š</p>
<ul>
<li>
<p><code>User.java</code>: åŒ<a href="#%E4%BD%BF%E7%94%A8-ioc-%E5%AE%B9%E5%99%A8%E5%88%9B%E5%BB%BA-beanbean-%E6%A0%87%E7%AD%BE">ä½¿ç”¨IOCå®¹å™¨åˆ›å»ºBean</a>ä¸­çš„<code>User.java</code>ã€‚</p>
</li>
<li>
<p><code>UserDao</code>ï¼š</p>
<pre><code class="language-java">package com.linner.dao;

import com.linner.domain.User;
import org.apache.ibatis.annotations.*;

import java.util.List;

public interface UserDao {

    @Select(&quot;SELECT * FROM user_tb&quot;)
    List&lt;User&gt; findAll();

    @Select((&quot;SELECT * FROM user_tb WHERE id = #{id}&quot;))
    User findById(int id);

    @Delete(&quot;DELETE FROM user_tb WHERE id = #{id}&quot;)
    void delete(int id);

    @Insert(&quot;INSERT INTO user_tb(username, password) VALUES (#{username}, #{password})&quot;)
    void save(User user);

    @Update(&quot;UPDATE user_tb SET username = #{username}, password = #{password} WHERE id = #{id}&quot;)
    void update(User user);
}
</code></pre>
</li>
<li>
<p><code>UserService</code>ï¼š</p>
<p><code>UserService</code>æ¥å£åŒ<a href="#%E4%BD%BF%E7%94%A8-ioc-%E5%AE%B9%E5%99%A8%E5%88%9B%E5%BB%BA-beanbean-%E6%A0%87%E7%AD%BE">ä½¿ç”¨IOCå®¹å™¨åˆ›å»ºBean</a>ä¸­çš„<code>UserService.java</code>ã€‚<br>
<code>UserService</code>å®ç°ç±»<code>UserServiceImpl.java</code>ï¼š</p>
<pre><code class="language-java">package com.linner.service.impl;

import com.linner.dao.UserDao;
import com.linner.domain.User;
import com.linner.service.UserService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;

import java.util.List;

@Service
public class UserServiceImpl implements UserService {

    @Autowired
    private UserDao userDao;

    @Override
    public List&lt;User&gt; findAll() {
        return userDao.findAll();
    }

    @Override
    public User findById(int id) {
        return userDao.findById(id);
    }

    @Override
    public void delete(int id) {
        userDao.delete(id);
    }

    @Override
    public void save(User user) {
        userDao.save(user);
    }

    @Override
    public void update(User user) {
        userDao.update(user);
    }
}
</code></pre>
</li>
</ul>
<h3 id="æ•´åˆ-mybatis">æ•´åˆ Mybatis</h3>
<ul>
<li>
<p><code>pom.xml</code>ä¾èµ–ï¼š</p>
<pre><code class="language-xml">&lt;!--Spring Framework--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-context&lt;/artifactId&gt;
    &lt;version&gt;5.2.10.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
&lt;!--MySQL JDBC--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
    &lt;version&gt;8.0.29&lt;/version&gt;
&lt;/dependency&gt;
&lt;!--Druid--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
    &lt;artifactId&gt;druid&lt;/artifactId&gt;
    &lt;version&gt;1.2.11&lt;/version&gt;
&lt;/dependency&gt;
&lt;!--MyBatis--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
    &lt;version&gt;3.5.10&lt;/version&gt;
&lt;/dependency&gt;
&lt;!--Spring JDBC--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
    &lt;version&gt;5.2.10.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
&lt;!--MyBatis Spring æ•´åˆåŒ…--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;
    &lt;version&gt;1.3.0&lt;/version&gt;
&lt;/dependency&gt;
&lt;!--Junit å•å…ƒæµ‹è¯•--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;junit&lt;/groupId&gt;
    &lt;artifactId&gt;junit&lt;/artifactId&gt;
    &lt;version&gt;4.13&lt;/version&gt;
    &lt;scope&gt;test&lt;/scope&gt;
&lt;/dependency&gt;
</code></pre>
</li>
<li>
<p>å»ºç«‹Userè¡¨ï¼š</p>
<pre><code class="language-sql">DROP TABLE IF EXISTS `user_tb`;
CREATE TABLE `user_tb`  (
`id` int(10) PRIMARY KEY AUTO_INCREMENT COMMENT 'ç”¨æˆ·id',
`username` varchar(10) NOT NULL COMMENT 'ç”¨æˆ·å',
`password` varchar(10) NOT NULL COMMENT 'å¯†ç '
) CHARACTER SET = utf8;
</code></pre>
</li>
<li>
<p>JDBCé…ç½®æ–‡ä»¶<code>jdbc.properties</code>ï¼š</p>
<pre><code class="language-properties">jdbc.driver=com.mysql.cj.jdbc.Driver
jdbc.url=jdbc:mysql://localhost:3306/spring_db?useSSL=false&amp;useServerPrepStmts=true
jdbc.username=root
jdbc.password=root
</code></pre>
</li>
<li>
<p>JDBCé…ç½®ç±»<code>JdbcConfig.java</code>ï¼š</p>
<pre><code class="language-java">package com.linner.config;

import com.alibaba.druid.pool.DruidDataSource;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.context.annotation.Bean;

import javax.sql.DataSource;

public class JdbcConfig {
    // é©±åŠ¨ä¿¡æ¯ï¼š
    @Value(&quot;${jdbc.driver}&quot;)
    private String driver;
    @Value(&quot;${jdbc.url}&quot;)
    private String url;
    @Value(&quot;${jdbc.username}&quot;)
    private String username;
    @Value(&quot;${jdbc.password}&quot;)
    private String password;

    /**
     * è·å–DataSourceå¯¹è±¡
     */
    @Bean
    public DataSource dataSource() {
        DruidDataSource ds = new DruidDataSource();
        // è®¾ç½®é©±åŠ¨ä¿¡æ¯
        ds.setDriverClassName(this.driver);
        ds.setUrl(this.url);
        ds.setUsername(this.username);
        ds.setPassword(this.password);
        return ds;
    }
}
</code></pre>
<ul>
<li><code>@Bean</code>ï¼šç”¨äºæ–¹æ³•ä¸Šï¼Œæ ¹æ®è¿”å›å€¼ç±»å‹è‡ªåŠ¨äº§ç”ŸBeanï¼Œå¹¶ä¸”æ–¹æ³•çš„å‚æ•°ä¼šæŒ‰ç…§ç±»å‹è‡ªåŠ¨è£…é…ã€‚</li>
</ul>
</li>
<li>
<p>Mybatisé…ç½®ç±»<code>MybatisConfig.java</code>ï¼š</p>
<pre><code class="language-java">package com.linner.config;

import org.mybatis.spring.SqlSessionFactoryBean;
import org.mybatis.spring.mapper.MapperScannerConfigurer;
import org.springframework.context.annotation.Bean;

import javax.sql.DataSource;

public class MybatisConfig {

    @Bean
    public SqlSessionFactoryBean sqlSessionFactory(DataSource dataSource) {
        SqlSessionFactoryBean ssfb = new SqlSessionFactoryBean();
        // è®¾ç½®æ¨¡å‹ç±»çš„åˆ«åæ‰«æ
        ssfb.setTypeAliasesPackage(&quot;com.linner.domain&quot;);
        // è®¾ç½®æ•°æ®æº
        ssfb.setDataSource(dataSource);
        return ssfb;
    }

    /**
    * è·å–MapperScannerConfigurerå¯¹è±¡
    */
    @Bean
    public MapperScannerConfigurer mapperScannerConfigurer() {
        MapperScannerConfigurer msc = new MapperScannerConfigurer();
        msc.setBasePackage(&quot;com.linner.dao&quot;);
        return msc;
    }
}
</code></pre>
<ul>
<li><code>SqlSessionFactoryBean</code>ï¼šç”¨äºå°è£…<code>SqlSessionFactory</code>éœ€è¦çš„ç¯å¢ƒä¿¡æ¯ï¼ˆåŸå…ˆçš„ä¿¡æ¯æ˜¯åœ¨Mybatisé…ç½®æ–‡ä»¶ä¸­å®šä¹‰ï¼Œå¦‚ä»Šå¯ä»¥åœ¨Javaä¸­ç”¨ä»£ç å®šä¹‰ï¼‰ã€‚ç”¨äºäº§ç”Ÿ<code>SqlSessionFactory</code>å¯¹è±¡ã€‚
<ul>
<li><code>setTypeAliasesPackage()</code>ï¼šè®¾ç½®æ¨¡å‹ç±»çš„åˆ«åæ‰«æ</li>
<li><code>setDataSource()</code>ï¼šè®¾ç½®<code>DataSource</code>ã€‚è¿™é‡Œè®¾ç½®çš„<code>DataSource</code>é€šè¿‡æ–¹æ³•çš„å‚æ•°å’Œ<code>@Bean</code>æ³¨è§£å®ç°äº†è‡ªåŠ¨è£…é…ã€‚å¹¶ä¸”è‡ªåŠ¨è£…é…çš„å¯¹åƒæ˜¯Druidçš„<code>DataSource</code>ã€‚</li>
</ul>
</li>
<li><code>MapperScannerConfigurer</code>ï¼šç”¨äºåŠ è½½Daoæ¥å£ï¼Œåˆ›å»ºä»£ç†å¯¹è±¡ä¿å­˜åˆ°IOCå®¹å™¨ä¸­ã€‚æ­¤å¤„è®¾ç½®çš„æ˜¯<code>dao</code>åŒ…ä¸‹çš„æ‰€æœ‰æ¥å£ã€‚è¿™äº›æ¥å£éƒ½ä¼šè¢«Mybatisåˆ›å»ºæˆå¯¹è±¡å¹¶ä¸”ä½œä¸ºBeanä¿å­˜åœ¨IOCå®¹å™¨ä¸­ã€‚å³ï¼Œä½¿ç”¨<code>ctx.getBean(UserDao.class)</code>èƒ½è·å–åˆ°<code>UserDao</code>ã€‚</li>
</ul>
</li>
<li>
<p>Springé…ç½®ç±»<code>SpringConfig.java</code>ï¼š</p>
<pre><code class="language-java">package com.linner.config;

import org.springframework.context.annotation.*;

@Configuration
@ComponentScan(&quot;com.linner&quot;)
@PropertySource(&quot;classpath:jdbc.properties&quot;)
@Import({JdbcConfig.class, MybatisConfig.class})
public class SpringConfig {
}
</code></pre>
<ul>
<li><code>@Import</code>ï¼šç”¨äºå¼•å…¥å…¶ä»–é…ç½®ç±»ã€‚å¦‚æœè¦å¼•å…¥å¤šä¸ªé…ç½®ç±»åˆ™éœ€è¦ä½¿ç”¨æ•°ç»„å½¢å¼ã€‚</li>
</ul>
</li>
<li>
<p>æµ‹è¯•ç±»<code>UserServiceTest</code>ï¼š</p>
<pre><code class="language-java">package com.linner;

import com.linner.config.SpringConfig;
import com.linner.domain.User;
import com.linner.service.UserService;
import org.junit.Test;
import org.springframework.context.ApplicationContext;
import org.springframework.context.annotation.AnnotationConfigApplicationContext;

import java.util.List;

public class UserServiceTest {
    private static UserService userService;
    static {
        ApplicationContext ctx = new AnnotationConfigApplicationContext(SpringConfig.class);
        userService = ctx.getBean(UserService.class);
    }

    @Test
    public void testFindAll() {
        List&lt;User&gt; users = userService.findAll();
        for (User user : users) {
            System.out.println(user);
        }
    }

    @Test
    public void testFindById() {
        int id = 10;
        User user = userService.findById(id);
        System.out.println(user);
    }

    @Test
    public void testDelete() {
        int id = 10;
        userService.delete(id);
    }

    @Test
    public void testSave() {
        User user = new User();
        user.setUsername(&quot;å¼ ä¸‰&quot;);
        user.setPassword(&quot;abc&quot;);
        userService.save(user);
    }

    @Test
    public void testUpdate() {
        User user = new User();
        user.setId(21);
        user.setUsername(&quot;å¼ ä¸‰&quot;);
        user.setPassword(&quot;abc&quot;);
        userService.update(user);
    }
}
</code></pre>
</li>
</ul>
<h3 id="æ•´åˆ-junit">æ•´åˆ Junit</h3>
<ul>
<li>
<p>å¼•å…¥Springä¸æµ‹è¯•æœ‰å…³çš„æ•´åˆåŒ…ï¼š</p>
<pre><code class="language-xml">&lt;!--Spring æµ‹è¯•æ•´åˆåŒ…--&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-test&lt;/artifactId&gt;
    &lt;version&gt;5.2.10.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
</li>
<li>
<p>ä¿®æ”¹æµ‹è¯•ç±»<code>UserServiceTest</code>ï¼š</p>
<pre><code class="language-java">import org.junit.runner.RunWith;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

import java.util.List;

// è®¾ç½®ç±»è¿è¡Œå™¨
@RunWith(SpringJUnit4ClassRunner.class)
// è®¾ç½®Springç¯å¢ƒå¯¹åº”çš„é…ç½®
// åŠ è½½é…ç½®ç±»
@ContextConfiguration(classes = {SpringConfig.class})
// åŠ è½½é…ç½®æ–‡ä»¶
//@ContextConfiguration(locations={&quot;classpath:applicationContext.xml&quot;})
public class UserServiceTest {

    // è‡ªåŠ¨è£…é…UserServiceï¼Œåˆ é™¤staticé™æ€ä»£ç å—
    @Autowired
    private UserService userService;

    
}
</code></pre>
</li>
</ul>
<h2 id="aop">AOP</h2>
<h3 id="aop-ä»‹ç»">AOP ä»‹ç»</h3>
<p>ä¸€èˆ¬å¸¸ç”¨çš„ç¼–ç¨‹æ€æƒ³æ˜¯OOPï¼ˆé¢å‘å¯¹è±¡ç¼–ç¨‹ï¼ŒObject Oriented Programmingï¼‰ã€‚</p>
<p>è€ŒAOPï¼ˆé¢å‘åˆ‡é¢ç¼–ç¨‹ï¼ŒAspect Oriented Programmingï¼‰ï¼Œæ˜¯ä¸€ç§ç¼–ç¨‹èŒƒå¼ï¼ŒæŒ‡å¯¼å¼€å‘è€…å¦‚ä½•ç»„ç»‡ç¨‹åºç»“æ„ã€‚</p>
<p>ç¼–ç¨‹æ€æƒ³ä¸»è¦çš„å†…å®¹å°±æ˜¯æŒ‡å¯¼ç¨‹åºå‘˜è¯¥å¦‚ä½•ç¼–å†™ç¨‹åºï¼Œæ‰€ä»¥AOPå’ŒOOPæ˜¯ä¸¤ç§ä¸åŒçš„ç¼–ç¨‹èŒƒå¼ã€‚</p>
<p>AOPçš„ä½œç”¨æ˜¯åœ¨ä¸æ”¹å˜åŸå§‹è®¾è®¡çš„åŸºç¡€ä¸Šä¸ºå…¶è¿›è¡ŒåŠŸèƒ½å¢å¼ºã€‚ç±»ä¼¼äºFilterä»£ç†æ¨¡å¼ã€‚</p>
<p>AOPæœ¯è¯­ï¼š</p>
<ul>
<li>è¿æ¥ç‚¹ï¼ˆJoinPointï¼‰ï¼šç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­çš„ä»»æ„ä½ç½®ï¼Œç²’åº¦ä¸ºæ‰§è¡Œæ–¹æ³•ã€æŠ›å‡ºå¼‚å¸¸ã€è®¾ç½®å˜é‡ç­‰ã€‚<br>
åœ¨SpringAOPä¸­ï¼Œç†è§£ä¸ºæ–¹æ³•çš„æ‰§è¡Œã€‚<br>
ä¾‹å¦‚è¦å¯¹é¡¹ç›®ä¸­<code>UserDao</code>çš„åŠŸèƒ½åœ¨ä¸è¿›è¡Œä»»ä½•ä¿®æ”¹çš„å‰æä¸‹å®ç°å¢å¼ºã€‚é‚£ä¹ˆ<code>UserDao</code>ä¸­è¦å¢å¼ºçš„æ–¹æ³•å³ä¸º<u>è¿æ¥ç‚¹</u>ã€‚</li>
<li>åˆ‡å…¥ç‚¹ï¼ˆPointcutï¼‰ï¼šåŒ¹é…è¿æ¥ç‚¹çš„å¼å­ã€‚<br>
åœ¨SpringAOPä¸­ï¼Œä¸€ä¸ªåˆ‡å…¥ç‚¹å¯ä»¥æè¿°ä¸€ä¸ªå…·ä½“æ–¹æ³•ï¼Œä¹Ÿå¯ä¹ŸåŒ¹é…å¤šä¸ªæ–¹æ³•ã€‚
<blockquote>
<p>è¿æ¥ç‚¹èŒƒå›´è¦æ¯”åˆ‡å…¥ç‚¹èŒƒå›´å¤§ï¼Œæ˜¯åˆ‡å…¥ç‚¹çš„æ–¹æ³•ä¹Ÿä¸€å®šæ˜¯è¿æ¥ç‚¹ï¼Œä½†æ˜¯æ˜¯è¿æ¥ç‚¹çš„æ–¹æ³•å°±ä¸ä¸€å®šè¦è¢«å¢å¼ºï¼Œæ‰€ä»¥å¯èƒ½ä¸æ˜¯åˆ‡å…¥ç‚¹ã€‚</p>
</blockquote>
</li>
<li>é€šçŸ¥ï¼ˆAdviceï¼‰ï¼šåœ¨åˆ‡å…¥ç‚¹å¤„æ‰§è¡Œçš„æ“ä½œï¼Œä¹Ÿå°±æ˜¯å…±æ€§åŠŸèƒ½ã€‚<br>
åœ¨SpringAOPä¸­ï¼ŒåŠŸèƒ½æœ€ç»ˆä»¥æ–¹æ³•çš„å½¢å¼å‘ˆç°ã€‚</li>
<li>é€šçŸ¥ç±»ï¼šå®šä¹‰é€šçŸ¥çš„ç±»ã€‚</li>
<li>åˆ‡é¢ï¼ˆAspectï¼‰ï¼šæè¿°é€šçŸ¥ä¸åˆ‡å…¥ç‚¹çš„å¯¹åº”å…³ç³»ã€‚<br>
é€šçŸ¥æ˜¯è¦å¢å¼ºçš„å†…å®¹ï¼Œä¼šæœ‰å¤šä¸ªï¼›åˆ‡å…¥ç‚¹æ˜¯éœ€è¦è¢«å¢å¼ºçš„æ–¹æ³•ï¼Œä¹Ÿä¼šæœ‰å¤šä¸ªã€‚é€šçŸ¥å’Œåˆ‡å…¥ç‚¹çš„å…³ç³»é€šè¿‡åˆ‡é¢æ¥æè¿°ã€‚</li>
<li>ç›®æ ‡å¯¹è±¡ï¼ˆTargetï¼‰ï¼šä¹Ÿå«åŸå§‹å¯¹è±¡ã€‚åŸå§‹åŠŸèƒ½å»æ‰å…±æ€§åŠŸèƒ½å¯¹åº”çš„ç±»äº§ç”Ÿçš„å¯¹è±¡ã€‚å³ï¼Œé…ç½®AOPä¹‹å‰åŸè®¾è®¡çš„å¯¹è±¡ï¼ˆè¦å¢å¼ºçš„å¯¹è±¡ï¼‰ã€‚</li>
<li>ä»£ç†ï¼ˆProxyï¼‰ï¼šé€šè¿‡é€šçŸ¥ç±»æŠŠç›®æ ‡å¯¹è±¡å¢å¼ºåäº§ç”Ÿçš„å¯¹è±¡ã€‚<br>
ç›®æ ‡å¯¹è±¡æ— æ³•ç›´æ¥å®Œæˆå·¥ä½œï¼Œéœ€è¦å¯¹å…¶è¿›è¡ŒåŠŸèƒ½å›å¡«ï¼Œé€šè¿‡åŸå§‹å¯¹è±¡çš„ä»£ç†å¯¹è±¡å®ç°ã€‚</li>
</ul>
<h3 id="æ³¨è§£å¼€å‘-aop">æ³¨è§£å¼€å‘ AOP</h3>
<p>åŸºç¡€é…ç½®ï¼šä½¿ç”¨<a href="#%E6%95%B4%E5%90%88-junit">æ•´åˆ Junit</a>ä¸­çš„é…ç½®ã€‚</p>
<ul>
<li>
<p><code>pom.xml</code>å¯¼å…¥åæ ‡ï¼š</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;org.aspectj&lt;/groupId&gt;
    &lt;artifactId&gt;aspectjweaver&lt;/artifactId&gt;
    &lt;version&gt;1.9.4&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<ul>
<li><code>spring-context</code>ä¸­å·²ç»åŒ…å«äº†<code>spring-aop</code>ï¼Œæ‰€ä»¥ä¸éœ€è¦å†å•ç‹¬å¯¼å…¥<code>spring-aop</code>ã€‚</li>
<li>AspectJæ˜¯AOPæ€æƒ³çš„ä¸€ä¸ªå…·ä½“å®ç°ï¼ŒAspectJæ¯”èµ·Springçš„AOPå®ç°æ¥è¯´ï¼Œæ›´åŠ å¥½ç”¨ã€‚</li>
</ul>
</li>
<li>
<p>åˆ›å»ºé€šçŸ¥ç±»<code>UserDaoAdvice</code>ï¼š</p>
<pre><code class="language-java">package com.linner.aop;

import org.aspectj.lang.annotation.*;
import org.springframework.stereotype.Component;

@Component
@Aspect
public class UserDaoAdvice {

    @Pointcut(&quot;execution(* com.linner.dao.UserDao.*(..))&quot;)
    private void pt() {}

    @Before(&quot;pt()&quot;)
    public void method() {
        System.out.println(&quot;Before...&quot;);
    }

}
</code></pre>
<ul>
<li><code>@Aspect</code>ï¼šè®¾ç½®å½“å‰ç±»ä¸ºAOPåˆ‡é¢ç±»ã€‚</li>
<li><code>@Pointcut</code>ï¼šè®¾ç½®åˆ‡å…¥ç‚¹æ–¹æ³•ã€‚åˆ‡å…¥ç‚¹å®šä¹‰éœ€è¦ä¸€ä¸ªä¸å…·æœ‰å®é™…æ„ä¹‰çš„æ–¹æ³•ï¼ˆæ— å‚ã€æ— è¿”å›å€¼ã€ç©ºæ–¹æ³•ä½“ï¼‰ã€‚å³<code>UserDaoAdvice</code>ä¸­çš„<code>pt()</code>ã€‚<br>
<code>@Pointcut</code>ä¸­çš„<code>execution()</code>ç”¨æ¥å®šä¹‰åˆ‡å…¥ç‚¹ã€‚</li>
<li><code>@Before</code>ï¼šè®¾ç½®åˆ‡é¢ã€‚å³è®¾ç½®å½“å‰é€šçŸ¥æ–¹æ³•åœ¨åŸå§‹åˆ‡å…¥ç‚¹æ–¹æ³•å‰è¿è¡Œã€‚<br>
åˆ‡å…¥ç‚¹å®šä¹‰ä½œä¸º<code>@Before</code>çš„å‚æ•°ã€‚</li>
</ul>
</li>
<li>
<p>åœ¨<code>SpringConfig</code>åŠ å…¥<code>@EnableAspectJAutoProxy</code>æ³¨è§£ï¼š</p>
<pre><code class="language-java">import org.springframework.context.annotation.*;

@Configuration
@ComponentScan(&quot;com.linner&quot;)
@EnableAspectJAutoProxy
@PropertySource(&quot;classpath:jdbc.properties&quot;)
@Import({JdbcConfig.class, MybatisConfig.class})
public class SpringConfig {
}
</code></pre>
</li>
</ul>
<h3 id="aop-åˆ‡å…¥ç‚¹è¡¨è¾¾å¼">AOP åˆ‡å…¥ç‚¹è¡¨è¾¾å¼</h3>
<p>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼æ˜¯å¯¹è¦è¿›è¡Œå¢å¼ºçš„æ–¹æ³•çš„æè¿°æ–¹å¼ã€‚åˆ‡å…¥ç‚¹è¡¨è¾¾å¼çš„ä¸€èˆ¬å½¢å¼å¦‚ä¸‹ï¼š</p>
<pre><code class="language-java">åŠ¨ä½œå…³é”®å­—(è®¿é—®ä¿®é¥°ç¬¦ è¿”å›å€¼ç±»å‹ åŒ…å.ç±»å.æ–¹æ³•å(å‚æ•°ç±»å‹åˆ—è¡¨) å¼‚å¸¸å)
</code></pre>
<ul>
<li>ç”±äºé€šå¸¸éƒ½æ˜¯å¯¹<code>public</code>æ–¹æ³•è¿›è¡Œå®šä¹‰ï¼Œè€Œ<code>public</code>æ˜¯é»˜è®¤çš„ï¼Œæ‰€ä»¥å¯ä»¥çœç•¥ã€‚</li>
<li>åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å®šä¹‰çš„ç±»å¯ä»¥æ˜¯æ¥å£ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ç°ç±»ã€‚</li>
<li>AOPæ˜¯åœ¨Springä¸­è¿è¡Œçš„ï¼Œå¾ˆæ˜¾ç„¶åˆ‡å…¥ç‚¹è¡¨è¾¾å¼å®šä¹‰çš„ç±»å¿…é¡»å­˜åœ¨IOCå®¹å™¨ä¸­ã€‚</li>
<li>å¦‚æœåŒ¹é…æ— å‚æ–¹æ³•ï¼Œç›´æ¥çœç•¥å‚æ•°ã€‚</li>
</ul>
<p>Exampleï¼š</p>
<pre><code class="language-java">execution(void com.linner.dao.UserDao.delete(int))
</code></pre>
<h4 id="åˆ‡å…¥ç‚¹è¡¨è¾¾å¼é€šé…ç¬¦">åˆ‡å…¥ç‚¹è¡¨è¾¾å¼é€šé…ç¬¦</h4>
<ul>
<li>
<p><code>*</code>ï¼šåŒ¹é…ä»»æ„å•ä¸ªç‹¬ç«‹çš„ä»»æ„ç¬¦å·ã€‚<br>
å¯ä»¥ç‹¬ç«‹å‡ºç°ï¼ŒåŒ¹é…ä»»æ„è¿”å›å€¼ç±»å‹ã€å•ä¸ªåŒ…åï¼ˆä¸èƒ½ç”¨åšåŒ¹é…å®Œæ•´åŒ…åï¼‰ã€ç±»åã€æ–¹æ³•åæˆ–å•ä¸ªå‚æ•°ç±»å‹ï¼ˆå³åŒ¹é…å•ä¸ªå•è¯ï¼‰ï¼›<br>
ä¹Ÿå¯ä»¥ä½œä¸ºå‰ç¼€æˆ–è€…åç¼€çš„åŒ¹é…ç¬¦å‡ºç°ã€‚</p>
<p>å¦‚ï¼š</p>
<pre><code class="language-java">executionï¼ˆ* com.linner.*.UserService.find*(*))
</code></pre>
<p>åŒ¹é…<code>com.linner</code>åŒ…ä¸‹çš„ä»»æ„åŒ…ä¸­çš„<code>UserService</code>ç±»æˆ–æ¥å£ä¸­ï¼Œæ‰€æœ‰ä»¥<code>find</code>å¼€å¤´çš„ã€å¸¦æœ‰ä¸€ä¸ªå‚æ•°çš„ã€ä»»æ„è¿”å›å€¼ç±»å‹çš„æ–¹æ³•ã€‚</p>
</li>
<li>
<p><code>..</code>ï¼šåŒ¹é…å¤šä¸ªè¿ç»­çš„ä»»æ„ç¬¦å·ã€‚<br>
å¯ä»¥ç‹¬ç«‹å‡ºç°ï¼Œå¸¸ç”¨äºç®€åŒ–åŒ…åä¸å‚æ•°çš„ä¹¦å†™ã€‚</p>
<pre><code class="language-java">executionï¼ˆ* com..UserService.findById(..))
</code></pre>
<p>åŒ¹é…<code>com</code>åŒ…ä¸‹çš„ä»»æ„åŒ…ä¸­çš„<code>UserService</code>ç±»æˆ–æ¥å£ä¸­æ‰€æœ‰åç§°ä¸º<code>findById</code>çš„ï¼ˆå‚æ•°çš„æ•°é‡ã€ç±»å‹ä»»æ„ï¼Œè¿”å›å€¼ä»»æ„ï¼‰æ–¹æ³•ã€‚</p>
</li>
</ul>
<ul>
<li>
<p><code>+</code>ï¼šä¸“ç”¨äºåŒ¹é…å­ç±»ç±»å‹ã€‚</p>
<pre><code class="language-java">execution(* *..*Service+.*(..))
</code></pre>
<p>è¿™ä¸ªä½¿ç”¨ç‡è¾ƒä½ã€‚<code>*Service+</code>ï¼Œè¡¨ç¤ºæ‰€æœ‰ä»¥Serviceç»“å°¾çš„æ¥å£çš„å­ç±»ã€‚</p>
</li>
</ul>
<p>ä¹¦å†™æŠ€å·§ï¼ˆæ‰€æœ‰ä»£ç æŒ‰ç…§æ ‡å‡†è§„èŒƒå¼€å‘ï¼Œå¦åˆ™ä»¥ä¸‹æŠ€å·§å…¨éƒ¨å¤±æ•ˆï¼‰ï¼š</p>
<ul>
<li>æè¿°åˆ‡å…¥ç‚¹é€šå¸¸<u>æè¿°æ¥å£</u>ï¼Œè€Œä¸æè¿°å®ç°ç±»ï¼Œå¦‚æœæè¿°åˆ°å®ç°ç±»ï¼Œå°±å‡ºç°è€¦åˆäº†ã€‚</li>
<li>è®¿é—®æ§åˆ¶ä¿®é¥°ç¬¦é’ˆå¯¹æ¥å£å¼€å‘å‡é‡‡ç”¨<code>public</code>æè¿°ï¼ˆç®€åŒ–ä¹¦å†™ï¼‰ã€‚</li>
<li>è¿”å›å€¼ç±»å‹å¯¹äº<u>å¢åˆ æ”¹æ–¹æ³•ä½¿ç”¨ç²¾å‡†ç±»å‹</u>åŠ é€ŸåŒ¹é…ï¼Œå¯¹äºæŸ¥è¯¢ç±»ä½¿ç”¨<code>*</code>é€šé…å¿«é€Ÿæè¿°ã€‚</li>
<li>åŒ…åä¹¦å†™å°½é‡ä¸ä½¿ç”¨<code>..</code>åŒ¹é…ï¼Œæ•ˆç‡è¿‡ä½ï¼Œå¸¸ç”¨<code>*</code>åšå•ä¸ªåŒ…æè¿°åŒ¹é…ï¼Œæˆ–ç²¾å‡†åŒ¹é…ã€‚</li>
<li>æ¥å£å/ç±»åä¹¦å†™åç§°ä¸æ¨¡å—ç›¸å…³çš„é‡‡ç”¨<code>*</code>åŒ¹é…ï¼Œä¾‹å¦‚<code>UserService</code>ä¹¦å†™æˆ<code>*Service</code>ï¼Œç»‘å®šä¸šåŠ¡å±‚æ¥å£åã€‚</li>
<li>æ–¹æ³•åä¹¦å†™ä»¥åŠ¨è¯è¿›è¡Œç²¾å‡†åŒ¹é…ï¼Œåè¯é‡‡ç”¨<code>*</code>åŒ¹é…ï¼Œä¾‹å¦‚<code>getById</code>ä¹¦å†™æˆ<code>getBy*</code>ï¼Œ<code>selectAll</code>ä¹¦å†™æˆ<code>selectAll</code>ã€‚</li>
<li>å‚æ•°è§„åˆ™è¾ƒä¸ºå¤æ‚ï¼Œæ ¹æ®ä¸šåŠ¡æ–¹æ³•çµæ´»è°ƒæ•´ã€‚</li>
<li>é€šå¸¸ä¸ä½¿ç”¨å¼‚å¸¸ä½œä¸ºåŒ¹é…è§„åˆ™ã€‚</li>
</ul>
<h4 id="é€šçŸ¥ç±»å‹">é€šçŸ¥ç±»å‹</h4>
<p>AOPé€šçŸ¥æè¿°äº†æŠ½å–çš„å…±æ€§åŠŸèƒ½ï¼Œæ ¹æ®å…±æ€§åŠŸèƒ½æŠ½å–çš„ä½ç½®ä¸åŒï¼Œæœ€ç»ˆè¿è¡Œä»£ç æ—¶è¦å°†å…¶åŠ å…¥åˆ°åˆç†çš„ä½ç½®ã€‚</p>
<p>AspactJæä¾›äº†5ç§é€šçŸ¥ç±»å‹ï¼š</p>
<ul>
<li>å‰ç½®é€šçŸ¥</li>
<li>åç½®é€šçŸ¥</li>
<li>ç¯ç»•é€šçŸ¥</li>
<li>è¿”å›åé€šçŸ¥</li>
<li>æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥</li>
</ul>
<pre><code class="language-java">// ä»£ç 1
try {
    // ä»£ç 2
    // åŸå§‹çš„ä¸šåŠ¡æ“ä½œ
    // ä»£ç 3
} catch (Exception e) {
    // ä»£ç 4
}
// ä»£ç 5
</code></pre>
<p>å…¶ä¸­ï¼š</p>
<ul>
<li>å‰ç½®é€šçŸ¥ï¼šä»£ç 1å’Œä»£ç 2</li>
<li>è¿”å›åé€šçŸ¥ï¼šä»£ç 3</li>
<li>æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥ï¼šä»£ç 4</li>
<li>åç½®é€šçŸ¥:ä»£ç 5</li>
<li>ç¯ç»•é€šçŸ¥ï¼šä¸Šè¿°æ•´ä¸ªä»£ç å—</li>
</ul>
<p>é€šçŸ¥æ–¹æ³•çš„æ–¹æ³•åç§°æ²¡æœ‰é™åˆ¶ï¼Œåªéœ€åœ¨æ–¹æ³•çš„ä¸Šç«¯ä½¿ç”¨æ³¨è§£å®šä¹‰å³å¯ã€‚å„é€šçŸ¥ç±»å‹çš„æ³¨è§£å¦‚ä¸‹ï¼š</p>
<ul>
<li>å‰ç½®é€šçŸ¥ï¼š<code>@Before</code></li>
<li>åç½®é€šçŸ¥ï¼š<code>@After</code></li>
<li>ç¯ç»•é€šçŸ¥ï¼š<code>@Around</code></li>
<li>è¿”å›åé€šçŸ¥ï¼š<code>@AfterReturning</code></li>
<li>æŠ›å‡ºå¼‚å¸¸åé€šçŸ¥ï¼š<code>@AfterThrowing</code></li>
</ul>
<p>è¿™äº›æ³¨è§£çš„ä½¿ç”¨æ–¹å¼éƒ½æ˜¯ä¸€æ ·çš„ã€‚åœ¨å¯¹åº”çš„æ–¹æ³•ä¸Šå®šä¹‰ï¼Œå¹¶ä¸”ä¼ å…¥åˆ‡å…¥ç‚¹ï¼ˆå‡½æ•°å½¢å¼ï¼‰ã€‚å¦‚ï¼š<code>@Around(&quot;pt()&quot;)</code>ã€‚</p>
<h5 id="å‰ç½®é€šçŸ¥å’Œåç½®é€šçŸ¥çš„ä½¿ç”¨">å‰ç½®é€šçŸ¥å’Œåç½®é€šçŸ¥çš„ä½¿ç”¨</h5>
<p>å‰ç½®é€šçŸ¥å’Œåç½®é€šçŸ¥çš„ä½¿ç”¨æ–¹å¼ä¸€æ ·ï¼š</p>
<pre><code class="language-java">@Component
@Aspect
public class UserDaoAdvice {
    @Pointcut(&quot;execution(* com.linner.dao.UserDao.*(..))&quot;)
    private void pt() {}

    @Before(&quot;pt()&quot;)
    public void before() {
        System.out.println(&quot;Before...&quot;);
    }

    @After(&quot;pt()&quot;)
    public void after() {
        System.out.println(&quot;After...&quot;);
    }
}
</code></pre>
<h5 id="ç¯ç»•é€šçŸ¥çš„ä½¿ç”¨">ç¯ç»•é€šçŸ¥çš„ä½¿ç”¨</h5>
<pre><code class="language-java">import org.aspectj.lang.ProceedingJoinPoint;

@Component
@Aspect
public class UserDaoAdvice {
    @Pointcut(&quot;execution(* com.linner.dao.UserDao.findById(int))&quot;)
    private void pt() {}

    @Around(&quot;pt()&quot;)
    public Object around(ProceedingJoinPoint pjp) throws Throwable {
        System.out.println(&quot;Before...&quot;);
        Object ret = pjp.proceed();
        System.out.println(&quot;After....&quot;);
        return ret;
    }
}
</code></pre>
<p>ç¯ç»•é€šçŸ¥å¿…é¡»ä¼ å…¥ä¸€ä¸ª<code>ProceedingJoinPoint</code>å‚æ•°ã€‚ä½¿ç”¨<code>pjp.proceed()</code>æ‰å¯ä»¥åœ¨ç¯ç»•é€šçŸ¥ä¸­æ‰ç”¨åŸå§‹æ–¹æ³•ã€‚å¹¶ä¸”<code>proceed()</code>å¯ä»¥è·å–åˆ°åŸå§‹æ–¹æ³•çš„è¿”å›å€¼ã€‚</p>
<p>å¦‚æœä¹Ÿæƒ³è®©ä»£ç†åçš„æ–¹æ³•è¿”å›è·ŸåŸå§‹æ–¹æ³•ä¸€æ ·çš„å€¼ã€‚é‚£ä¹ˆå¿…é¡»å®šä¹‰ç¯ç»•æ–¹æ³•çš„è¿”å›å€¼ç±»å‹ï¼Œå¹¶ä¸”ä½¿ç”¨<code>proceed()</code>è·å–åŸå§‹æ–¹æ³•çš„è¿”å›å€¼å¹¶è¿”å›ã€‚</p>
<p>ç¯ç»•é€šçŸ¥æ¯”è¾ƒçµæ´»ï¼Œå¯ä»¥å°†å…¶å®šä¹‰æˆå…¶ä»–ç±»å‹çš„é€šçŸ¥ï¼Œå¹¶ä¸”å¯ä»¥åšåˆ°å…¶ä»–é€šçŸ¥åšä¸åˆ°çš„äº‹æƒ…ã€‚ä¾‹å¦‚å¾ªç¯è°ƒç”¨åŸå§‹æ–¹æ³•ç­‰ã€‚</p>
<p>ç¯ç»•é€šçŸ¥éœ€è¦æŠ›å‡ºå¼‚å¸¸æ˜¯å› ä¸ºã€‚åŸå§‹æ–¹æ³•æœ‰å¯èƒ½ä¼šå‡ºç°å¼‚å¸¸ï¼Œå¹¶ä¸”åŸå§‹æ–¹æ³•çš„å¼‚å¸¸å¹¶ä¸ç¡®å®šã€‚æ‰€ä»¥ä¸ºäº†æé«˜é€šç”¨æ€§ï¼Œç¯ç»•é€šçŸ¥é»˜è®¤æŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p>å¦‚æœç¯ç»•æ–¹æ³•å®šä¹‰çš„æ˜¯<code>void</code>ç±»å‹ï¼Œå¹¶ä¸”åŸå§‹æ–¹æ³•æœ‰è¿”å›å€¼ã€‚å¦‚æœæ­¤æ—¶åœ¨ç¯ç»•é€šçŸ¥ä¸­æ²¡æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆåœ¨æ‰ç”¨ä»£ç†åçš„æ–¹æ³•åï¼Œè¿”å›çš„æ˜¯<code>null</code>ã€‚</p>
<h5 id="è¿”å›åé€šçŸ¥çš„ä½¿ç”¨">è¿”å›åé€šçŸ¥çš„ä½¿ç”¨</h5>
<pre><code class="language-java">@Component
@Aspect
public class UserDaoAdvice {
    @Pointcut(&quot;execution(* com.linner.dao.UserDao.findById(int))&quot;)
    private void pt() {}

    @AfterReturning(&quot;pt()&quot;)
    public void afterReturning() {
        System.out.println(&quot;After Returning...&quot;);
    }
}
</code></pre>
<blockquote>
<p>æ³¨æ„ï¼šè¿”å›åé€šçŸ¥æ˜¯éœ€è¦åœ¨åŸå§‹æ–¹æ³•æ­£å¸¸æ‰§è¡Œåæ‰ä¼šè¢«æ‰§è¡Œï¼Œå¦‚æœåŸå§‹æ–¹æ³•æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å‡ºç°äº†å¼‚å¸¸ï¼Œé‚£ä¹ˆè¿”å›åé€šçŸ¥ä¸ä¼šè¢«æ‰§è¡Œã€‚<br>
åç½®é€šçŸ¥æ˜¯ä¸ç®¡åŸå§‹æ–¹æ³•æœ‰æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸éƒ½ä¼šè¢«æ‰§è¡Œã€‚</p>
</blockquote>
<h5 id="å¼‚å¸¸åé€šçŸ¥">å¼‚å¸¸åé€šçŸ¥</h5>
<pre><code class="language-java">@Component
@Aspect
public class UserDaoAdvice {
    @Pointcut(&quot;execution(* com.linner.service.UserService.findAll())&quot;)
    private void pt() {}

    @AfterThrowing(&quot;pt()&quot;)
    public void afterThrowing() {
        System.out.println(&quot;After Throwing...&quot;);
    }
}
</code></pre>
<p>åœ¨<code>UserServiceImpl.findAll()</code>ä¸­æ¨¡æ‹Ÿé”™è¯¯å³å¯è§¦å‘ã€‚ä¾‹å¦‚ä½¿ç”¨<code>int a = 1/0;</code>æ¨¡æ‹Ÿé”™è¯¯ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šå¼‚å¸¸åé€šçŸ¥æ˜¯éœ€è¦åŸå§‹æ–¹æ³•æŠ›å‡ºå¼‚å¸¸ã€‚å¦‚æœæ²¡æœ‰æŠ›å¼‚å¸¸ï¼Œå¼‚å¸¸åé€šçŸ¥å°†ä¸ä¼šè¢«æ‰§è¡Œã€‚</p>
</blockquote>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">ä¸‹ä¸€ç¯‡</div>
                <a href="https://linna-cy.github.io/old-blog/Ajax å‰åç«¯äº¤äº’/" class="post-title gt-a-link">
                    Ajax å‰åç«¯äº¤äº’
                </a>
            </div>
        

        

        

        <!-- <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first"></div>
    <div class="social-container">
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        
    </div>
    <div>
        Theme <a href="https://github.com/imhanjie/gridea-theme-pure" target="_blank">Pure</a>, Powered by <a
                href="https://gridea.dev" target="_blank">Gridea</a> | <a href="https://linna-cy.github.io/old-blog/atom.xml" target="_blank">RSS</a>
    </div>
</div>
 -->
    </div>
</div>
<script>
  hljs.highlightAll();
  // å¼€å¯ä»£ç é«˜äº®
  // hljs.initHighlightingOnLoad();
  // è¡Œå·æ˜¾ç¤º
  // hljs.initLineNumbersOnLoad({ singleLine:true });
  // let tocDiv = document.getElementById('toc-div');
  // let toc = document.querySelector('#toc-div .markdownIt-TOC');
  // if (toc === null || toc === undefined) {
  //   tocDiv.style.display = 'none';
  // }

  setCodeAllNum();
</script>
</body>
</html>
