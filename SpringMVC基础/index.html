<html>
<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>SpringMVC åŸºç¡€ | Linner&#39;s Blog</title>

<!-- ä»£ç é«˜äº®ï¼š -->
<!-- <link rel="stylesheet"
      href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/styles/default.min.css"> -->
<!-- <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.6.0/highlight.min.js"></script> -->

<link rel="shortcut icon" href="https://linna-cy.github.io/old-blog/favicon.ico?v=1684376365462">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://linna-cy.github.io/old-blog/styles/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css">

<link rel="stylesheet" href="https://linna-cy.github.io/old-blog/media/icons/iconfont.css">

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.12.0/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcdn.net/ajax/libs/highlight.js/9.12.0/languages//dart.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script>
<!-- DEMO JS -->
<!-- <script src="media/scripts/index.js"></script> -->



    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
    
    <script>
      // è®¡ç®—ä»£ç è¡Œæ•°
      let pxToNumber = function(px) {
        // let num = Number(px.replace("px", ""));
        let num = parseFloat(px);

        return num;
      };
      let getRow = function(elem) {
          let style = window.getComputedStyle(elem, null);
          // let lineHeight = style.lineHeight === "normal" ? style.fontSize : style.lineHeight;
          let lineHeight = style.lineHeight;

          let height = style.height;
          let padding = style.padding;
          // let isiOS = /(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent);
          let row = (pxToNumber(height)-pxToNumber(padding)) / pxToNumber(lineHeight);
          // if (isiOS) {
          //   row = pxToNumber(height) / pxToNumber(lineHeight);
          //   alert('ios!');
          // }
          // else {
          //   row = (pxToNumber(height)-pxToNumber(padding)) / pxToNumber(lineHeight);
          // }
          return parseInt(row);
      };
      
      // è·å–è¡Œå·æ–‡å­—
      let getRowNumString = function (row) {
          let num_str = new String('');
          for (let i = 1; i <= row; i++) {
              let num = new String(i.toString() + '\n');
              num_str = num_str + num;
          }
          return num_str;
      }

      // æŒ‡å®šä»£ç å—å¼€å¯ä»£ç è¡Œå·
      let setCodeNum = function(codeElem) {
          let pre = codeElem.parentElement;
          let span = document.createElement('span');
          span.innerText = getRowNumString(getRow(codeElem));
          let codeElemStyle = window.getComputedStyle(codeElem, null);
          span.style.display = 'inline-block';
          span.style.backgroundColor = "rgba(255,255,255,0)";
          span.style.color = 'rgba(255,255,255,0.4)';
          span.style.margin = 0;
          span.style.padding = 0;
          // span.style.borderRight = '1px #fff solid';
          span.style.paddingRight = 4;
          span.style.userSelect = 'none';
          span.style.textAlign = 'center';
          span.className = 'code-num';

          span.style.font = codeElemStyle.font;
          // span.style.height = codeElemStyle.height;
          span.style.paddingLeft = codeElemStyle.paddingRight;
          span.style.borderTopLeftRadius = codeElemStyle.borderTopRightRadius;
          span.style.borderBottomLeftRadius = codeElemStyle.borderBottomRightRadius;
          span.style.paddingTop = codeElemStyle.paddingTop;

          pre.style.display = 'flex';
          pre.style.overflowX = 'hidden';

          codeElem.style.borderTopLeftRadius = 0;
          codeElem.style.borderBottomLeftRadius = 0;
          codeElem.style.marginLeft = 0;
          codeElem.style.paddingLeft = span.style.paddingRight;
          codeElem.style.overflowX = 'auto';
          codeElem.style.display = 'inline-block';
          pre.insertBefore(span, codeElem);
      }

      // è®¾ç½®ä»£ç å—å¼€å¯ä»£ç è¡Œå·
      let setCodeAllNum = function() {
          let codeElems = document.querySelectorAll('pre > code');
          for (let i = 0; i < codeElems.length; i++) {
              codeElems[i].parentElement.className = 'code-pre';
              setCodeNum(codeElems[i]);
          }
      }
    </script>
</head>
<body>
<div class="main gt-bg-theme-color-first post-main">
    <!-- <div class="top">
    <span id="go-top" class="iconfont icon-shangxiazuoyouTriangle17"></span>
</div>
<script>
    let goTop = document.getElementById("go-top");
    let goTopDisplay = function () {
        let height = document.documentElement.scrollTop 
                    || document.body.scrollTop
        if (height >= (document.body.clientHeight || document.documentElement.clientHeight) * 0.8) {
            goTop.style.display = "block"
        } else {
            goTop.style.display = "none"
        }
        goTop.focus();
    }
    window.onscroll = goTopDisplay;
    window.onload = goTopDisplay;
    window.onresize = goTopDisplay;
    goTop.onclick = function () {
        window.scrollTo({
            top: 0,
            behavior: "smooth"
        })
    }
</script> -->
    <nav class="navbar navbar-expand-lg" id="navbar">
    <a class="navbar-brand" href="/">
        <!-- <img class="user-avatar" src="/images/avatar.png" alt="å¤´åƒ"> -->
        <img class="site-icon" src="https://linna-cy.github.io/old-blog/images/favicon.png" alt="icon">
        <div class="site-name gt-c-content-color-first">
            Linner&#39;s Blog
        </div>
    </a>

    <div id="to-top" style="flex: 1; height: 100%;"></div>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" id="changeNavbar">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
            <div class="nav-item">
                
                <a href="/" class="menu gt-a-link">
                    <span class="iconfont icon-zhuye"></span>
                    é¦–é¡µ
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/archives" class="menu gt-a-link">
                    <span class="iconfont icon-guidang"></span>
                    å½’æ¡£
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/tags" class="menu gt-a-link">
                    <span class="iconfont icon-biaoqian"></span>
                    æ ‡ç­¾
                </a>
                
            </div>
            
            <!-- <div class="nav-item" id="toc">
                <a class="menu gt-a-link">
                    <span class="iconfont icon-mulu"></span>
                    ç›®å½•
                </a>
            </div> -->
            <!-- <div class="nav-item" id="to-top">
                <a href="#top" class="menu gt-a-link">
                    <span class="iconfont icon-fanhuidingbu"></span>
                    è¿”å›é¡¶éƒ¨
                </a>
            </div> -->
        </div>
        <!-- æœç´¢æ¡† -->
        <!-- <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1684376365462"
                action="/search/">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="æœç´¢æ–‡ç« " />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 7px; left: 10px;"></i>
            </form>
        </div> -->
        <div class="search-box">
            <i class="fas fa-search gt-c-content-color-first"></i>
            <form id="gridea-search-form" data-update="1684376365462"
                action="/search/">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="æœç´¢æ–‡ç« " />
            </form>
        </div>
    </div>
</nav>
<script>
    /* ç§»åŠ¨ç«¯å¯¼èˆªæ å±•å¼€/æ”¶èµ·åˆ‡æ¢ */
    document.getElementById('changeNavbar').onclick = () => {
        var element = document.getElementById('navbarSupportedContent');
        if (element.style.display === 'none' || element.style.display === '') {
            element.style.display = 'flex';
        } else {
            element.style.display = 'none';
        }
    }

    // è‡ªåŠ¨æ˜¾ç¤ºç›®å½•é¡¹
    // let toc = document.getElementById('toc');
    // let isPost = document.getElementById('isPost');
    // if (isPost == null) {
    //     toc.style.display = 'none';
    // }
    // else {
    //     toc.style.display = 'block';
    // }

    // toc.onclick = () => {

    // }

    // ç‚¹å‡»å¯¼èˆªæ è½¬åˆ°é¡µé¢é¡¶éƒ¨
    let toTop = document.getElementById("to-top");
    toTop.onclick = function () {
        window.scrollTo({
            top: 0,
            behavior: "smooth"
        })
    }

    // let goTopDisplay = function () {
    //     let height = document.documentElement.scrollTop 
    //                 || document.body.scrollTop
    //     if (height >= (document.body.clientHeight || document.documentElement.clientHeight) * 0.8) {
    //         navbar.style.position = "fixed !important"
    //     } else {
    //         navbar.style.position = "static !important"
    //     }
    // }
    // window.onscroll = goTopDisplay;
    // window.onload = goTopDisplay;
    // window.onresize = goTopDisplay;
</script>


    <div id="background" class="background" style="background-image: url(https://gitcode.net/qq_22182345/myfiles/-/raw/master/img/4kcityscape.jpg);">
        <div class="post-header">
          <h2 class="post-title">
            SpringMVC åŸºç¡€
          </h2>
          <div class="post-info">
            <span class="meta-item pc-show">
              <!-- icon -->
              <span class="language" data-lan="publish">å‘å¸ƒäº</span>
              <span class="publish-time">2023-02-20</span>
              <span class="post-meta-divider pc-show">|</span>
            </span>
            
            <span class="meta-item">
              <!-- icon -->
              <span class="pc-show language" data-lan="category-in">æ ‡ç­¾:</span>
               
              <a href="https://linna-cy.github.io/old-blog/boslKuyhk/"> <span>#Spring </span></a>  
              <a href="https://linna-cy.github.io/old-blog/MrL8MvLdJ_/"> <span>#Java </span></a>  
              <a href="https://linna-cy.github.io/old-blog/vvCs3Js_LL/"> <span>#JavaWeb </span></a>  
              <a href="https://linna-cy.github.io/old-blog/18uPZhlPeC/">
                <span>#Maven </span>
              </a>
               
            </span>
            <span class="post-meta-divider">|</span>
            
            <span class="meta-item">
              <!-- icon -->
              <span
                >22<span class="language" data-lan="minute"
                  >åˆ†é’Ÿ</span
                ></span
              >
            </span>
            <span class="meta-item">
              <span class="post-meta-divider">|</span>
              <!-- icon -->
              <span
                >4571<span class="pc-show language" data-lan="words"
                  >å­—æ•°</span
                ></span
              >
            </span>
          </div>
        </div>
    </div>

    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <div class="post-content">
                    <!-- <div id="toc-div">
                        <h1>ç›®å½•</h1>
                        <ul class="markdownIt-TOC">
<li><a href="#%E7%AE%80%E4%BB%8B">ç®€ä»‹</a>
<ul>
<li><a href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">é¡¹ç›®ç»“æ„åŠåŸºç¡€ç¯å¢ƒé…ç½®</a></li>
</ul>
</li>
<li><a href="#%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83">é¡¹ç›®ç¯å¢ƒ</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E7%B1%BB">é…ç½®ç±»</a></li>
<li><a href="#springmvc-%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B">SpringMVC å·¥ä½œæµç¨‹</a></li>
<li><a href="#%E8%AF%B7%E6%B1%82%E4%B8%8E%E5%93%8D%E5%BA%94">è¯·æ±‚ä¸å“åº”</a>
<ul>
<li><a href="#%E6%8E%A5%E6%94%B6-url-%E5%8F%82%E6%95%B0">æ¥æ”¶ URL å‚æ•°</a>
<ul>
<li><a href="#%E6%99%AE%E9%80%9A%E5%8F%82%E6%95%B0">æ™®é€šå‚æ•°</a></li>
<li><a href="#pojo%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0">POJOç±»å‹å‚æ•°</a></li>
<li><a href="#%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0">æ•°ç»„ã€é›†åˆç±»å‹å‚æ•°</a></li>
<li><a href="#%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F">æ—¥æœŸæ ¼å¼</a></li>
</ul>
</li>
<li><a href="#json-%E6%95%B0%E6%8D%AE%E5%8F%82%E6%95%B0">JSON æ•°æ®å‚æ•°</a></li>
<li><a href="#%E5%93%8D%E5%BA%94-json-%E6%95%B0%E6%8D%AE">å“åº” JSON æ•°æ®</a></li>
<li><a href="#rest-%E9%A3%8E%E6%A0%BC">REST é£æ ¼</a>
<ul>
<li><a href="#restful-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91">RESTful å¿«é€Ÿå¼€å‘</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%8B%A6%E6%88%AA%E5%99%A8">æ‹¦æˆªå™¨</a>
<ul>
<li><a href="#%E6%8B%A6%E6%88%AA%E5%99%A8%E9%85%8D%E7%BD%AE%E4%B9%A6%E5%86%99%E7%AE%80%E5%8C%96">æ‹¦æˆªå™¨é…ç½®ä¹¦å†™ç®€åŒ–</a></li>
<li><a href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90">é™æ€èµ„æº</a></li>
</ul>
</li>
</ul>

                        <hr>
                    </div> -->
                    
                        <h1>ç›®å½•</h1>
                        <ul class="markdownIt-TOC">
<li><a href="#%E7%AE%80%E4%BB%8B">ç®€ä»‹</a>
<ul>
<li><a href="#%E9%A1%B9%E7%9B%AE%E7%BB%93%E6%9E%84%E5%8F%8A%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE">é¡¹ç›®ç»“æ„åŠåŸºç¡€ç¯å¢ƒé…ç½®</a></li>
</ul>
</li>
<li><a href="#%E9%A1%B9%E7%9B%AE%E7%8E%AF%E5%A2%83">é¡¹ç›®ç¯å¢ƒ</a></li>
<li><a href="#%E9%85%8D%E7%BD%AE%E7%B1%BB">é…ç½®ç±»</a></li>
<li><a href="#springmvc-%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B">SpringMVC å·¥ä½œæµç¨‹</a></li>
<li><a href="#%E8%AF%B7%E6%B1%82%E4%B8%8E%E5%93%8D%E5%BA%94">è¯·æ±‚ä¸å“åº”</a>
<ul>
<li><a href="#%E6%8E%A5%E6%94%B6-url-%E5%8F%82%E6%95%B0">æ¥æ”¶ URL å‚æ•°</a>
<ul>
<li><a href="#%E6%99%AE%E9%80%9A%E5%8F%82%E6%95%B0">æ™®é€šå‚æ•°</a></li>
<li><a href="#pojo%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0">POJOç±»å‹å‚æ•°</a></li>
<li><a href="#%E6%95%B0%E7%BB%84-%E9%9B%86%E5%90%88%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0">æ•°ç»„ã€é›†åˆç±»å‹å‚æ•°</a></li>
<li><a href="#%E6%97%A5%E6%9C%9F%E6%A0%BC%E5%BC%8F">æ—¥æœŸæ ¼å¼</a></li>
</ul>
</li>
<li><a href="#json-%E6%95%B0%E6%8D%AE%E5%8F%82%E6%95%B0">JSON æ•°æ®å‚æ•°</a></li>
<li><a href="#%E5%93%8D%E5%BA%94-json-%E6%95%B0%E6%8D%AE">å“åº” JSON æ•°æ®</a></li>
<li><a href="#rest-%E9%A3%8E%E6%A0%BC">REST é£æ ¼</a>
<ul>
<li><a href="#restful-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%8F%91">RESTful å¿«é€Ÿå¼€å‘</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E6%8B%A6%E6%88%AA%E5%99%A8">æ‹¦æˆªå™¨</a>
<ul>
<li><a href="#%E6%8B%A6%E6%88%AA%E5%99%A8%E9%85%8D%E7%BD%AE%E4%B9%A6%E5%86%99%E7%AE%80%E5%8C%96">æ‹¦æˆªå™¨é…ç½®ä¹¦å†™ç®€åŒ–</a></li>
<li><a href="#%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90">é™æ€èµ„æº</a></li>
</ul>
</li>
</ul>

                        <hr>
                    
                    <h1 id="ç®€ä»‹">ç®€ä»‹</h1>
<p>SpringMVCæ˜¯Springä¸‹çš„ä¸€ä¸ªç”¨äºWebè¡¨ç°å±‚å¼€å‘çš„æŠ€æœ¯ã€‚ç›¸æ¯”Servletï¼ŒSpringMVCæ›´åŠ é«˜æ•ˆå¿«æ·ã€‚</p>
<p>SpringMVCæµç¨‹å¦‚ä¸‹ï¼š</p>
<ul>
<li>æµè§ˆå™¨å‘é€è¯·æ±‚åˆ°TomcatæœåŠ¡å™¨ï¼›</li>
<li>Tomcatæ¥æ”¶è¯·æ±‚åï¼Œå°†è¯·æ±‚äº¤ç»™SpringMVCä¸­çš„<code>DispatcherServlet</code>ï¼ˆå‰ç«¯æ§åˆ¶å™¨ï¼‰æ¥å¤„ç†ã€‚</li>
<li><code>DispatcherServlet</code>æŒ‰ç…§å¯¹åº”è§„åˆ™å°†è¯·æ±‚åˆ†å‘åˆ°å¯¹åº”çš„<code>Bean</code>ã€‚</li>
<li><code>Bean</code>ç”±æˆ‘ä»¬è‡ªå·±ç¼–å†™æ¥å¤„ç†ä¸åŒçš„è¯·æ±‚ã€‚<br>
æ¯ä¸ª<code>Bean</code>ä¸­å¯ä»¥å¤„ç†ä¸€ä¸ªæˆ–å¤šä¸ªä¸åŒçš„è¯·æ±‚URLã€‚</li>
</ul>
<blockquote>
<p><code>DispatcherServlet</code>å’Œ<code>Bean</code>å¯¹è±¡éƒ½éœ€è¦äº¤ç»™Springå®¹å™¨æ¥è¿›è¡Œç®¡ç†ã€‚</p>
</blockquote>
<p>ç»¼ä¸Šï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™çš„å†…å®¹ä¸ºï¼š</p>
<ul>
<li><code>Bean</code>å¯¹è±¡ï¼›</li>
<li>è¯·æ±‚URLå’Œ<code>Bean</code>å¯¹è±¡å¯¹åº”å…³ç³»çš„é…ç½®ï¼›</li>
<li>æ„å»ºSpringå®¹å™¨ã€‚<br>
å°†<code>DispatcherServlet</code>å’Œ<code>Bean</code>å¯¹è±¡äº¤ç»™å®¹å™¨ç®¡ç†ã€‚</li>
<li>é…ç½®TomcatæœåŠ¡å™¨ã€‚<br>
ä½¿Tomcatèƒ½å¤Ÿè¯†åˆ«Springå®¹å™¨ï¼Œå¹¶å°†è¯·æ±‚äº¤ç»™å®¹å™¨ä¸­çš„<code>DispatcherServlet</code>æ¥åˆ†å‘è¯·æ±‚ã€‚</li>
</ul>
<p>é¡¹ç›®çš„åŸºæœ¬å®ç°æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>åˆ›å»ºWebå·¥ç¨‹ï¼ˆMavenç»“æ„ï¼‰ï¼Œå¹¶åœ¨å·¥ç¨‹çš„<code>pom.xml</code>ä¸­æ·»åŠ SpringMVCå’ŒServletåæ ‡ã€‚</li>
<li>åˆ›å»ºSpringMVCæ§åˆ¶å™¨ç±»ï¼ˆç­‰åŒäºServletåŠŸèƒ½ï¼‰ã€‚</li>
<li>åˆå§‹åŒ–SpringMVCç¯å¢ƒï¼ˆåŒSpringç¯å¢ƒï¼‰ï¼Œè®¾å®šSpringMVCåŠ è½½å¯¹åº”çš„<code>Bean</code>ã€‚</li>
<li>åˆå§‹åŒ–Servletå®¹å™¨ï¼ŒåŠ è½½SpringMVCç¯å¢ƒï¼Œå¹¶è®¾ç½®SpringMVCæŠ€æœ¯å¤„ç†çš„è¯·æ±‚ã€‚</li>
</ol>
<h2 id="é¡¹ç›®ç»“æ„åŠåŸºç¡€ç¯å¢ƒé…ç½®">é¡¹ç›®ç»“æ„åŠåŸºç¡€ç¯å¢ƒé…ç½®</h2>
<p>ä½¿ç”¨SpringMVCå¼€å‘çš„é¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š</p>
<ul>
<li>ğŸ“<code>project-file-name</code>
<ul>
<li>ğŸ“<code>src</code>
<ul>
<li>ğŸ“<code>main</code>
<ul>
<li>ğŸ“<code>java</code>
<ul>
<li>ğŸ“<code>com.linner</code>
<ul>
<li>ğŸ“<code>config</code> â€”â€” é…ç½®ç±»</li>
<li>ğŸ“<code>controller</code> â€”â€” è¡¨ç°å±‚</li>
<li>ğŸ“<code>dao</code> â€”â€” æŒä¹…å±‚</li>
<li>ğŸ“<code>domain</code> â€”â€” å®ä½“ç±»</li>
<li>ğŸ“<code>service</code> â€”â€” ä¸šåŠ¡å±‚</li>
</ul>
</li>
</ul>
</li>
<li>ğŸ“<code>resourcs</code></li>
<li>ğŸ“<code>webapp</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>è¿™ç§é¡¹ç›®ç»“æ„é‡‡ç”¨äº†SSMæ¶æ„ï¼Œå³ï¼š</p>
<ul>
<li>è¡¨ç°å±‚ï¼›</li>
<li>æŒä¹…å±‚ï¼›</li>
<li>ä¸šåŠ¡å±‚ã€‚</li>
</ul>
<p>é€šè¿‡IDEAåˆ›å»ºSpringMVCé¡¹ç›®æ­¥éª¤å¦‚ä¸‹ï¼š</p>
<ol>
<li>åˆ›å»ºåŸºç¡€çš„Maven-Archetype-Webappé¡¹ç›®ã€‚<br>
<img src="https://linna-cy.github.io/old-blog/post-images/1676947539616.png" alt="" loading="lazy"></li>
<li>è¡¥å…¨é¡¹ç›®ç»“æ„ï¼š
<ul>
<li>ğŸ“<code>src</code>
<ul>
<li>ğŸ“<code>main</code>
<ul>
<li>ğŸ“<code>java</code></li>
<li>ğŸ“<code>resourcs</code></li>
<li>ğŸ“<code>webapp</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>ä¿®æ”¹<code>pom.xml</code>æ–‡ä»¶ï¼š<br>
å°†å¤šä½™çš„å†…å®¹åˆ é™¤ï¼Œç„¶åæ·»åŠ SpringMVCæ‰€éœ€çš„ä¾èµ–ã€‚å¦‚ï¼š</li>
</ol>
<pre><code class="language-xml">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;

&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

  &lt;groupId&gt;com.linner&lt;/groupId&gt;
  &lt;artifactId&gt;springmvc-demo&lt;/artifactId&gt;
  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
  &lt;packaging&gt;war&lt;/packaging&gt;

  &lt;properties&gt;
    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
    &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
    &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
  &lt;/properties&gt;

  &lt;dependencies&gt;
    &lt;!-- SpringMVCæ‰€éœ€ä¾èµ–çš„åæ ‡ï¼š --&gt;
    &lt;!-- Servletåæ ‡ï¼š --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
      &lt;artifactId&gt;javax.servlet-api&lt;/artifactId&gt;
      &lt;version&gt;3.1.0&lt;/version&gt;
      &lt;!-- Servletéœ€è¦ä¿®æ”¹ä½œç”¨èŒƒå›´ï¼Œå¦åˆ™ä¼šä¸Tomcatä¸­çš„servlet-apiåŒ…å‘ç”Ÿå†²çª --&gt;
      &lt;!-- providedä»£è¡¨çš„æ˜¯è¯¥åŒ…åªåœ¨ç¼–è¯‘å’Œæµ‹è¯•çš„æ—¶å€™ç”¨ --&gt;
      &lt;scope&gt;provided&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;!-- SpringMVCåæ ‡ï¼š --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.springframework&lt;/groupId&gt;
      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
      &lt;version&gt;5.2.10.RELEASE&lt;/version&gt;
    &lt;/dependency&gt;
  &lt;/dependencies&gt;

  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.tomcat.maven&lt;/groupId&gt;
        &lt;artifactId&gt;tomcat7-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;2.1&lt;/version&gt;
        &lt;configuration&gt;
          &lt;port&gt;80&lt;/port&gt;
          &lt;path&gt;/&lt;/path&gt;
          &lt;uriEncoding&gt;UTF-8&lt;/uriEncoding&gt;
        &lt;/configuration&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
&lt;/project&gt;
</code></pre>
<hr>
<h1 id="é¡¹ç›®ç¯å¢ƒ">é¡¹ç›®ç¯å¢ƒ</h1>
<p>ä½¿ç”¨SpringMVCæ„å»ºWebé¡¹ç›®ï¼Œé™¤äº†ä»¥ä¸ŠåŸºç¡€é…ç½®å¤–ï¼Œè¿˜éœ€è¦å¯¼å…¥å…¶ä»–é…ç½®ã€‚</p>
<p>DAOç›¸å…³çš„åæ ‡ï¼š</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.alibaba&lt;/groupId&gt;
    &lt;artifactId&gt;druid&lt;/artifactId&gt;
    &lt;version&gt;1.1.16&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis&lt;/artifactId&gt;
    &lt;version&gt;3.5.6&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
    &lt;version&gt;5.1.47&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.springframework&lt;/groupId&gt;
    &lt;artifactId&gt;spring-jdbc&lt;/artifactId&gt;
    &lt;version&gt;5.2.10.RELEASE&lt;/version&gt;
&lt;/dependency&gt;
&lt;dependency&gt;
    &lt;groupId&gt;org.mybatis&lt;/groupId&gt;
    &lt;artifactId&gt;mybatis-spring&lt;/artifactId&gt;
    &lt;version&gt;1.3.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<hr>
<h1 id="é…ç½®ç±»">é…ç½®ç±»</h1>
<p><code>jdbc.properties</code>ï¼ˆæ•°æ®åº“é…ç½®ï¼Œæ”¾åœ¨é¡¹ç›®ä¸­<code>resources</code>ç›®å½•ä¸‹ï¼‰ï¼š</p>
<pre><code class="language-properties">jdbc.driver=com.mysql.jdbc.Driver
jdbc.url=jdbc:mysql:///spring_db?useSSL=false&amp;characterEncoding=utf-8
jdbc.username=root
jdbc.password=root
</code></pre>
<p>SpringMVCé¡¹ç›®è‡³å°‘éœ€è¦<code>SpringConfig</code>å’Œ<code>SpringMvcConfig</code>è¿™ä¸¤ä¸ªé…ç½®ç±»ã€‚</p>
<ul>
<li>Springï¼šæ§åˆ¶ä¸šåŠ¡ï¼ˆServiceï¼‰å’ŒåŠŸèƒ½ï¼ˆDataSourceã€SqlSessionFactoryBeanã€ MapperScannerConfigurerç­‰ï¼‰ç›¸å…³çš„Beanã€‚</li>
<li>SpringMVCï¼šåŠ è½½è¡¨ç°å±‚Beanï¼ˆControllerï¼‰ã€‚</li>
</ul>
<p><code>SpringConfig</code>ï¼ˆå¯åŠ¨TomcatæœåŠ¡å™¨æ—¶åŠ è½½Springé…ç½®ç±»ï¼‰ï¼š</p>
<pre><code class="language-java">@Configuration
@ComponentScan({&quot;com.linner.service&quot;})
@PropertySource(&quot;classpath:jdbc.properties&quot;)
@Import({JdbcConfig.class,MyBatisConfig.class})
@EnableTransactionManagement
public class SpringConfig {
}
</code></pre>
<blockquote>
<p>Springéœ€è¦ç®¡ç†çš„æ˜¯<code>service</code>åŒ…å’Œ<code>dao</code>åŒ…ã€‚ä½†<code>dao</code>åŒ…æœ€ç»ˆæ˜¯äº¤ç»™<code>MapperScannerConfigurer</code>å¯¹è±¡æ¥è¿›è¡Œæ‰«æå¤„ç†çš„ã€‚æ‰€ä»¥<code>SpringConfig</code>åªéœ€è¦æ‰«æåˆ°<code>service</code>åŒ…å³å¯ã€‚<br>
æ¼”ç¤º<code>@ComponentScan</code>çš„å¦ä¸€ç§ç”¨æ³•ï¼ˆæ’é™¤<code>controller</code>åŒ…ä¸­çš„Beanï¼‰ï¼š</p>
<pre><code class="language-java">@ComponentScan(value=&quot;com.linner&quot;,
  excludeFilters=@ComponentScan.Filter(
      type = FilterType.ANNOTATION,
      classes = Controller.class // æ’é™¤@Controllerå®šä¹‰çš„Bean
  )
)
</code></pre>
<p>ä¸Šé¢æ–¹æ³•æœ¬è´¨æ˜¯ä½¿ç”¨<code>@ComponentScan</code>çš„<code>excludeFilters</code>å±æ€§è®¾ç½®è¿‡æ»¤è§„åˆ™ã€‚</p>
<ul>
<li><code>type</code>ï¼šè®¾ç½®æ’é™¤è§„åˆ™ã€‚
<ul>
<li><code>ANNOTATION</code>ï¼šæŒ‰ç…§æ³¨è§£æ’é™¤ã€‚</li>
<li><code>ASSIGNABLE_TYPE</code>ï¼šæŒ‰ç…§æŒ‡å®šçš„ç±»å‹è¿‡æ»¤ã€‚</li>
<li><code>ASPECTJ</code>ï¼šæŒ‰ç…§Aspectjè¡¨è¾¾å¼æ’é™¤ï¼ˆåŸºæœ¬ä¸Šä¸ä¼šç”¨ï¼‰ã€‚</li>
<li><code>REGEX</code>ï¼šæŒ‰ç…§æ­£åˆ™è¡¨è¾¾å¼æ’é™¤ã€‚</li>
<li><code>CUSTOM</code>ï¼šæŒ‰ç…§è‡ªå®šä¹‰è§„åˆ™æ’é™¤ã€‚<br>
<code>classes</code>ï¼šè®¾ç½®æ’é™¤çš„å…·ä½“æ³¨è§£ç±»ã€‚</li>
</ul>
</li>
</ul>
</blockquote>
<p><code>SpringMvcConfig</code></p>
<pre><code class="language-java">@Configuration
@ComponentScan(&quot;com.linner.controller&quot;)
public class SpringMvcConfig {
}
</code></pre>
<p>DAOç›¸å…³é…ç½®ç±»ï¼š</p>
<p><code>JdbcConfig</code>ï¼š</p>
<pre><code class="language-java">public class JdbcConfig {
    @Value(&quot;${jdbc.driver}&quot;)
    private String driver;
    @Value(&quot;${jdbc.url}&quot;)
    private String url;
    @Value(&quot;${jdbc.username}&quot;)
    private String username;
    @Value(&quot;${jdbc.password}&quot;)
    private String password;

    @Bean
    public DataSource dataSource(){
        DruidDataSource dataSource = new DruidDataSource();
        dataSource.setDriverClassName(driver);
        dataSource.setUrl(url);
        dataSource.setUsername(username);
        dataSource.setPassword(password);
        return dataSource;
    }

    @Bean
    public PlatformTransactionManager transactionManager(DataSource dataSource){
        DataSourceTransactionManager ds = new DataSourceTransactionManager();
        ds.setDataSource(dataSource);
        return ds;
    }
}
</code></pre>
<p><code>MyBatisConfig</code>ï¼š</p>
<pre><code class="language-java">public class MyBatisConfig {
    @Bean
    public SqlSessionFactoryBean sqlSessionFactory(DataSource dataSource){
        SqlSessionFactoryBean factoryBean = new SqlSessionFactoryBean();
        factoryBean.setDataSource(dataSource);
        factoryBean.setTypeAliasesPackage(&quot;com.linner.domain&quot;);
        return factoryBean;
    }

    @Bean
    public MapperScannerConfigurer mapperScannerConfigurer(){
        MapperScannerConfigurer msc = new MapperScannerConfigurer();
        msc.setBasePackage(&quot;com.linner.dao&quot;);
        return msc;
    }
}
</code></pre>
<p><code>ServletConfig</code>ï¼ˆWebé¡¹ç›®å…¥å£é…ç½®ç±»ï¼‰ï¼š</p>
<pre><code class="language-java">public class ServletConfig extends AbstractAnnotationConfigDispatcherServletInitializer {

    protected Class&lt;?&gt;[] getRootConfigClasses() {
        return new Class[]{SpringConfig.class};
    }

    protected Class&lt;?&gt;[] getServletConfigClasses() {
        return new Class[]{SpringMvcConfig.class};
    }

    protected String[] getServletMappings() {
        return new String[]{&quot;/&quot;};
    }
}
</code></pre>
<hr>
<h1 id="springmvc-å·¥ä½œæµç¨‹">SpringMVC å·¥ä½œæµç¨‹</h1>
<p>SpringMVCçš„ä½¿ç”¨è¿‡ç¨‹å…±åˆ†ä¸¤ä¸ªé˜¶æ®µï¼š</p>
<ol>
<li>å¯åŠ¨æœåŠ¡å™¨åˆå§‹åŒ–è¿‡ç¨‹ï¼›
<ol>
<li>
<p>æœåŠ¡å™¨å¯åŠ¨ï¼Œæ‰§è¡Œ<code>ServletConfig</code>ç±»ï¼Œåˆå§‹åŒ–Webå®¹å™¨ã€‚</p>
</li>
<li>
<p>æ ¹æ®<code>getServletConfigClasses</code>è·å–æ‰€éœ€çš„SpringMVCé…ç½®ç±»ï¼ˆè¿™é‡Œæ˜¯<code>SpringMvcConfig</code>ï¼‰æ¥åˆå§‹åŒ–SpringMVCçš„å®¹å™¨ã€‚</p>
</li>
<li>
<p>åŠ è½½<code>SpringMvcConfig</code>é…ç½®ç±»ã€‚</p>
</li>
<li>
<p>æ‰§è¡Œ<code>@ComponentScan</code>åŠ è½½å¯¹åº”çš„<code>Bean</code>ã€‚<br>
æ‰«ææŒ‡å®šåŒ…ä¸‹æ‰€æœ‰ç±»ä¸Šçš„æ³¨è§£ï¼Œå°†æ‰€æœ‰çš„Controllerç±»ï¼ˆå¦‚æœ‰<code>@Controller</code>ã€<code>@RestController</code>ç­‰æ³¨è§£çš„ç±»ï¼‰åŠ è½½åˆ°å®¹å™¨ä¸­ã€‚</p>
</li>
<li>
<p>åŠ è½½æ¯ä¸€ä¸ª<code>Controler</code>ã€‚<br>
ä½¿ç”¨<code>@RequestMapping</code>å»ºç«‹è¯·æ±‚è·¯å¾„ä¸<code>Controler</code>ä¸­çš„æ–¹æ³•çš„å¯¹åº”å…³ç³»ã€‚</p>
</li>
<li>
<p>æ‰§è¡Œ<code>getServletMappings</code>æ–¹æ³•ï¼Œå®šä¹‰æ‰€æœ‰çš„è¯·æ±‚éƒ½é€šè¿‡SpringMVCã€‚å¦‚ï¼š</p>
<pre><code class="language-java">protected Spring[]  getServletMappings() {
    return new Spring[]{&quot;/&quot;};
}    
</code></pre>
<p><code>/</code>ä»£è¡¨æ‰€æ‹¦æˆªè¯·æ±‚çš„è·¯å¾„è§„åˆ™ï¼Œåªæœ‰è¢«æ‹¦æˆªåæ‰èƒ½äº¤ç»™SpringMVCæ¥å¤„ç†è¯·æ±‚ã€‚</p>
</li>
</ol>
</li>
<li>å•æ¬¡è¯·æ±‚è¿‡ç¨‹ã€‚
<ol>
<li>æ ¹æ®è¯·æ±‚è·¯å¾„å‘é€è¯·æ±‚ã€‚</li>
<li>Webå®¹å™¨å°†ç¬¦åˆè®¾ç½®çš„è¯·æ±‚è·¯å¾„çš„è¯·æ±‚äº¤ç»™SpringMVCå¤„ç†ã€‚</li>
<li>è§£æè¯·æ±‚è·¯å¾„ã€‚</li>
<li>æ‰§è¡ŒåŒ¹é…å¯¹åº”è¯·æ±‚è·¯å¾„çš„æ–¹æ³•ã€‚</li>
<li>å°†æœ‰<code>@ResponseBody</code>æ–¹æ³•çš„è¿”å›å€¼ä½œä¸ºå“åº”ä½“è¿”å›ç»™è¯·æ±‚æ–¹ã€‚</li>
</ol>
</li>
</ol>
<hr>
<h1 id="è¯·æ±‚ä¸å“åº”">è¯·æ±‚ä¸å“åº”</h1>
<p>SpringMVCæ˜¯Webå±‚çš„æ¡†æ¶ï¼Œä¸»è¦ä½œç”¨æ˜¯æ¥æ”¶è¯·æ±‚ã€æ¥æ”¶æ•°æ®ã€å“åº”ç»“æœã€‚</p>
<p>ç¼–å†™Controlleråªéœ€è¦åœ¨Controllerç±»ä¸Šä½¿ç”¨<code>@Controller</code>æ³¨è§£å³å¯ã€‚</p>
<h2 id="æ¥æ”¶-url-å‚æ•°">æ¥æ”¶ URL å‚æ•°</h2>
<blockquote>
<p>æ¥æ”¶URLå‚æ•°ï¼ŒGETå’ŒPOSTè¯·æ±‚çš„ç¼–å†™æ–¹å¼ä¸€è‡´ã€‚<br>
å¦‚æœè¦ä½¿ç”¨ä¸åŒçš„æ–¹å¼æ¥æ”¶è¯·æ±‚ï¼Œå¯ä»¥ä¿®æ”¹<code>@RequestMapping</code>æ³¨è§£ï¼š</p>
<pre><code class="language-java">@RequestMapping(value = &quot;/save&quot;, method = RequestMethod.GET)
</code></pre>
</blockquote>
<h3 id="æ™®é€šå‚æ•°">æ™®é€šå‚æ•°</h3>
<pre><code class="language-java">@Controller
@RequestMapping(&quot;/user&quot;)
public class UserController {

    // ä½¿ç”¨ [http://localhost/user/hello?name=å¼ ä¸‰] è®¿é—®
    // è¿”å›å“åº”ä½“ Hello å¼ ä¸‰!
    @RequestMapping(&quot;/hello&quot;)
    @ResponseBody
    public String hello(String name) {
        return &quot;Hello &quot; + name + &quot;!&quot;;
    }

    // ä½¿ç”¨ [http://localhost/user/login?name=å¼ ä¸‰&amp;password=abc] è®¿é—®
    // è¿”å›å“åº”ä½“ OKï¼Œç»ˆç«¯è¾“å‡º userName=å¼ ä¸‰; password=abc
    @RequestMapping(&quot;/login&quot;)
    @ResponseBody
    public String login(@RequestParam(&quot;name&quot;) String userName, String password) {
        System.out.println(&quot;userName=&quot; + userName + &quot;; password=&quot; + password);
        return &quot;OK&quot;;
    }

}
</code></pre>
<ul>
<li>è¯·æ±‚è·¯å¾„ï¼ˆ<code>@RequestMapping</code>ï¼‰ï¼š<br>
è¯·æ±‚è·¯å¾„ä½¿ç”¨<code>@RequestMapping</code>æ³¨è§£ã€‚æ³¨è§£ä¸­çš„å€¼ä¸ºè¯·æ±‚è·¯å¾„ã€‚<br>
<code>@RequestMapping</code>å¯ä»¥ä½œç”¨åœ¨ç±»å’Œæ–¹æ³•ä¸Šã€‚<br>
æ–¹æ³•ä¸Šå®šä¹‰çš„<code>@RequestMapping</code>æ˜¯å…·ä½“çš„è¯·æ±‚è·¯å¾„ã€‚å³ï¼Œå¦‚æœåœ¨æ–¹æ³•ä¸Šä½¿ç”¨äº†<code>@RequestMapping</code>å¹¶ä¸”æ²¡æœ‰åœ¨ç±»ä¸Šä½¿ç”¨<code>@RequestMapping</code>ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•çš„è¯·æ±‚è·¯å¾„å³ä¸ºæ–¹æ³•ä¸Š<code>@RequestMapping</code>ä¸­çš„å€¼ã€‚<br>
ç±»ä¸Šå®šä¹‰çš„<code>@RequestMapping</code>æ˜¯è¯·æ±‚ç›®å½•ã€‚å³ï¼Œå¦‚æœåœ¨æ–¹æ³•å’Œç±»ä¸Šå‡ä½¿ç”¨äº†<code>@RequestMapping</code>ï¼Œé‚£ä¹ˆè¯¥æ–¹æ³•çš„è¯·æ±‚è·¯å¾„éœ€è¦åŠ ä¸Šç±»<code>@RequestMapping</code>æ³¨è§£ä¸­å®šä¹‰çš„ç›®å½•ã€‚ä¾‹å¦‚ä¸Šæ–¹ä»£ç ä¸­çš„è¯·æ±‚è·¯å¾„ä¸º<code>/user/hello</code>å’Œã€‚</li>
<li>è¯·æ±‚å‚æ•°ï¼š<br>
æ™®é€šå‚æ•°å³URLåœ°å€ä¼ å‚ã€‚<br>
<strong>å®šä¹‰ç›¸åŒçš„åœ°å€å‚æ•°åä¸æ–¹æ³•å½¢å‚å˜é‡åå³å¯æ¥æ”¶å‚æ•°ã€‚</strong><br>
<strong>å¦‚æœæƒ³è¦å½¢å‚åä¸åœ°å€å‚æ•°åä¸åŒåˆ™å¯ä½¿ç”¨<code>@RequestParam</code>æ³¨è§£å®šä¹‰åœ°å€å‚æ•°å</strong>ï¼ˆå¦‚<code>login()</code>ï¼‰ã€‚<br>
å¦‚æœæœ‰å¤šä¸ªè¯·æ±‚å‚æ•°åˆ™å®šä¹‰å¤šä¸ªæ–¹æ³•å‚æ•°ã€‚</li>
<li>è¿”å›å€¼ï¼š<br>
è¿”å›å€¼ä½¿ç”¨<code>@ResponseBody</code>æ³¨è§£åç›´æ¥åœ¨æ–¹æ³•ä¸­ä½¿ç”¨<code>return</code>è¿”å›ã€‚è¿™é‡Œæ³¨è§£<code>@ResponseBody</code>æ˜¯æŒ‡å°†è¿”å›å€¼ä½œä¸ºå“åº”ä½“ã€‚</li>
</ul>
<h3 id="pojoç±»å‹å‚æ•°">POJOç±»å‹å‚æ•°</h3>
<p>ä½¿ç”¨POJOç±»å‹æ¥æ”¶å‚æ•°ï¼Œåªéœ€è¦è®©è¯·æ±‚å‚æ•°åä¸å½¢å‚å¯¹è±¡å±æ€§åç›¸åŒå³å¯ã€‚å¦‚æœæœ‰åµŒå¥—çš„POJOå‚æ•°ï¼Œè¯·æ±‚å‚æ•°åä¸å½¢å‚å¯¹è±¡å±æ€§åç›¸åŒï¼Œç„¶åæŒ‰ç…§å¯¹è±¡å±‚æ¬¡ç»“æ„å…³ç³»å³å¯æ¥æ”¶ã€‚</p>
<p>å®šä¹‰ä¸€ä¸ªPOJOç±»ï¼š</p>
<pre><code class="language-java">public class Address {
    private String province;
    private String city;
    // setterã€getter and toString...
}
</code></pre>
<pre><code class="language-java">public class User {
    private Integer id;
    private String name;
    private String password;
    private Address address;
    // setterã€getter and toString...
}
</code></pre>
<p>Controllerï¼š</p>
<pre><code class="language-java">@Controller
@RequestMapping(&quot;/user&quot;)
public class UserController {

    // è®¿é—® [http://localhost/user/login?id=123&amp;password=abc&amp;name=å¼ ä¸‰&amp;address.province=å¹¿ä¸œ&amp;address.city=å¹¿å·]
    // è¿”å›å“åº”ä½“ OKï¼Œç»ˆç«¯è¾“å‡º Login: User{id=123, name='å¼ ä¸‰', password='abc', address=Address{province='å¹¿ä¸œ', city='å¹¿å·'}}
    @RequestMapping(&quot;/login&quot;)
    @ResponseBody
    public String login(User user) {
        System.out.println(&quot;Login: &quot; + user);
        return &quot;OK&quot;;
    }

}
</code></pre>
<h3 id="æ•°ç»„-é›†åˆç±»å‹å‚æ•°">æ•°ç»„ã€é›†åˆç±»å‹å‚æ•°</h3>
<p>æ¥æ”¶æ•°ç»„å‚æ•°åªéœ€è®©è¯·æ±‚å‚æ•°åä¸å½¢å‚åç›¸åŒä¸”è¯·æ±‚å‚æ•°ä¸ºå¤šä¸ªå³å¯ï¼ˆå½¢å‚ä¸ºæ•°ç»„ç±»å‹ï¼‰ã€‚</p>
<pre><code class="language-java">@Controller
@RequestMapping(&quot;/user&quot;)
public class UserController {

    // è®¿é—® [http://localhost/user/setHobbies?id=123&amp;hobbies=å”±æ­Œ,è·³èˆ,Rap,æ‰“ç¯®çƒ]
    // è¿”å›å“åº”ä½“ OKï¼Œç»ˆç«¯è¾“å‡º User 123's hobbyies: [å”±æ­Œ, è·³èˆ, Rap, æ‰“ç¯®çƒ]
    @RequestMapping(&quot;/setHobbies&quot;)
    @ResponseBody
    public String setHobbies(Integer id, String[] hobbies) {
        System.out.println(&quot;User &quot; + id + &quot;'s hobbies: &quot; + Arrays.toString(hobbies));
        return &quot;OK&quot;;
    }

}
</code></pre>
<p>ä½¿ç”¨é›†åˆç±»å‹å½¢å‚æ¥æ”¶å‚æ•°ï¼Œä½¿ç”¨æ–¹å¼ä¸æ•°ç»„ä¸åŒï¼ˆä¼šæŠ¥é”™ï¼‰ã€‚å› ä¸ºSpringMVCå°†Listçœ‹åšæ˜¯ä¸€ä¸ªPOJOå¯¹è±¡æ¥å¤„ç†ï¼Œå°†å…¶åˆ›å»ºä¸€ä¸ªå¯¹è±¡å¹¶å‡†å¤‡æŠŠå‰ç«¯çš„æ•°æ®å°è£…åˆ°å¯¹è±¡ä¸­ï¼Œä½†æ˜¯Listæ˜¯ä¸€ä¸ªæ¥å£æ— æ³•åˆ›å»ºå¯¹è±¡ã€‚</p>
<p>ä½¿ç”¨é›†åˆç±»å‹å½¢å‚æ¥æ”¶å‚æ•°éœ€è¦ä½¿ç”¨<code>@RequestParam</code>ç»‘å®šå‚æ•°å…³ç³»ã€‚</p>
<pre><code class="language-java">@Controller
@RequestMapping(&quot;/user&quot;)
public class UserController {

    // è®¿é—®æ–¹å¼ä¸æ•°ç»„å½¢å¼ç›¸åŒï¼Œå“åº”ä½“ä¸ç»ˆç«¯è¾“å‡ºä¹Ÿç›¸åŒ
    @RequestMapping(&quot;/setHobbies&quot;)
    @ResponseBody
    public String setHobbies(Integer id, @RequestParam List&lt;String&gt; hobbies) {
        System.out.println(&quot;User &quot; + id + &quot;'s hobbies: &quot; + hobbies);
        return &quot;OK&quot;;
    }

}
</code></pre>
<h3 id="æ—¥æœŸæ ¼å¼">æ—¥æœŸæ ¼å¼</h3>
<p>ä½¿ç”¨<code>@DateTimeFormat</code>å¯ä»¥è®¾ç½®å‚æ•°çš„æ—¥æœŸæ ¼å¼ï¼Œå¦‚ï¼š</p>
<pre><code class="language-java">@Controller
@RequestMapping(&quot;/user&quot;)
public class UserController {

    // URL: http://localhost/user/setBirthday?id=123&amp;birthday=2023/1/1 18:23:40
    @RequestMapping(&quot;/setBirthday&quot;)
    @ResponseBody
    public String setBirthday(Integer id, @DateTimeFormat(pattern = &quot;yyyy/MM/dd HH:mm:ss&quot;) Date birthday) {
        System.out.println(&quot;User &quot; + id + &quot;'s birthday is &quot; + birthday);
        return &quot;OK&quot;;
    }
    
}
</code></pre>
<h2 id="json-æ•°æ®å‚æ•°">JSON æ•°æ®å‚æ•°</h2>
<p>ä½¿ç”¨JSONä¼ è¾“éœ€è¦æ·»åŠ ç›¸åº”ä¾èµ–ã€‚SpringMVCé»˜è®¤ä½¿ç”¨çš„æ˜¯jacksonæ¥å¤„ç†jsonçš„è½¬æ¢ï¼š</p>
<pre><code class="language-xml">&lt;dependency&gt;
    &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
    &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
    &lt;version&gt;2.9.0&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
<p>åœ¨é…ç½®ç±»ä¸­æ·»åŠ <code>@EnableWebMvc</code>æ³¨è§£æ¥å¼€å¯JSONæ•°æ®ç±»å‹è‡ªåŠ¨è½¬æ¢ï¼š</p>
<pre><code class="language-java">@Configuration
@ComponentScan(&quot;com.linner.controller&quot;)
@EnableWebMvc // å¼€å¯JSONæ•°æ®ç±»å‹è‡ªåŠ¨è½¬æ¢
public class SpringMvcConfig {
}
</code></pre>
<p>ä½¿ç”¨JSONä¼ è¾“æ•°æ®åªéœ€è¦åœ¨å½¢å‚å‰æ·»åŠ <code>@ResponseBody</code>æ³¨è§£æ¥å°†å¤–éƒ¨ä¼ é€’çš„JSONæ•°æ®æ˜ å°„åˆ°å½¢å‚åˆ°å¯¹è±¡ä¸­ï¼š</p>
<pre><code class="language-java">@Controller
@RequestMapping(&quot;/user&quot;)
public class UserController {

    @RequestMapping(&quot;/login&quot;)
    @ResponseBody
    public String login(@RequestBody User user) {
        System.out.println(&quot;Login: &quot; + user);
        return &quot;OK&quot;;
    }

    @RequestMapping(&quot;/setHobbies&quot;)
    @ResponseBody
    public String setHobbies(Integer id, @RequestBody List&lt;String&gt; /* ä¹Ÿå¯ä»¥ä½¿ç”¨ String[] */ hobbies) {
        System.out.println(&quot;User &quot; + id + &quot;'s hobbies: &quot; + hobbies);
        return &quot;OK&quot;;
    }

}
</code></pre>
<ul>
<li>
<p><code>login()</code>ï¼š<br>
URLï¼š<code>http://localhost/user/login</code><br>
JSONï¼š</p>
<pre><code class="language-json">{
    &quot;id&quot;: 123,
    &quot;name&quot;: &quot;å¼ ä¸‰&quot;,
    &quot;password&quot;: &quot;123&quot;,
    &quot;address&quot;: {
        &quot;province&quot;: &quot;å¹¿ä¸œ&quot;,
        &quot;city&quot;: &quot;å¹¿å·&quot;
    }
} 
</code></pre>
</li>
<li>
<p><code>setHobbies</code>ï¼š<br>
URLï¼š<code>http://localhost/user/setHobbies2?id=123</code><br>
JSONï¼š</p>
<pre><code class="language-json">[&quot;å”±æ­Œ&quot;, &quot;è·³èˆ&quot;, &quot;Rap&quot;, &quot;æ‰“ç¯®çƒ&quot;]
</code></pre>
</li>
</ul>
<h2 id="å“åº”-json-æ•°æ®">å“åº” JSON æ•°æ®</h2>
<p>å“åº”JSONæ•°æ®éœ€è¦ä¾èµ–äº<code>@ResponseBody</code>ï¼ˆåœ¨Controllerä¸­ï¼‰å’Œ<code>@EnableWebMvc</code>ï¼ˆåœ¨é…ç½®ç±»ä¸­ï¼‰æ³¨è§£ã€‚å°†è¿”å›å€¼è®¾ç½®ä¸ºå®ä½“ç±»å¯¹è±¡ï¼Œè®¾ç½®è¿”å›å€¼ç±»å‹ä¸ºå®ä½“ç±»ç±»å‹ï¼Œå³å¯å®ç°è¿”å›å¯¹åº”å¯¹è±¡çš„JSONæ•°æ®ï¼š</p>
<p>å®ä½“ç±»ï¼š</p>
<pre><code class="language-java">public class Book {
    private Integer id;
    private String name;
    // constructorã€setterã€getter and toString ...
}
</code></pre>
<p>Controller:</p>
<pre><code class="language-java">@Controller
@RequestMapping(&quot;/books&quot;)
public class BookController {

    @RequestMapping(&quot;/search&quot;)
    @ResponseBody
    public Book search(int id) {
        return new Book(id, &quot;Hello SpringMVC&quot;);
    }

    @RequestMapping(&quot;/searchName&quot;)
    @ResponseBody
    public List&lt;Book&gt; searchName(String name) {
        System.out.println(&quot;Search the book &quot; + name);
        List books = new ArrayList&lt;Book&gt;();
        for (int i = 0; i &lt; 5; i++) {
            books.add(new Book(i, name + Integer.toString(i)));
        }
        return books;
    }

}
</code></pre>
<ul>
<li>
<p><code>searchName()</code>ï¼š<br>
URLï¼šhttp://localhost/books/searchName?name=SpringMVC<br>
è¿”å›JOSNï¼š</p>
<pre><code class="language-json">[
    {
        &quot;id&quot;: 0,
        &quot;name&quot;: &quot;SpringMVC0&quot;
    },
    {
        &quot;id&quot;: 1,
        &quot;name&quot;: &quot;SpringMVC1&quot;
    },
    {
        &quot;id&quot;: 2,
        &quot;name&quot;: &quot;SpringMVC2&quot;
    },
    {
        &quot;id&quot;: 3,
        &quot;name&quot;: &quot;SpringMVC3&quot;
    },
    {
        &quot;id&quot;: 4,
        &quot;name&quot;: &quot;SpringMVC4&quot;
    }
]
</code></pre>
</li>
<li>
<p><code>search()</code>ï¼š<br>
URLï¼šhttp://localhost/books/search?id=123<br>
è¿”å›JSONï¼š</p>
<pre><code class="language-json">{
    &quot;id&quot;: 123,
    &quot;name&quot;: &quot;SpringMVC&quot;
}
</code></pre>
</li>
</ul>
<h2 id="rest-é£æ ¼">REST é£æ ¼</h2>
<p>RESTï¼ˆRepresentational State Transferï¼Œè¡¨ç°å½¢å¼çŠ¶æ€è½¬æ¢ï¼‰ï¼Œæ˜¯ä¸€ç§è½¯ä»¶æ¶æ„é£æ ¼ã€‚RESTçš„ä¼˜ç‚¹æœ‰ï¼š</p>
<ul>
<li>éšè—èµ„æºçš„è®¿é—®è¡Œä¸ºï¼Œæ— æ³•é€šè¿‡åœ°å€å¾—çŸ¥å¯¹èµ„æºæ˜¯ä½•ç§æ“ä½œã€‚</li>
<li>ç®€åŒ–ä¹¦å†™ã€‚</li>
</ul>
<p>æŒ‰ç…§RESTé£æ ¼è®¿é—®èµ„æºæ—¶ä½¿ç”¨è¡Œä¸ºåŠ¨ä½œåŒºåˆ†å¯¹èµ„æºè¿›è¡Œäº†ä½•ç§æ“ä½œï¼š</p>
<ul>
<li>GETï¼šæŸ¥è¯¢ï¼›</li>
<li>POSTï¼šæ–°å¢ã€‚</li>
<li>PUTï¼šä¿®æ”¹ã€‚</li>
<li>DELETEï¼šåˆ é™¤ã€‚</li>
</ul>
<p>å¦‚ï¼š</p>
<ul>
<li><code>http://localhost/users</code>â€”â€”GETï¼š<br>
æŸ¥è¯¢å…¨éƒ¨ç”¨æˆ·ä¿¡æ¯ï¼ˆæŸ¥è¯¢ï¼‰ã€‚</li>
<li><code>http://localhost/users/1</code>â€”â€”GETï¼šæŸ¥è¯¢æŒ‡å®šç”¨æˆ·ï¼ˆidä¸º1ï¼‰ä¿¡æ¯ï¼ˆæŸ¥è¯¢ï¼‰ã€‚</li>
<li><code>http://localhost/users</code>â€”â€”POSTï¼šæ·»åŠ ç”¨æˆ·ä¿¡æ¯ï¼ˆæ–°å¢/ä¿å­˜ï¼‰ã€‚</li>
<li><code>http://localhost/users</code>â€”â€”PUTï¼šä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ï¼ˆä¿®æ”¹/æ›´æ–°ï¼‰ã€‚</li>
<li><code>http://localhost/users/1</code>â€”â€”DELETEï¼šåˆ é™¤ç”¨æˆ·ä¿¡æ¯ï¼ˆåˆ é™¤ï¼‰ã€‚</li>
</ul>
<blockquote>
<p>æè¿°æ¨¡å—çš„åç§°é€šå¸¸ä½¿ç”¨å¤æ•°ï¼Œè¡¨ç¤ºæ­¤ç±»èµ„æºï¼Œè€Œéå•ä¸ªèµ„æºã€‚</p>
</blockquote>
<p>Exampleï¼š</p>
<pre><code class="language-java">@Controller
@RequestMapping(&quot;/users&quot;)
public class UserController {

    /**
     * æ·»åŠ ç”¨æˆ·
     */
    @RequestMapping(method = RequestMethod.POST)
    @ResponseBody
    public String save(@RequestBody User user) {
        return &quot;OK&quot;;
    }

    /**
     * åˆ é™¤ç”¨æˆ·
     */
    @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.DELETE)
    @ResponseBody
    public String delete(@PathVariable int id) {
        return &quot;OK&quot;;
    }

    /**
     * ä¿®æ”¹ç”¨æˆ·
     */
    @RequestMapping(method = RequestMethod.PUT)
    @ResponseBody
    public String update(@RequestBody User user) {
        return &quot;OK&quot;;
    }

    /**
     * æ ¹æ®ç”¨æˆ·idæŸ¥è¯¢
     */
    @RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.GET)
    @ResponseBody
    public String searchById(@PathVariable int id) {
        return &quot;OK&quot;;
    }

    /**
     * æŸ¥è¯¢æ‰€æœ‰ç”¨æˆ·
     */
    @RequestMapping(method = RequestMethod.GET)
    @ResponseBody
    public String searchAll() {
        return &quot;OK&quot;;
    }
}
</code></pre>
<p>ä¸Šæ–¹Controllerä¸­æ¯ä¸ªæ–¹æ³•çš„<code>@RequestMapping</code>ä¸­éƒ½ä½¿ç”¨äº†<code>method</code>å…ƒç´ æ¥ç¡®å®šè¯·æ±‚æ–¹å¼ã€‚å¹¶ä¸”æ ¹æ®éœ€è¦<code>save()</code>å’Œ<code>update()</code>éƒ½æ¥æ”¶ä¸€ä¸ªJSONæ•°æ®ã€‚</p>
<p><code>delete()</code>å’Œ<code>searchById()</code>éƒ½ä½¿ç”¨äº†è·¯å¾„å‚æ•°ï¼ˆ<code>value = &quot;\{id}&quot;</code>ï¼‰ã€‚æŒ‡å®šè·¯å¾„å‚æ•°åï¼Œéœ€è¦åœ¨æ–¹æ³•å‚æ•°åˆ—è¡¨ä¸­æ·»åŠ åç§°ç›¸åŒçš„å‚æ•°ï¼Œå¹¶ä¸”ç”¨<code>@PathVariable</code>æ³¨è§£ï¼ˆ<code>public String delete(@PathVariable int id)</code>ï¼‰ã€‚</p>
<p>è·¯å¾„å‚æ•°å¯ä»¥å®šä¹‰å¤šä¸ªï¼Œå¦‚ï¼š</p>
<pre><code class="language-java">@RequestMapping(value = &quot;/{id}/{name}&quot;, method = RequestMethod.GET)
@ResponseBody
public String searchById(@PathVariable int id, @PathVariable String name) {
    return &quot;OK&quot;;
}
</code></pre>
<p>å¦‚æœæƒ³è¦è·¯å¾„å‚æ•°åä¸å½¢å‚åä¸åŒï¼Œéœ€è¦åœ¨<code>@PathVariable</code>ä¸­æ³¨æ˜å¯¹åº”å…³ç³»ï¼Œå¦‚ï¼š</p>
<pre><code class="language-java">@RequestMapping(value = &quot;/{id}&quot;, method = RequestMethod.DELETE)
@ResponseBody
public String delete(@PathVariable(&quot;id&quot;) int userId) {
    return &quot;OK&quot;;
}
</code></pre>
<h3 id="restful-å¿«é€Ÿå¼€å‘">RESTful å¿«é€Ÿå¼€å‘</h3>
<ul>
<li>ä½¿ç”¨<code>@RestController</code>æ³¨è§£ï¼š<br>
å°†<code>@ResponseBody</code>æ³¨è§£æåˆ°ç±»ä¸Šï¼Œè®©æ‰€æœ‰çš„æ–¹æ³•éƒ½æœ‰<code>@ResponseBody</code>çš„åŠŸèƒ½ã€‚<br>
<code>@RestController</code>æ³¨è§£æ­£å¥½ç›¸å½“äº<code>@Controller</code>åŠ ä¸Š<code>@ResponseBody</code>çš„åŠŸèƒ½ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨<code>@RestController</code>æ›¿ä»£å®ƒä»¬ã€‚</li>
<li>ä½¿ç”¨<code>@GetMapping</code>ã€<code>@PostMapping</code>ã€<code>@PutMapping</code>ã€<code>@DeleteMapping</code>ç­‰æ›¿ä»£<code>@RequestMapping</code>ã€‚<br>
ä¾‹å¦‚<code>@GetMapping</code>å°±ç›¸å½“äº<code>RequestMapping(method = RequestMethod.GET)</code>ã€‚</li>
</ul>
<p>Exampleï¼š</p>
<pre><code class="language-java">@RestController
@RequestMapping(&quot;/books&quot;)
public class BookController {

    /**
     * æœç´¢å…¨éƒ¨ä¹¦ç±
     */
    @GetMapping
    public String getAll() {
        return &quot;All Books&quot;;
    }

    /**
     * æœç´¢å›¾ä¹¦
     */
    @GetMapping(&quot;/{id}&quot;)
    public String getById(@PathVariable int id) {
        return &quot;Get by id &quot; + id;
    }

    /**
     * ä¿å­˜å›¾ä¹¦
     */
    @PostMapping
    public String save(@RequestBody Book book) {
        return &quot;Save &quot; + book.toString();
    }

    /**
     * ä¿®æ”¹å›¾ä¹¦
     */
    @PutMapping
    public String update(@RequestBody Book book) {
        return &quot;Update &quot; + book.toString();
    }

    /**
     * åˆ é™¤å›¾ä¹¦
     */
    @DeleteMapping(&quot;/{id}&quot;)
    public String delete(@PathVariable int id) {
        return &quot;Delete by id&quot; + id;
    }

}
</code></pre>
<hr>
<h1 id="æ‹¦æˆªå™¨">æ‹¦æˆªå™¨</h1>
<p>æ‹¦æˆªå™¨ï¼ˆInterceptorï¼‰æ˜¯ä¸€ç§åŠ¨æ€æ‹¦æˆªæ–¹æ³•è°ƒç”¨çš„æœºåˆ¶ï¼Œåœ¨SpringMVCä¸­åŠ¨æ€æ‹¦æˆªæ§åˆ¶å™¨æ–¹æ³•çš„æ‰§è¡Œã€‚æ‹¦æˆªå™¨å¯ä»¥åœ¨æŒ‡å®šçš„å‘é‚£ä¸ªå‘è°ƒç”¨å‰åæ‰§è¡Œé¢„å…ˆè®¾å®šçš„ä»£ç ï¼Œå¯ä»¥é˜»æ­¢åŸå§‹æ–¹æ³•çš„æ‰§è¡Œã€‚æ‹¦æˆªå™¨å’Œè¿‡æ»¤å™¨åœ¨ä½œç”¨å’Œæ‰§è¡Œé¡ºåºä¸Šå¾ˆç›¸ä¼¼ã€‚å®ƒä»¬çš„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<figure data-type="image" tabindex="1"><img src="https://linna-cy.github.io/old-blog/post-images/1630676903190.png" alt="" loading="lazy"></figure>
<p>åˆ›å»ºæ‹¦æˆªå™¨ç±»ï¼š</p>
<pre><code class="language-java">@Component  // ç”±SpringMVCæ¥ç®¡ç†
public class BookInterceptor implements HandlerInterceptor {
    @Override
    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
        System.out.println(&quot;preHandle...&quot;);
        return true;
    }

    @Override
    public void postHandle(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView) throws Exception {
        System.out.println(&quot;postHandle...&quot;);
    }

    @Override
    public void afterCompletion(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex) throws Exception {
        System.out.println(&quot;afterCompletion...&quot;);
    }
}
</code></pre>
<p>é…ç½®æ‹¦æˆªå™¨ç±»ï¼š</p>
<pre><code class="language-java">@Configuration
public class SpringMvcSupport extends WebMvcConfigurationSupport {
    @Autowired  // è‡ªåŠ¨è£…é…
    private BookInterceptor bookInterceptor;

    @Override
    protected void addInterceptors(InterceptorRegistry registry) {
        // æ·»åŠ ï¼ˆå£°æ˜ï¼‰æ‹¦æˆªå™¨å¹¶é…ç½®æ‹¦æˆªè§„åˆ™
        // å¯ä»¥åŒæ—¶é…ç½®å¤šä¸ªè§„åˆ™
        registry.addInterceptor(bookInterceptor).addPathPatterns(&quot;/books&quot;, &quot;/books/*&quot;);
    }
}
</code></pre>
<p>è®©SpringMVCæ‰«æåˆ°æ‹¦æˆªå™¨çš„é…ç½®ç±»ï¼š</p>
<pre><code class="language-java">@Configuration
@ComponentScan({&quot;com.linner.controller&quot;, &quot;com.linner.config&quot;})
@EnableWebMvc
public class SpringMvcConfig {
}
</code></pre>
<p>è¿è¡Œç¨‹åºï¼Œå‘é€<code>books</code>å¼€å¤´çš„è¯·æ±‚ï¼ˆå¦‚<code>http://localhost/books</code>ï¼‰ï¼Œç»ˆç«¯ä¼šæœ‰å¦‚ä¸‹è¾“å‡ºï¼š</p>
<pre><code>preHandle...
getAll...
postHandle...
afterCompletion...
</code></pre>
<p>æ‹¦æˆªå™¨çš„æ‰§è¡Œé¡ºåºå¦‚ä¸‹ï¼š</p>
<ol>
<li>æ‰§è¡Œ<code>preHandle()</code>ã€‚
<ul>
<li><code>preHandle()</code>è¿”å›å€¼ä¸º<code>true</code>ï¼š
<ol>
<li>æ‰§è¡Œè¯·æ±‚è·¯å¾„ç›¸åº”çš„æ–¹æ³•æˆ–ä¸‹ä¸€ä¸ªæ‹¦æˆªå™¨çš„<code>preHandle()</code>ã€‚</li>
<li>åˆ¤æ–­æ˜¯å¦æ‰§è¡Œ<code>postHandle()</code>ï¼š
<ul>
<li>Controllerè¢«æ‰§è¡Œï¼ˆåç»­æ‹¦æˆªå™¨é“¾ä¸­æ²¡æœ‰ä¸€ä¸ª<code>preHandle()</code>è¿”å›å€¼ä¸º<code>false</code>ï¼‰ï¼Œæ‰§è¡Œ<code>postHandle()</code>ã€‚</li>
<li>Controlleræ²¡æœ‰è¢«æ‰§è¡Œï¼ˆåç»­æ‹¦æˆªå™¨é“¾ä¸­å­˜åœ¨ä¸€ä¸ª<code>preHandle()</code>è¿”å›å€¼ä¸º<code>false</code>ï¼‰ï¼Œä¸æ‰§è¡Œ<code>postHandle()</code>ã€‚</li>
</ul>
</li>
<li>æ‰§è¡Œ<code>afterCompletion()</code>ã€‚</li>
</ol>
</li>
<li><code>preHandle()</code>è¿”å›å€¼ä¸º<code>false</code>ã€‚</li>
</ul>
</li>
<li>ç»“æŸã€‚</li>
</ol>
<p>å½“é…ç½®å¤šä¸ªæ‹¦æˆªå™¨æ—¶ï¼Œå½¢æˆæ‹¦æˆªå™¨é“¾ã€‚å¤šä¸ª<code>preHandle()</code>æŒ‰ç…§Interceptorè¢«å£°æ˜é¡ºåºæ‰§è¡Œï¼›å¤šä¸ª<code>postHandle()</code>æŒ‰ç…§Interceptorè¢«å£°æ˜é¡ºåºé€†åºæ‰§è¡Œã€‚å³ï¼Œæ‹¦æˆªå™¨é“¾çš„è¿è¡Œé¡ºåºå‚ç…§æ‹¦æˆªå™¨æ·»åŠ é¡ºåºä¸ºå‡†ã€‚</p>
<p>å½“æ‹¦æˆªå™¨ä¸­å‡ºç°å¯¹åŸå§‹å¤„ç†å™¨çš„æ‹¦æˆªï¼Œåé¢çš„æ‹¦æˆªå™¨å‡ç»ˆæ­¢è¿è¡Œã€‚å½“æ‹¦æˆªå™¨è¿è¡Œä¸­æ–­ï¼Œä»…è¿è¡Œé…ç½®åœ¨å‰é¢çš„æ‹¦æˆªå™¨çš„<code>afterCompletion()</code>æ“ä½œï¼ˆ<code>afterCompletion()</code>ä»£è¡¨å½“å‰æ‹¦æˆªå™¨æ‰§è¡Œå®Œæˆï¼Œä¸åç»­æ‹¦æˆªå™¨é“¾ä¸­<code>preHandle()</code>çš„è¿”å›å€¼å’ŒControlleræ˜¯å¦è¢«æ‰§è¡Œæ— å…³ï¼‰ã€‚</p>
<h2 id="æ‹¦æˆªå™¨é…ç½®ä¹¦å†™ç®€åŒ–">æ‹¦æˆªå™¨é…ç½®ä¹¦å†™ç®€åŒ–</h2>
<p>Interceptorçš„é…ç½®ç±»<code>SpingMvcSupport</code>å¯ä»¥ä¹¦å†™åœ¨<code>SpringMvcConfig</code>ä¸­ï¼š</p>
<pre><code class="language-java">@Configuration
@ComponentScan({&quot;com.linner.controller&quot;})
@EnableWebMvc
public class SpringMvcConfig implements WebMvcConfigurer {
    @Autowired
    private BookInterceptor bookInterceptor;

    @Override
    public void addInterceptors(InterceptorRegistry registry) {
        registry.addInterceptor(bookInterceptor).addPathPatterns(&quot;/books&quot;, &quot;/books/*&quot;);
    }
}
</code></pre>
<h2 id="é™æ€èµ„æº">é™æ€èµ„æº</h2>
<pre><code class="language-java">@Configuration
public class SpringMvcSupport extends WebMvcConfigurationSupport {
    @Override
    protected void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler(&quot;/pages/**&quot;).addResourceLocations(&quot;/pages/&quot;);
    }
}
</code></pre>
<ul>
<li><code>addResourceHandler()</code>ï¼šå®šä¹‰è®¿é—®èµ„æºè·¯å¾„ã€‚</li>
<li><code>addResourceLocations()</code>ï¼šå®šä¹‰è®¿é—®è·¯å¾„æ—¶çš„é™æ€èµ„æºç›®å½•ã€‚</li>
</ul>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">ä¸‹ä¸€ç¯‡</div>
                <a href="https://linna-cy.github.io/old-blog/Javaè¿›é˜¶/" class="post-title gt-a-link">
                    Java è¿›é˜¶
                </a>
            </div>
        

        

        

        <!-- <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first"></div>
    <div class="social-container">
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        
    </div>
    <div>
        Theme <a href="https://github.com/imhanjie/gridea-theme-pure" target="_blank">Pure</a>, Powered by <a
                href="https://gridea.dev" target="_blank">Gridea</a> | <a href="https://linna-cy.github.io/old-blog/atom.xml" target="_blank">RSS</a>
    </div>
</div>
 -->
    </div>
</div>
<script>
  hljs.highlightAll();
  // å¼€å¯ä»£ç é«˜äº®
  // hljs.initHighlightingOnLoad();
  // è¡Œå·æ˜¾ç¤º
  // hljs.initLineNumbersOnLoad({ singleLine:true });
  // let tocDiv = document.getElementById('toc-div');
  // let toc = document.querySelector('#toc-div .markdownIt-TOC');
  // if (toc === null || toc === undefined) {
  //   tocDiv.style.display = 'none';
  // }

  setCodeAllNum();
</script>
</body>
</html>
